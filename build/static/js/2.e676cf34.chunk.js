(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){"use strict";(function(e,r,o,i){n.d(t,"a",function(){return we}),n.d(t,"b",function(){return Te}),n.d(t,"c",function(){return ss}),n.d(t,"d",function(){return mc}),n.d(t,"e",function(){return Ju}),n.d(t,"f",function(){return ip}),n.d(t,"g",function(){return mu}),n.d(t,"h",function(){return On}),n.d(t,"i",function(){return Xs}),n.d(t,"j",function(){return Zs}),n.d(t,"k",function(){return ps}),n.d(t,"l",function(){return xu}),n.d(t,"m",function(){return Jn}),n.d(t,"n",function(){return En}),n.d(t,"o",function(){return Ml}),n.d(t,"p",function(){return np}),n.d(t,"q",function(){return ic}),n.d(t,"r",function(){return Ac}),n.d(t,"s",function(){return vc}),n.d(t,"t",function(){return Cs}),n.d(t,"u",function(){return Su}),n.d(t,"v",function(){return nr}),n.d(t,"w",function(){return Wc}),n.d(t,"x",function(){return fr}),n.d(t,"y",function(){return mn}),n.d(t,"z",function(){return nc}),n.d(t,"A",function(){return Iu}),n.d(t,"B",function(){return xc}),n.d(t,"C",function(){return Ec}),n.d(t,"D",function(){return Br}),n.d(t,"E",function(){return hr}),n.d(t,"F",function(){return Os}),n.d(t,"G",function(){return hn}),n.d(t,"H",function(){return gn}),n.d(t,"I",function(){return yn}),n.d(t,"J",function(){return bn}),n.d(t,"K",function(){return xn}),n.d(t,"L",function(){return qt}),n.d(t,"M",function(){return vr}),n.d(t,"N",function(){return Vc}),n.d(t,"O",function(){return gr}),n.d(t,"P",function(){return Cn});var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,u)}s((r=r.apply(e,t||[])).next())})}function c(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var l=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,t[0],t[1]),t.join("=")}),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach(function(t){var n=t.split(":"),r=n[0],o=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,o)})}},e}();function f(){return p}var p=null,d=new Map,h=new Map;function v(e,t){var n=b(e,t);return d.get(n)}function m(e){for(var t=d.entries(),n=[];;){var r=t.next(),o=r.done,i=r.value;if(o)break;var a=i[0],u=i[1];a.split("_")[0]===e&&n.push(u)}return n}function g(e){var t=e.kernelName,n=e.backendName,r=b(t,n);if(d.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");d.set(r,e)}function y(e){var t=e.kernelName;h.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),h.set(t,e)}function b(e,t){return t+"_"+e}function x(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function w(e,t,n){return Math.max(e,Math.min(t,n))}function C(e){return e%2==0?e:e+1}function E(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function k(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function _(e,t,n){void 0===n&&(n=""),k(R(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function S(e){k(null!=e,function(){return"The input to the tensor constructor must be a non-null value."})}function O(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||V(e)&&!n)for(var r=0;r<e.length;++r)O(e[r],t,n);else t.push(e);return t}function T(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function R(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function I(e){return e%1==0}function A(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function N(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function D(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function P(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise(function(r,o){var i=0;!function a(){if(e())r();else{var u=t(++i);null!=n&&i>=n?o():setTimeout(a,u)}}()})}function M(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function F(e,t){var n=t.length;return k((e=null==e?t.map(function(e,t){return t}):[].concat(e)).every(function(e){return e>=-n&&e<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),k(e.every(function(e){return I(e)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(e){return e<0?n+e:e})}function B(e,t){for(var n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||o?null:F(t,e).sort(),a=0,u=0;u<e.length;++u){if(null!=i){if(i[a]===u&&1!==e[u])throw new Error("Can't squeeze axis "+u+" since its dim '"+e[u]+"' is not 1");(null==i[a]||i[a]>u)&&1===e[u]&&(n.push(e[u]),r.push(u)),i[a]<=u&&a++}1!==e[u]&&(n.push(e[u]),r.push(u))}return{newShape:n,keptDims:r}}function j(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function L(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function W(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function z(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function U(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function V(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function H(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function G(e){if(null==e)return 0;var t=0;return e.forEach(function(e){return t+=e.length}),t}function q(e){return"string"==typeof e||e instanceof String}function K(e){return"boolean"==typeof e}function $(e){return"number"==typeof e}function X(e){return Array.isArray(e)?X(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":$(e)?"float32":q(e)?"string":K(e)?"bool":"float32"}function Y(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Q(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function J(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Z(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=O(e)),n&&W(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)0!==Math.round(e[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function ee(e,t){if(0===e.length)return t[0];var n=e.reduce(function(e,t){return e*t});if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var o=new Array;if(1===n.length)for(var i=n[0],a=0;a<i;a++)o[a]=r[t+a];else{i=n[0];var u=n.slice(1),s=u.reduce(function(e,t){return e*t});for(a=0;a<i;a++)o[a]=e(t+a*s,u,r)}return o}(0,e,t)}function te(e,t){for(var n=ne(e,t),r=0;r<n.length;r++)n[r]=1;return n}function ne(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function re(){return f().platform.now()}function oe(e){e.forEach(function(t){k(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function ie(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",f().platform.encode(e,t)}function ae(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",f().platform.decode(e,t)}function ue(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function se(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}Object.freeze({shuffle:x,clamp:w,nearestLargerEven:C,sum:E,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var o=Number(e[r])-Number(t[r]);n+=o*o}return n},assert:k,assertShapesMatch:_,assertNonNull:S,flatten:O,sizeFromShape:T,isScalarShape:function(e){return 0===e.length},arraysEqual:R,isInt:I,tanh:A,sizeToSquarishShape:N,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return x(t),t},rightPad:D,repeatedTry:P,inferFromImplicitShape:M,parseAxisParam:F,squeezeShape:B,getTypedArrayFromDType:j,getArrayFromDType:L,checkConversionForErrors:W,isValidDtype:z,hasEncodingLoss:U,isTypedArray:V,bytesPerElement:H,bytesFromStringArray:G,isString:q,isBoolean:K,isNumber:$,inferDtype:X,isFunction:Y,nearestDivisor:Q,computeStrides:J,toTypedArray:Z,toNestedArray:ee,makeOnesTypedArray:te,makeZerosTypedArray:ne,now:re,assertNonNegativeIntegerDimensions:oe,fetch:function(e,t){return f().platform.fetch(e,t)},encodeString:ie,decodeString:ae,locToIndex:ue,indexToLoc:se});var ce=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new le)}return e.prototype.profileKernel=function(e,t,n){var r,o=this,i=this.backendTimer.time(function(){r=n()});return r.forEach(function(n){n.data().then(function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var o=e[r];if(isNaN(o)||!isFinite(o))return console.warn("Found "+o+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),i.then(function(i){var a="";null!=i.getExtraProfileInfo&&(a=i.getExtraProfileInfo()),o.logger.logKernelProfile(e,n,r,i.kernelMs,t,a)})})}),r},e}(),le=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,o,i){var a="number"==typeof r?D(r+"ms",9):r.error,u=D(e,25),s=t.rank,c=t.size,l=D(t.shape.toString(),14),f="";for(var p in o){var d=o[p].shape||t.shape,h=d.length;f+=p+": "+h+"D "+(h>0?d:"")+" "}console.log("%c"+u+"\t%c"+a+"\t%c"+s+"D "+l+"\t%c"+c+"\t%c"+f+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),fe=20,pe=3,de=7;function he(e,t,n){return D(Array.isArray(e)?parseFloat(e[0].toFixed(de))+" + "+parseFloat(e[1].toFixed(de))+"j":q(e)?"'"+e+"'":"bool"===n?ve(e):parseFloat(e.toFixed(de)).toString(),t)}function ve(e){return 0===e?"false":"true"}function me(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var ge=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=T(e),null!=n){var o=n.length;k(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+r.size+"'."})}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||L(t,this.size),this.strides=J(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),k(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"});var o=this.locToIndex(n);this.values[o]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,o=e;r<o.length;r++){var i=o[r];if(i<0||i>=this.shape[n]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(a)}n++}for(var u=e[e.length-1],s=0;s<e.length-1;++s)u+=this.strides[s]*e[s];return this.values[u]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return ye().makeTensor(this.values,this.shape,this.dtype)},e}(),ye=null,be=null,xe=null,we=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=T(e),this.strides=J(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),k(1===this.size,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),this.reshape([e,t,n,r,o])},e.prototype.asType=function(e){return this.throwIfDisposed(),be.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,be.buffer(this.shape,this.dtype,e)]}})})},e.prototype.bufferSync=function(){return be.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,ee(this.shape,e)]}})})},e.prototype.arraySync=function(){return ee(this.shape,this.dataSync())},e.prototype.data=function(){return s(this,void 0,void 0,function(){var e,t;return c(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=ye().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map(function(e){return ae(e)})]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var e=ye().readSync(this.dataId);if("string"===this.dtype)try{return e.map(function(e){return ae(e)})}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,ye().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(ye().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),be.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),be.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),be.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),be.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),be.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),be.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),be.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var o=J(t),i=function(e,t,n,r){var o=T(t),i=r[r.length-1],a=new Array(i).fill(0),u=t.length,s="complex64"===n?me(e):e;if(u>1)for(var c=0;c<o/i;c++)for(var l=c*i,f=0;f<i;f++)a[f]=Math.max(a[f],he(s[l+f],0,n).length);return a}(e,t,n,o),a=t.length,u=function e(t,n,r,o,i,a){void 0===a&&(a=!0);var u="complex64"===r?2:1,s=n[0],c=n.length;if(0===c)return"complex64"===r?[he(me(t)[0],0,r)]:"bool"===r?[ve(t[0])]:[t[0].toString()];if(1===c){if(s>fe){var l=pe*u,f=Array.from(t.slice(0,l)),p=Array.from(t.slice((s-pe)*u,s*u));return"complex64"===r&&(f=me(f),p=me(p)),["["+f.map(function(e,t){return he(e,i[t],r)}).join(", ")+", ..., "+p.map(function(e,t){return he(e,i[s-pe+t],r)}).join(", ")+"]"]}return["["+("complex64"===r?me(t):Array.from(t)).map(function(e,t){return he(e,i[t],r)}).join(", ")+"]"]}var d=n.slice(1),h=o.slice(1),v=o[0]*u,m=[];if(s>fe){for(var g=0;g<pe;g++){var y=(b=g*v)+v;m.push.apply(m,e(t.slice(b,y),d,r,h,i,!1))}for(m.push("..."),g=s-pe;g<s;g++)y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),d,r,h,i,g===s-1))}else for(g=0;g<s;g++){var b;y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),d,r,h,i,g===s-1))}var x=2===c?",":"";for(m[0]="["+m[0]+x,g=1;g<m.length-1;g++)m[g]=" "+m[g]+x;var w=",\n";for(g=2;g<c;g++)w+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(a?"":w),m}(e,t,n,o,i),s=["Tensor"];return r&&(s.push("  dtype: "+n),s.push("  rank: "+a),s.push("  shape: ["+t+"]"),s.push("  values:")),s.push(u.map(function(e){return"    "+e}).join("\n")),s.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),be.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),be.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),be.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),be.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),be.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),be.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),be.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),be.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),be.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),be.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),be.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),be.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,o){return void 0===n&&(n=.001),xe("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,o,r,n)},e.prototype.batchNorm=function(e,t,n,r,o){return void 0===o&&(o=.001),this.throwIfDisposed(),be.batchNorm(this,e,t,n,r,o)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),be.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),be.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),be.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),be.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),be.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),be.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),be.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),be.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),be.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),be.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),be.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),be.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),be.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),be.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),be.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),be.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),be.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),be.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),be.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),be.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),be.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),be.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),be.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),be.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),be.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),be.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),be.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),be.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),be.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),be.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),be.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),be.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),be.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),be.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),be.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),be.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),be.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),be.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),be.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),be.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),be.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),be.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),be.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),be.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),be.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),be.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),be.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),be.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),be.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),be.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),be.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),be.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),be.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),be.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),be.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),be.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),be.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),be.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),be.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),be.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),be.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),be.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),be.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),be.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),be.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),be.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),be.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),be.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),be.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),be.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),be.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),be.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),be.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),be.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),be.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),be.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),be.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),be.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),be.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),be.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),be.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),be.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),be.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),be.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),be.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),be.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),be.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),be.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,o,i){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),be.conv1d(this,e,t,n,r,o,i)},e.prototype.conv2d=function(e,t,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),be.conv2d(this,e,t,n,r,o,i)},e.prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),be.conv2dTranspose(this,e,t,n,r,o)},e.prototype.depthwiseConv2D=function(e,t,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),be.depthwiseConv2d(this,e,t,n,r,o,i)},e.prototype.separableConv2d=function(e,t,n,r,o,i){return void 0===o&&(o=[1,1]),void 0===i&&(i="NHWC"),this.throwIfDisposed(),be.separableConv2d(this,e,t,n,r,o,i)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),be.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),be.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),be.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,o){return this.throwIfDisposed(),be.pool(this,e,t,n,r,o)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),ye().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),be.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),be.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),be.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),be.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,o,i,a,u){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===u&&(u=0),this.throwIfDisposed(),be.stridedSlice(this,e,t,n,r,o,i,a,u)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),be.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),be.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),be.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),be.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),be.spectral.irfft(this)},e}();Object.defineProperty(we,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Ce,Ee,ke,_e,Se,Oe,Te=function(e){function t(t,n,r,o){var i=e.call(this,t.shape,t.dtype,t.dataId,o)||this;return i.trainable=n,i.name=r,i}return u(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!R(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");ye().disposeTensor(this),this.dataId=e.dataId,ye().incRef(this,null)},t.prototype.dispose=function(){ye().disposeVariable(this),this.isDisposedInternal=!0},t}(we);Object.defineProperty(Te,Symbol.hasInstance,{value:function(e){return e instanceof we&&null!=e.assign&&e.assign instanceof Function}}),(Oe=Ce||(Ce={})).R0="R0",Oe.R1="R1",Oe.R2="R2",Oe.R3="R3",Oe.R4="R4",Oe.R5="R5",Oe.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Ee||(Ee={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(ke||(ke={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(_e||(_e={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Se||(Se={}));var Re={float32:_e,int32:Ee,bool:ke,complex64:Se};function Ie(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Re[e][t]}function Ae(e){return Ie(e,"int32")}function Ne(e,t){if(e.dtype===t.dtype)return[e,t];var n=Ie(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function De(e,t){k(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function Pe(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof we)n.push(t);else if(o=t,Array.isArray(o)||"object"==typeof o){var o,i=t;for(var a in i){var u=i[a];r.has(u)||(r.add(u),e(u,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:Ne,assertTypesMatch:De,isTensorInList:function(e,t){return t.some(function(t){return t.id===e.id})},getTensorsInContainer:Pe});var Me,Fe=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Be=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Fe}return e.prototype.ready=function(){return s(this,void 0,void 0,function(){var e,t,n;return c(this,function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then(function(){})];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return s(this,void 0,void 0,function(){var t,n,r;return c(this,function(o){switch(o.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=o.sent(),[3,3];case 2:r=n,o.label=3;case 3:if(!r)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new ce(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var e=this;m(this.backendName).forEach(function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)})},e.prototype.disposeRegisteredKernels=function(e){var t=this;m(e).forEach(function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])})},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var o=++this.pendingBackendInitId,i=r.then(function(n){return!(o<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)}).catch(function(n){return!(o<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)});return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),o=r.success,i=r.asyncInit;if(i||o)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,o,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,o=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun(function(){return r.startScope(o)},function(){return r.endScope(n)},function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],function(e){return{x:function(){return e.toFloat()}}},[]),t},e.prototype.runKernel=function(e,t,n,r,o){return this.runKernelFunc(null,t,null,e,n,r,o)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),o=0;n.forEach(function(e){o+="complex64"===e.dtype?3:1});var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-o-i;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,o,i,a){var u,s=this;void 0===i&&(i=[]),void 0===a&&(a=[]);var c=[],l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var f,p=function(e){l&&(c=e.map(function(e){return s.keep(s.clone(e))}))},d=this.state.numBytes,h=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=v(r,this.backendName);return f=null!=g?function(){var e=s.backend.numDataIds();m=g.kernelFunc({inputs:t,attrs:o,backend:s.backend});var n=Array.isArray(m)?m:[m];s.shouldCheckForMemLeaks()&&s.checkKernelForMemLeak(r,e,n);var u=n.map(function(e){var t=e.dataId,n=e.shape,r=e.dtype;return s.makeTensorFromDataId(t,n,r)}),c=u.filter(function(e,t){return a[t]});return p((i||[]).slice().concat(c)),u}:function(){var t=s.backend.numDataIds();m=s.tidy(function(){return e(s.backend,p)});var n=Array.isArray(m)?m:[m];return s.shouldCheckForMemLeaks()&&s.checkKernelForMemLeak(r,t,n),n},this.scopedRun(function(){return s.state.kernelDepth++},function(){return s.state.kernelDepth--},function(){u=s.ENV.getBool("DEBUG")?s.profiler.profileKernel(r,t,function(){return f()}):f()}),l&&this.addTapeNode(r,t,u,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-d,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-h,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map(function(e){return t[e].shape}),outputShapes:u.map(function(e){return e.shape})}),Array.isArray(m)?u:u[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var o=e;"string"===n&&q(e[0])&&(o=e.map(function(e){return ie(e)}));var i=r.write(o,t,n),a=new we(t,n,i,this.nextTensorId());if(this.incRef(a,r),"string"===n){var u=this.state.tensorInfo.get(i),s=G(o);this.state.numBytes+=s-u.bytes,u.bytes=s}return a},e.prototype.makeTensorFromDataId=function(e,t,n,r){var o=new we(t,n=n||"float32",e,this.nextTensorId());return this.incRef(o,r),o},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var o=new Te(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*H(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Te||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return s(this,void 0,void 0,function(){var t,n;return c(this,function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(e){return e.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,o){var i=this,a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},u=function(e){return h.get(e)}(e);null!=u&&(r=u.gradFunc),null!=r&&(a.gradient=function(e){return e=e.map(function(e,t){if(null==e){var r=n[t],o=ne(r.size,r.dtype);return i.makeTensor(o,r.shape,r.dtype)}return e}),r(e.length>1?e:e[0],o)}),this.state.activeTape.push(a)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Pe(e),r=new Set(n.map(function(e){return e.id})),o=0;o<this.state.activeScope.track.length;o++){var i=this.state.activeScope.track[o];i.kept||r.has(i.id)||i.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(e){e.kept||e.scopeId!==a.id||t.track(e)})},e.prototype.gradients=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),k(t.length>0,function(){return"gradients() received an empty list of xs."}),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var i=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",e)});k(i instanceof we,function(){return"The result y returned by f() must be a tensor."});var a=function(e,t,n){for(var r={},o={},i=0;i<t.length;i++)r[t[i].id]=!0;for(i=0;i<e.length;i++){var a=(h=e[i]).inputs;for(var u in a){for(var s=a[u],c=!1,l=0;l<t.length;l++)if(r[s.id]){h.outputs.forEach(function(e){return r[e.id]=!0}),c=!0,o[h.id]=!0;break}if(c)break}}var f={};f[n.id]=!0;var p={};for(i=e.length-1;i>=0;i--)for(a=(h=e[i]).inputs,l=0;l<h.outputs.length;l++)if(f[h.outputs[l].id]){for(var u in a)f[a[u].id]=!0,p[h.id]=!0;break}var d=[];for(i=0;i<e.length;i++){var h;if(o[(h=e[i]).id]&&p[h.id]){var v={};for(var u in h.inputs){var m=h.inputs[u];r[m.id]&&(v[u]=m)}var g=Object.assign({},h);g.inputs=v,g.outputs=h.outputs,d.push(g)}}return d}(this.state.activeTape,t,i);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var e,r,u={};u[i.id]=null==n?(r=te(T(e=i.shape),"float32"),je.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var o=t[r],i=[];if(o.outputs.forEach(function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)}),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.kernelName+".");var a=o.gradient(i),u=function(t){if(!(t in a))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(a)+".");var r=n(function(){return a[t]()});if("float32"!==r.dtype)throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var i=o.inputs[t];if(!R(r.shape,i.shape))throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+i.shape+"'");if(null==e[i.id])e[i.id]=r;else{var u=e[i.id];e[i.id]=u.add(r),u.dispose()}};for(var s in o.inputs)u(s)},o=t.length-1;o>=0;o--)r(o)}(u,a,function(e){return o.tidy(e)});var s=t.map(function(e){return u[e.id]});return 0===o.state.gradientDepth&&(o.state.activeTape.forEach(function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()}),o.state.activeTape=null),{value:i,grads:s}})},e.prototype.customGrad=function(e){var t=this;return k(Y(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];k(r.every(function(e){return e instanceof we}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i={};return r.forEach(function(e,t){i[t]=e}),t.runKernelFunc(function(t,o){return k((n=e.apply(void 0,r.concat([o]))).value instanceof we,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),k(Y(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},i,function(e,t){var o=n.gradFunc(e,t),i=Array.isArray(o)?o:[o];k(i.length===r.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),k(i.every(function(e){return e instanceof we}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var a={};return i.forEach(function(e,t){a[t]=function(){return e}}),a})}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return s(this,void 0,void 0,function(){var t,n;return c(this,function(r){switch(r.label){case 0:return t=re(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=re()-t,[2,n]}})})},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Fe,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),je=function(){var t=function(){if(null==Me){var t=void 0;if("undefined"!=typeof window)t=window;else if("undefined"!=typeof e)t=e;else if("undefined"!=typeof r)t=r;else{if("undefined"==typeof self)throw new Error("Could not find a global object");t=self}Me=t}return Me}();if(null==t._tfengine){var n=new l(t);t._tfengine=new Be(n)}return function(e){p=e}(t._tfengine.ENV),ye=function(){return t._tfengine},t._tfengine}();function Le(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var We=f();We.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),We.registerFlag("IS_BROWSER",function(){return Le()}),We.registerFlag("IS_NODE",function(){return"undefined"!=typeof r&&void 0!==r.versions&&void 0!==r.versions.node}),We.registerFlag("IS_CHROME",function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),We.registerFlag("PROD",function(){return!1}),We.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return We.getBool("DEBUG")}),We.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),We.registerFlag("IS_TEST",function(){return!1});var ze,Ue,Ve,He={},Ge={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function qe(e,t){He[e]=t}function Ke(e){e in He||(He[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",function(t){t.preventDefault(),delete He[e]},!1),1===e?t.getContext("webgl",Ge)||t.getContext("experimental-webgl",Ge):t.getContext("webgl2",Ge)}(e));var t=He[e];return t.isContextLost()?(delete He[e],Ke(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),He[e])}function $e(e,t){return[t,e]}function Xe(e){var t=T(e);return N(Math.ceil(t/4))}function Ye(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Qe(e,t){var n,r,o,i,a,u,s,c,l,p=e;return 2===f().getNumber("WEBGL_VERSION")?(n=p.R32F,r=p.R16F,o=p.RGBA16F,i=p.RGBA32F,a=p.RED,u=4,s=1,c=p.HALF_FLOAT,l=p.FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,i=p.RGBA,a=e.RGBA,u=4,s=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:u,defaultNumChannels:s,textureTypeHalfFloat:c,textureTypeFloat:l}}function Je(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+nt(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(ze||(ze={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Ue||(Ue={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Ve||(Ve={}));var Ze=5.96e-8,et=65504;function tt(e){return!!(f().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||Ze<Math.abs(e)&&Math.abs(e)<et)}function nt(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function rt(e,t,n){return St(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function ot(e,t,n){var r=St(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Je(e,t,function(){return e.shaderSource(r,n)}),Je(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function it(e,t,n){var r=St(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Je(e,t,function(){return e.shaderSource(r,n)}),Je(e,t,function(){return e.compileShader(r)}),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=st.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],o=e.split("\n"),i=o.length.toString().length+2,a=o.map(function(e,t){return D((t+1).toString(),i)+e}),u=0,s=0;s<a.length;s++)u=Math.max(a[s].length,u);var c=a.slice(0,r-1),l=a.slice(r-1,r),f=a.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+D(l[0],u),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var at,ut,st=/ERROR: [0-9]+:([0-9]+):/g;function ct(e,t){return St(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function lt(e,t,n){if(Je(e,t,function(){return e.linkProgram(n)}),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function ft(e,t,n){if(Je(e,t,function(){return e.validateProgram(n)}),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function pt(e,t,n){var r=St(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Je(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),Je(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function dt(e,t,n){var r=St(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Je(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),Je(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function ht(e,t){return St(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function vt(e,t){var n=f().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function mt(e,t){return St(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function gt(e,t,n,r,o,i,a,u){var s=e.getAttribLocation(n,r);return-1!==s&&(Je(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,o)}),Je(e,t,function(){return e.vertexAttribPointer(s,i,e.FLOAT,!1,a,u)}),Je(e,t,function(){return e.enableVertexAttribArray(s)}),!0)}function yt(e,t,n,r){Ot(e,r),Je(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),Je(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function bt(e,t,n,r){return St(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function xt(e,t,n){return e.getUniformLocation(t,n)}function wt(e,t,n,r,o,i){Je(e,t,function(){return yt(e,t,r,i)}),Je(e,t,function(){return e.uniform1i(o,i)})}function Ct(e,t,n,r){Je(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Je(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function Et(e,t,n){Je(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Je(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function kt(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+_t(e,t))}function _t(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function St(e,t,n,r){var o=Je(e,t,function(){return n()});if(null==o)throw new Error(r);return o}function Ot(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function Tt(e,t){return void 0===t&&(t=2),T(e.slice(0,e.length-t))}function Rt(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function It(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Tt(e)].concat(Rt(e))),t}function At(e,t){var n;void 0===t&&(t=!1);var r=f().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map(function(t,n){return n>=e.length-2?C(e[n]):e[n]})).length&&(e=[2,e[0]])),2!==e.length){var o=B(e);e=o.newShape}var i=T(e);if(e.length<=1&&i<=r)return[1,i];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var a=Tt(e),u=2,s=2;return e.length&&(u=(n=Rt(e))[0],s=n[1]),N(i=a*(u/2)*(s/2)).map(function(e){return 2*e})}return N(i)}function Nt(e){return e%2==0}function Dt(e,t){if(R(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Nt(n)&&Nt(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Nt(e[0])&&Nt(t[0])}function Pt(e){if(null==at){var t=Ke(e);at=t.getParameter(t.MAX_TEXTURE_SIZE)}return at}function Mt(e){if(null==ut){var t=Ke(e);ut=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,ut)}function Ft(e){if(0===e)return 0;var t=Ke(e);return Bt(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Bt(t,"EXT_disjoint_timer_query")?1:0}function Bt(e,t){return null!=e.getExtension(t)}function jt(e){try{if(null!=Ke(e))return!0}catch(e){return!1}return!1}function Lt(e){if(0===e)return!1;var t=Ke(e);if(1===e){if(!Bt(t,"OES_texture_float"))return!1}else if(!Bt(t,"EXT_color_buffer_float"))return!1;return zt(t)}function Wt(e){if(0===e)return!1;var t=Ke(e);if(1!==e){if(Bt(t,"EXT_color_buffer_float"))return zt(t);if(Bt(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=Qe(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),i}(t,n)}return!1}return!!Bt(t,"OES_texture_float")&&!!Bt(t,"WEBGL_color_buffer_float")&&zt(t)}function zt(e){var t=Qe(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function Ut(e){return 2===e&&null!=Ke(e).fenceSync}var Vt=Object.freeze({callAndCheck:Je,canBeRepresented:tt,getWebGLErrorMessage:nt,getExtensionOrThrow:rt,createVertexShader:ot,createFragmentShader:it,createProgram:ct,linkProgram:lt,validateProgram:ft,createStaticVertexBuffer:pt,createStaticIndexBuffer:dt,getNumChannels:function(){return 2===f().getNumber("WEBGL_VERSION")?1:4},createTexture:ht,validateTextureSize:vt,createFramebuffer:mt,bindVertexBufferToProgramAttribute:gt,bindTextureUnit:yt,unbindTextureUnit:function(e,t,n){Ot(e,n),Je(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),Je(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:bt,getProgramUniformLocation:xt,bindTextureToProgramUniformSampler:wt,bindCanvasToFramebuffer:function(e,t){Je(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),Je(e,t,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),Je(e,t,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})},bindColorTextureToFramebuffer:Ct,unbindColorTextureFromFramebuffer:Et,validateFramebuffer:kt,getFramebufferErrorMessage:_t,getBatchDim:Tt,getRowsCols:Rt,getShapeAs3D:It,getTextureShapeFromLogicalShape:At,isReshapeFree:Dt,getWebGLMaxTextureSize:Pt,resetMaxTextureSize:function(){at=null},resetMaxTexturesInShader:function(){ut=null},getMaxTexturesInShader:Mt,getWebGLDisjointQueryTimerVersion:Ft,hasExtension:Bt,isWebGLVersionEnabled:jt,isCapableOfRenderingToFloatTexture:Lt,isDownloadFloatTextureEnabled:Wt,isWebGLFenceEnabled:Ut}),Ht=f();function Gt(e){f().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function qt(e,t){return je.tidy(e,t)}function Kt(e){Pe(e).forEach(function(e){return e.dispose()})}function $t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f().getBool("IS_TEST")||console.warn.apply(console,e)}function Xt(e,t){var n=e;if(V(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||V(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&f().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||V(t)){k(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"}),k(t.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"});for(var o=n.slice(1),i=0;i<t.length;++i)e(t[i],o,r.concat(i))}else k(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"})}(e,r,[]),r}function Yt(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function Qt(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof we)return Yt(r,e.dtype,t,n),e;var o=X(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),Yt(r,o,t,n),null==e||!V(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var a=Xt(e,o);V(e)||Array.isArray(e)||(e=[e]);var u="string"!==o?Z(e,o,f().getBool("DEBUG")):O(e,[],!0);return je.makeTensor(u,a,o)}function Jt(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(e,r){return Qt(e,t+"["+r+"]",n)},r)}function Zt(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function en(e,t,n){for(var r=e.length+t.length,o=[],i=0,a=0,u=0;u<r;u++)-1===n.indexOf(u)?o.push(e[i++]):o.push(t[a++]);return o}function tn(e,t){for(var n=[],r=e.length,o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map(function(t){return e[t]})]}function nn(e,t){return en(e,t.map(function(e){return 1}),t)}function rn(e,t,n){k(Zt(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function on(e,t){if(Zt(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(function(e){return n.push(e)}),n}function an(e){return e.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function un(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function sn(e,t){var n=e[0].length;e.forEach(function(e,t){k(e.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"})}),k(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(e,o){for(var i=0;i<n;i++)k(i===t||e[i]===r[i],function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function cn(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function ln(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];je.startScope(n);try{var o=r.apply(void 0,e);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),je.endScope(o),o}catch(e){throw je.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}Ht.registerFlag("HAS_WEBGL",function(){return Ht.getNumber("WEBGL_VERSION")>0}),Ht.registerFlag("WEBGL_VERSION",function(){return jt(2)?2:jt(1)?1:0}),Ht.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return 2===Ht.get("WEBGL_VERSION")}),Ht.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Ht.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Ht.registerFlag("WEBGL_PACK",function(){return Ht.getBool("HAS_WEBGL")}),Ht.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Ht.getBool("WEBGL_PACK")}),Ht.registerFlag("WEBGL_PACK_CLIP",function(){return Ht.getBool("WEBGL_PACK")}),Ht.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Ht.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Ht.getBool("WEBGL_PACK")}),Ht.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Ht.getBool("WEBGL_PACK")}),Ht.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Ht.getBool("WEBGL_PACK")}),Ht.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Ht.getBool("WEBGL_PACK")}),Ht.registerFlag("WEBGL_PACK_REDUCE",function(){return Ht.getBool("WEBGL_PACK")}),Ht.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Ht.getBool("WEBGL_PACK")}),Ht.registerFlag("WEBGL_CONV_IM2COL",function(){return Ht.getBool("WEBGL_PACK")}),Ht.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Pt(Ht.getNumber("WEBGL_VERSION"))}),Ht.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Mt(Ht.getNumber("WEBGL_VERSION"))}),Ht.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Ht.getNumber("WEBGL_VERSION");return 0===e?0:Ft(e)}),Ht.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Ht.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),Ht.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return Lt(Ht.getNumber("WEBGL_VERSION"))}),Ht.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Ht.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ht.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Ht.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Wt(Ht.getNumber("WEBGL_VERSION"))}),Ht.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return Ut(Ht.getNumber("WEBGL_VERSION"))}),Ht.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Ht.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),xe=Gt;var fn=ln({complex_:function(e,t){var n=Qt(e,"real","complex"),r=Qt(t,"imag","complex");return _(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),je.runKernelFunc(function(e){return e.complex(n,r)},{$real:n,$imag:r})}}),pn=ln({real_:function(e){var t=Qt(e,"input","real");return je.runKernelFunc(function(e){return e.real(t)},{$input:t})}}),dn=ln({imag_:function(e){var t=Qt(e,"input","imag");return je.runKernelFunc(function(e){return e.imag(t)},{$input:t})}});function hn(e,t,n){return vn(e,t,Xt(e,n),n)}function vn(e,t,n,r){if(null==r&&(r=X(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!V(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){oe(t);var o=T(t),i=T(n);k(o===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+i});for(var a=0;a<n.length;++a){var u=n[a],s=a!==n.length-1||u!==T(t.slice(a));k(n[a]===t[a]||!s,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return V(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Z(e,r,f().getBool("DEBUG")):O(e,[],!0),je.makeTensor(e,t,r)}function mn(e,t){if((V(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&V(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return vn(e,[],[],t)}function gn(e,t){S(e);var n=Xt(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return vn(e,null,n,t)}function yn(e,t,n){if(S(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Xt(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return vn(e,t,r,n)}function bn(e,t,n){if(S(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Xt(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return vn(e,t,r,n)}function xn(e,t,n){if(S(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Xt(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return vn(e,t,r,n)}function wn(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=wn(e,"float32"),r=Cn(e,"float32");return fn(n,r)}var o=te(T(e),t);return je.makeTensor(o,e,t)}function Cn(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Cn(e,"float32"),r=Cn(e,"float32");return fn(n,r)}var o=ne(T(e),t);return je.makeTensor(o,e,t)}function En(e,t,n){return je.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function kn(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Cn([0],r);var o=ne(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return gn(o,r)}var _n=ln({onesLike_:function(e){var t=Qt(e,"x","onesLike");if("complex64"===t.dtype){var n=_n(pn(t)),r=Sn(dn(t));return fn(n,r)}return je.runKernelFunc(function(e){return e.onesLike(t)},{$x:t},function(e,t){return{$x:function(){return Sn(e)}}})}}),Sn=ln({zerosLike_:function(e){var t=Qt(e,"x","zerosLike");return je.runKernelFunc(function(e){return e.zerosLike(t)},{$x:t},function(e,t){return{$x:function(){return Sn(e)}}})}}),On=ln({concat_:function(e,t){void 0===t&&(t=0),k(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=Jt(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach(function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")}),t=F(t,n[0].shape)[0];var r=cn(n.map(function(e){return e.shape}),t);if(0===T(r))return hn([],r);if(1===(n=n.filter(function(e){return e.size>0})).length)return n[0];var o=n.map(function(e){return e.shape});sn(o,t);var i=n,a={axis:t};return je.runKernelFunc(function(e){return e.concat(n,t)},i,function(e){var n=o.map(function(e){return e[t]});return Nn(e,n,t).map(function(e){return function(){return e}})},"Concat",a)}}),Tn=ln({concat1d_:function(e){return On(e,0)}}),Rn=ln({concat2d_:function(e,t){return On(e,t)}}),In=ln({concat3d_:function(e,t){return On(e,t)}}),An=ln({concat4d_:function(e,t){return On(e,t)}}),Nn=ln({split_:function(e,t,n){void 0===n&&(n=0);var r,o=Qt(e,"x","split");return n=F(n,o.shape)[0],"number"==typeof t?(k(o.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(o.shape[n]/t)):(k(o.shape[n]===t.reduce(function(e,t){return e+t}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),je.runKernelFunc(function(e){return e.split(o,r,n)},{$x:o},function(e){return{$x:function(){return On(e,n)}}})}});function Dn(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e||"undefined"!=typeof self&&self;var Pn=Dn(function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.alea=i}(0,e)}),Mn=Dn(function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xor128=i}(0,e)}),Fn=Dn(function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xorwow=i}(0,e)}),Bn=Dn(function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.x&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xorshift7=i}(0,e)}),jn=Dn(function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),o=0,i=-32;i<s;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=u[127&i]^=r+a)?o+1:0);for(o>=128&&(u[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=u[o+34&127],n=u[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[o]=r^n;e.w=a,e.X=u,e.i=o}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.X&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xor4096=i}(0,e)}),Ln=Dn(function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.tychei=i}(0,e)}),Wn=Dn(function(e){!function(t,r){var o,i=this,a=256,u=6,s="random",c=r.pow(a,u),l=r.pow(2,52),f=2*l,p=a-1;function d(e,n,p){var d=[],y=m(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,g(t)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(a):(e=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,g(t)]}}():e,3),d),b=new h(d),x=function(){for(var e=b.g(u),t=c,n=0;e<l;)e=(e+n)*a,t*=a,n=b.g(1);for(;e>=f;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,m(g(b.S),t),(n.pass||p||function(e,t,n,o){return o&&(o.S&&v(o,b),e.state=function(){return v(b,{})}),n?(r[s]=e,t):e})(x,y,"global"in n?n.global:this==r,n.state)}function h(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,u=r.S=[];for(n||(e=[n++]);o<a;)u[o]=o++;for(o=0;o<a;o++)u[o]=u[i=p&i+e[o%n]+(t=u[o])],u[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,u=r.S;e--;)t=u[o=p&o+1],n=n*a+u[p&(u[o]=u[i=p&i+t])+(u[i]=t)];return r.i=o,r.j=i,n})(a)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",o=0;o<r.length;)t[p&o]=p&(n^=19*t[p&o])+r.charCodeAt(o++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(r["seed"+s]=d,m(r.random(),t),e.exports){e.exports=d;try{o=n(85)}catch(e){}}}([],Math)});Wn.alea=Pn,Wn.xor128=Mn,Wn.xorwow=Fn,Wn.xorshift7=Bn,Wn.xor4096=jn,Wn.tychei=Ln;var zn=Wn.alea,Un=function(){function e(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=zn(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var o=void 0,i=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i}while(a>=1||0===a);var u=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*o*u,n=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),Vn=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var o=r||Math.random();this.randu=zn(o.toString()),this.randn=new Un(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,o,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(o=this.randu())<t||Math.log(o)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),Hn=function(){function e(e,t,n,r){var o=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=zn(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Gn(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",oe(e),new ge(e,t,n)}var qn=ln({batchToSpaceND_:function(e,t,n){var r=Qt(e,"x","batchToSpaceND"),o=t.reduce(function(e,t){return e*t});return k(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),k(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),k(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o}),je.runKernelFunc(function(e){return e.batchToSpaceND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}})}}),Kn=ln({broadcastTo_:function(e,t){var n=Qt(e,"broadcastTo","x"),r=n.shape;if(t.some(function(e){return!(e>0)||e%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var o=n.shape.slice();o.length<t.length;)o.unshift(1);n=n.reshape(o)}for(var i=Array.from(t),a=t.length-1;a>=0;a--)if(n.shape[a]===t[a])i[a]=1;else if(1!==n.shape[a])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var u=i.map(function(e,t){return e>1?t:-1}).filter(function(e){return e>=0});return 0===u.length?n.clone():je.runKernelFunc(function(e){return e.tile(n,i)},{input:n},function(e){return{input:function(){return e.sum(u,!0)}}})}}),$n=ln({cast_:function(e,t){var n=Qt(e,"x","cast");if(!z(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return je.runKernelFunc(function(e){return e.cast(n,t)},{x:n},function(e){return{x:function(){return e.clone()}}},"Cast",r)}}),Xn=ln({clone_:function(e){var t=Qt(e,"x","clone",null);return je.runKernelFunc(function(){return je.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(e){return{$x:function(){return e.toFloat()}}})}}),Yn=ln({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=Qt(e,"x","cumsum"),i=on([t|=0],o.rank),a=o;null!=i&&(a=o.transpose(i));var u=un(1,o.rank)[0],s=je.runKernelFunc(function(e){return e.cumsum(a,u,n,r)},{permutedX:a},function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}});return null!=i&&(s=s.transpose(i)),s}}),Qn=ln({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=Qt(e,"x","depthToSpace"),o="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];return k(o*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+"  for depthToSpace with input shape\n      "+r.shape}),k(i*t>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+" for depthToSpace with input shape\n          "+r.shape}),k(a%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape}),je.runKernelFunc(function(e){return e.depthToSpace(r,t,n)},{$x:r})}}),Jn=ln({expandDims_:function(e,t){void 0===t&&(t=0);var n=Qt(e,"x","expandDims",null);k(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(k(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),fr(n,r)}}),Zn=ln({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var o=Gn([e,t],r),i=e<=t?e:t,a=0;a<i;++a)o.set(1,a,a);var u=o.toTensor().as2D(e,t);if(null==n)return u;if(1===n.length)return vr(Jn(u,0),[n[0],1,1]);if(2===n.length)return vr(Jn(Jn(u,0),0),[n[0],n[1],1,1]);if(3===n.length)return vr(Jn(Jn(Jn(u,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),er=ln({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var o=Qt(e,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var u=1===a?o.as2D(1,-1):o,s=je.runKernelFunc(function(e){return e.multinomial(u,r,t,n)},{logits2D:u});return 1===a?s.as1D():s}}),tr=ln({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=Qt(e,"indices","oneHot","int32"),i=o.shape.concat([t]);return o=o.flatten(),je.runKernelFunc(function(e){return e.oneHot(o,t,n,r)},{$indices:o},function(e){return{$indices:function(){return Cn(o.shape,"float32")}}}).reshape(i)}}),nr=ln({pad_:function(e,t,n){void 0===n&&(n=0);var r=Qt(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:t,constantValue:n};return je.runKernelFunc(function(e){return e.pad(r,t,n)},{x:r},function(e){var n=t.map(function(e){return e[0]});return{x:function(){return e.slice(n,r.shape)}}},"PadV2",o)}}),rr=ln({pad1d_:function(e,t,n){return void 0===n&&(n=0),k(2===t.length,function(){return"Invalid number of paddings. Must be length of 2."}),nr(e,[t],n)}}),or=ln({pad2d_:function(e,t,n){return void 0===n&&(n=0),k(2===t.length&&2===t[0].length&&2===t[1].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),nr(e,t,n)}}),ir=ln({pad3d_:function(e,t,n){return void 0===n&&(n=0),k(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),nr(e,t,n)}}),ar=ln({pad4d_:function(e,t,n){return void 0===n&&(n=0),k(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,function(){return"Invalid number of paddings. Must be length of 2 each."}),nr(e,t,n)}}),ur=ln({rand_:function(e,t,n){var r=T(e),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=t();return je.makeTensor(o,e,n)}}),sr=ln({randomNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new Un(t,n,r,!1,o),a=Gn(e,r),u=0;u<a.values.length;u++)a.values[u]=i.nextValue();return a.toTensor()}}),cr=ln({randomGamma_:function(e,t,n,r,o){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var i=new Vn(t,n,r,o),a=Gn(e,r),u=0;u<a.values.length;u++)a.values[u]=i.nextValue();return a.toTensor()}}),lr=ln({randomUniform_:function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var i=Gn(e,r),a=new Hn(t,n,null,o),u=0;u<i.values.length;u++)i.values[u]=a.nextValue();return i.toTensor()}}),fr=ln({reshape_:function(e,t){var n=Qt(e,"x","reshape",null);t=M(t,n.size),k(n.size===T(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return je.runKernelFunc(function(e){return e.reshape(n,t)},{x:n},function(e){return{x:function(){return e.reshape(n.shape)}}},"Reshape",r)}}),pr=ln({spaceToBatchND_:function(e,t,n){var r=Qt(e,"x","spaceToBatchND");return k(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),k(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),k(r.shape.reduce(function(e,r,o){return o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]==0:e},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),je.runKernelFunc(function(e){return e.spaceToBatchND(r,t,n)},{$x:r},function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}})}}),dr=ln({squeeze_:function(e,t){var n=Qt(e,"x","squeeze");return fr(n,B(n.shape,t).newShape)}}),hr=ln({stack_:function(e,t){void 0===t&&(t=0);var n=Jt(e,"tensors","stack");if(k(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),1===n.length)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,i=n[0].dtype;k(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(e){_(o,e.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(e){k(i===e.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var a=n.map(function(e){return e.expandDims(t)});return On(a,t)}}),vr=ln({tile_:function(e,t){var n=Qt(e,"x","tile",null);k(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],o={reps:t};return je.runKernelFunc(function(e,r){var o=e.tile(n,t);return r([n]),o},{x:n},function(e,n){var r=n[0];return{x:function(){var n=Sn(r);if(1===r.rank)for(var o=0;o<t[0];++o)n=n.add(e.slice([o*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(o=0;o<t[0];++o)for(var i=0;i<t[1];++i)n=n.add(e.slice([o*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(o=0;o<t[0];++o)for(i=0;i<t[1];++i)for(var a=0;a<t[2];++a)n=n.add(e.slice([o*r.shape[0],i*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(o=0;o<t[0];++o)for(i=0;i<t[1];++i)for(a=0;a<t[2];++a)for(var u=0;u<t[3];++u)n=n.add(e.slice([o*r.shape[0],i*r.shape[1],a*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}},"Tile",o,r)}}),mr=ln({truncatedNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new Un(t,n,r,!0,o),a=Gn(e,r),u=0;u<a.values.length;u++)a.values[u]=i.nextValue();return a.toTensor()}}),gr=ln({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=Qt(e,"x","unstack");k(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return je.runKernelFunc(function(e){return e.unstack(n,t)},{x:n},function(e){return{x:function(){return hr(e,t)}}},"Unpack",r)}});function yr(e,t,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var i=t.length,a=0;a<i;++a)o=o.concat([e[a+1]/t[a],t[a]]);o=o.concat(e.slice(i+1))}return o}function br(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var i=[],a=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function xr(e,t,n,r){void 0===r&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function wr(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Cr(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function Er(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,i=0;i<n.length-1;++i)o*=n[i];var a=e.shape,u=n.slice();u.pop();var s=1;for(i=r;i<e.rank;++i)s*=a[i],u.push(a[i]);var c=J(e.shape).map(function(e){return e/s}).concat([1]).slice(0,r);return[u,o,s,c]}Object.freeze({prepareAndValidate:Er});var kr=30;function _r(e){return e<=kr?e:Q(e,Math.floor(Math.sqrt(e)))}function Sr(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(i+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(i+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(i+" update.rank != "+(o+e.length-r));for(var a=0;a<o;++a)if(n.shape[a]!==t.shape[a])throw new Error(i+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").");for(a=0;a<n.rank-o;++a)if(n.shape[a+o]!==e[a+r])throw new Error(i+" updates.shape["+(a+o)+"] ("+n.shape[a+o]+") != shape["+(a+o)+"] ("+e[a+o]+")")}function Or(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Sr(n,t,e)}function Tr(e,t,n){for(var r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length,a=1,u=o;u<i;++u)a*=n[u];var s=o<1?1:o;return{sliceRank:o,numUpdates:T(t.shape)/s,sliceSize:a,strides:J(n.slice(0,o)).concat([1]),outputSize:T(n)}}Object.freeze({validateUpdateShape:Sr,validateInput:Or,calculateShapes:Tr});function Rr(e,t,n){k(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),k(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(r){k(t[r]+n[r]<=e.shape[r],function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"})},o=0;o<e.rank;++o)r(o)}function Ir(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Ar(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function Nr(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||null==i)&&(i=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[o];return i<0&&(i+=u),w(0,i,u-1)}function Dr(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||null==i)&&(i=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[o];return i<0&&(i+=u),a>0?w(0,i,u):w(-1,i,u-1)}function Pr(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function Mr(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:Rr,maskToAxes:Ir,computeOutShape:Ar,startForAxis:Nr,stopForAxis:Dr,isSliceContinous:Pr,computeFlatOffset:Mr});function Fr(e){return je.customGrad(e)}var Br=ln({softmax_:function(e,t){void 0===t&&(t=-1);var n=Qt(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return je.runKernelFunc(function(e,r){var o=e.softmax(n,t);return r([o]),o},{logits:n},function(e,n){var r=n[0],o=e.mul(r);return{logits:function(){return o.sub(o.sum([t],!0).mul(r))}}},"Softmax",{dim:t},[],[!0])}}),jr=ln({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=Qt(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return Fr(function(e,n){var r=e.max(t,!0),o=e.sub(r),i=o.toFloat().sub(o.exp().sum(t,!0).log());return n([i]),{value:i,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}})(n)}}),Lr=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),Wr=function(){function e(){}return e.prototype.time=function(e){return zr("time")},e.prototype.read=function(e){return zr("read")},e.prototype.readSync=function(e){return zr("readSync")},e.prototype.numDataIds=function(){return zr("numDataIds")},e.prototype.disposeData=function(e){return zr("disposeData")},e.prototype.write=function(e,t,n){return zr("write")},e.prototype.move=function(e,t,n,r){return zr("move")},e.prototype.memory=function(){return zr("memory")},e.prototype.floatPrecision=function(){return zr("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return zr("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,zr("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return zr("slice")},e.prototype.stridedSlice=function(e,t,n,r){return zr("stridedSlice")},e.prototype.unstack=function(e,t){return zr("unstack")},e.prototype.reverse=function(e,t){return zr("reverse")},e.prototype.concat=function(e,t){return zr("concat")},e.prototype.neg=function(e){return zr("neg")},e.prototype.add=function(e,t){return zr("add")},e.prototype.addN=function(e){return zr("addN")},e.prototype.subtract=function(e,t){return zr("subtract")},e.prototype.multiply=function(e,t){return zr("multiply")},e.prototype.realDivide=function(e,t){return zr("realDivide")},e.prototype.floorDiv=function(e,t){return zr("floorDiv")},e.prototype.sum=function(e,t){return zr("sum")},e.prototype.prod=function(e,t){return zr("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return zr("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return zr("argMin")},e.prototype.argMax=function(e,t){return zr("argMax")},e.prototype.equal=function(e,t){return zr("equal")},e.prototype.notEqual=function(e,t){return zr("notEqual")},e.prototype.less=function(e,t){return zr("less")},e.prototype.lessEqual=function(e,t){return zr("lessEqual")},e.prototype.greater=function(e,t){return zr("greater")},e.prototype.greaterEqual=function(e,t){return zr("greaterEqual")},e.prototype.logicalNot=function(e){return zr("logicalNot")},e.prototype.logicalAnd=function(e,t){return zr("logicalAnd")},e.prototype.logicalOr=function(e,t){return zr("logicalOr")},e.prototype.where=function(e){return zr("where")},e.prototype.select=function(e,t,n){return zr("select")},e.prototype.topk=function(e,t,n){return zr("topk")},e.prototype.min=function(e,t){return zr("min")},e.prototype.minimum=function(e,t){return zr("minimum")},e.prototype.mod=function(e,t){return zr("mod")},e.prototype.max=function(e,t){return zr("max")},e.prototype.maximum=function(e,t){return zr("maximum")},e.prototype.all=function(e,t){return zr("all")},e.prototype.any=function(e,t){return zr("any")},e.prototype.squaredDifference=function(e,t){return zr("squaredDifference")},e.prototype.ceil=function(e){return zr("ceil")},e.prototype.floor=function(e){return zr("floor")},e.prototype.round=function(e){return zr("round")},e.prototype.sign=function(e){return zr("sign")},e.prototype.isNaN=function(e){return zr("isNaN")},e.prototype.isInf=function(e){return zr("isInf")},e.prototype.isFinite=function(e){return zr("isFinite")},e.prototype.pow=function(e,t){return zr("pow")},e.prototype.exp=function(e){return zr("exp")},e.prototype.expm1=function(e){return zr("expm1")},e.prototype.softmax=function(e,t){return zr("softmax")},e.prototype.log=function(e){return zr("log")},e.prototype.log1p=function(e){return zr("log1p")},e.prototype.sqrt=function(e){return zr("sqrt")},e.prototype.rsqrt=function(e){return zr("rsqrt")},e.prototype.square=function(e){return zr("square")},e.prototype.reciprocal=function(e){return zr("reciprocal")},e.prototype.relu=function(e){return zr("relu")},e.prototype.relu6=function(e){return zr("relu6")},e.prototype.prelu=function(e,t){return zr("prelu")},e.prototype.elu=function(e){return zr("elu")},e.prototype.eluDer=function(e,t){return zr("eluDer")},e.prototype.selu=function(e){return zr("selu")},e.prototype.int=function(e){return zr("int")},e.prototype.clip=function(e,t,n){return zr("clip")},e.prototype.abs=function(e){return zr("abs")},e.prototype.complexAbs=function(e){return zr("complexAbs")},e.prototype.sigmoid=function(e){return zr("sigmoid")},e.prototype.softplus=function(e){return zr("softplus")},e.prototype.sin=function(e){return zr("sin")},e.prototype.cos=function(e){return zr("cos")},e.prototype.tan=function(e){return zr("tan")},e.prototype.asin=function(e){return zr("asin")},e.prototype.acos=function(e){return zr("acos")},e.prototype.atan=function(e){return zr("atan")},e.prototype.atan2=function(e,t){return zr("atan2")},e.prototype.sinh=function(e){return zr("sinh")},e.prototype.cosh=function(e){return zr("cosh")},e.prototype.tanh=function(e){return zr("tanh")},e.prototype.asinh=function(e){return zr("asinh")},e.prototype.acosh=function(e){return zr("acosh")},e.prototype.atanh=function(e){return zr("atanh")},e.prototype.erf=function(e){return zr("erf")},e.prototype.step=function(e,t){return zr("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,zr("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return zr("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return zr("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return zr("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,zr("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return zr("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return zr("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return zr("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return zr("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return zr("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return zr("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return zr("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return zr("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return zr("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return zr("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return zr("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return zr("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return zr("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return zr("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return zr("reshape")},e.prototype.cast=function(e,t){return zr("cast")},e.prototype.tile=function(e,t){return zr("tile")},e.prototype.pad=function(e,t,n){return zr("pad")},e.prototype.transpose=function(e,t){return zr("transpose")},e.prototype.gather=function(e,t,n){return zr("gather")},e.prototype.gatherND=function(e,t){return zr("gatherND")},e.prototype.scatterND=function(e,t,n){return zr("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return zr("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return zr("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return zr("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return zr("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return zr("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return zr("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,o,i){return zr("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){return zr("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,o,i,a){return zr("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return zr("multinomial")},e.prototype.oneHot=function(e,t,n,r){return zr("oneHot")},e.prototype.cumsum=function(e,t,n,r){return zr("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,o){return zr("nonMaxSuppression")},e.prototype.fft=function(e){return zr("fft")},e.prototype.ifft=function(e){return zr("ifft")},e.prototype.complex=function(e,t){return zr("complex")},e.prototype.real=function(e){return zr("real")},e.prototype.imag=function(e){return zr("imag")},e.prototype.cropAndResize=function(e,t,n,r,o,i){return zr("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return zr("depthToSpace")},e.prototype.split=function(e,t,n){return zr("split")},e.prototype.sparseToDense=function(e,t,n,r){return zr("sparseToDense")},e.prototype.diag=function(e){return zr("diag")},e.prototype.fill=function(e,t,n){return zr("fill")},e.prototype.onesLike=function(e){return zr("onesLike")},e.prototype.zerosLike=function(e){return zr("zerosLike")},e.prototype.linspace=function(e,t,n){return zr("linspace")},e.prototype.dispose=function(){return zr("dispose")},e}();function zr(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Ur(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var i=n-1-o,a=e[i]||1;(t[t.length-1-o]||1)>1&&1===a&&r.unshift(i)}return r}function Vr(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],i=t.length-r-1,a=t[i];(null==o||1===o&&a>1)&&n.unshift(i)}return n}function Hr(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var i=e[e.length-o-1];null==i&&(i=1);var a=t[t.length-o-1];if(null==a&&(a=1),1===i)n.unshift(a);else if(1===a)n.unshift(i);else{if(i!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function Gr(e,t,n,r,o,i,a){void 0===a&&(a="channelsLast");var u,s=Yr(t),c=s[0],l=s[1];if("channelsLast"===a)u=[c,l,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);u=[c,l,e[1],e[1]]}return Kr(e,u,n,r,o,i,!1,a)}function qr(e,t,n,r,o,i,a){void 0===a&&(a="NDHWC");var u,s,c=Qr(t),l=c[0],f=c[1],p=c[2];if("NDHWC"===a)s="channelsLast",u=[l,f,p,e[4],e[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat "+a);s="channelsFirst",u=[l,f,p,e[1],e[1]]}return $r(e,u,n,r,o,!1,s,i)}function Kr(e,t,n,r,o,i,a,u){void 0===a&&(a=!1),void 0===u&&(u="channelsLast");var s=[-1,-1,-1,-1],c=s[0],l=s[1],f=s[2],p=s[3];if("channelsLast"===u)c=e[0],l=e[1],f=e[2],p=e[3];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat "+u);c=e[0],p=e[1],l=e[2],f=e[3]}var d,h=t[0],v=t[1],m=t[3],g=Yr(n),y=g[0],b=g[1],x=Yr(r),w=x[0],C=x[1],E=Jr(h,w),_=Jr(v,C),S=function(e,t,n,r,o,i,a,u){var s,c,l;if("number"==typeof e){s={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,o){null==r&&(r=Xr(e,t,n));var i=e[1],a=Zr((e[0]-t+2*r)/n+1,o);k(I(a),function(){return"The output # of rows ("+a+") must be an integer. Change the stride and/or zero pad parameters"});var u=Zr((i-t+2*r)/n+1,o);return k(I(u),function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"}),[a,u]}([t,n],i,r,e,u);c=f[0],l=f[1]}else if("same"===e){c=Math.ceil(t/r),l=Math.ceil(n/o);var p=Math.max(0,(c-1)*r+i-t),d=Math.max(0,(l-1)*o+a-n),h=Math.floor(p/2),v=p-h,m=Math.floor(d/2);s={top:h,bottom:v,left:m,right:d-m,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);s={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),l=Math.ceil((n-a+1)/o)}return{padInfo:s,outHeight:c,outWidth:l}}(o,l,f,y,b,E,_,i),O=S.padInfo,T=S.outHeight,R=S.outWidth,A=a?m*p:m;return"channelsFirst"===u?d=[c,A,T,R]:"channelsLast"===u&&(d=[c,T,R,A]),{batchSize:c,dataFormat:u,inHeight:l,inWidth:f,inChannels:p,outHeight:T,outWidth:R,outChannels:A,padInfo:O,strideHeight:y,strideWidth:b,filterHeight:h,filterWidth:v,effectiveFilterHeight:E,effectiveFilterWidth:_,dilationHeight:w,dilationWidth:C,inShape:e,outShape:d,filterShape:t}}function $r(e,t,n,r,o,i,a,u){void 0===i&&(i=!1),void 0===a&&(a="channelsLast");var s=[-1,-1,-1,-1,-1],c=s[0],l=s[1],f=s[2],p=s[3],d=s[4];if("channelsLast"===a)c=e[0],l=e[1],f=e[2],p=e[3],d=e[4];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);c=e[0],d=e[1],l=e[2],f=e[3],p=e[4]}var h,v=t[0],m=t[1],g=t[2],y=t[4],b=Qr(n),x=b[0],w=b[1],C=b[2],E=Qr(r),_=E[0],S=E[1],O=E[2],T=Jr(v,_),R=Jr(m,S),A=Jr(g,O),N=function(e,t,n,r,o,i,a,u,s,c,l){var f,p,d,h;if("number"==typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,o,i){null==o&&(o=Xr(e,t,r));var a=e[1],u=e[2],s=Zr((e[0]-t+2*o)/r+1,i);k(I(s),function(){return"The output # of depths ("+s+") must be an integer. Change the stride and/or zero pad parameters"});var c=Zr((a-t+2*o)/r+1,i);k(I(c),function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"});var l=Zr((u-t+2*o)/r+1,i);return k(I(l),function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"}),[s,c,l,1]}([t,n,r,1],u,0,o,e,l);p=v[0],d=v[1],h=v[2]}else if("same"===e){var m=((p=Math.ceil(t/o))-1)*o+u-t,g=((d=Math.ceil(n/i))-1)*i+s-n,y=((h=Math.ceil(r/a))-1)*a+c-r,b=Math.floor(m/2),x=m-b,w=Math.floor(g/2),C=g-w,E=Math.floor(y/2);f={top:w,bottom:C,left:E,right:y-E,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((t-u+1)/o),d=Math.ceil((n-s+1)/i),h=Math.ceil((r-c+1)/a)}return{padInfo:f,outDepth:p,outHeight:d,outWidth:h}}(o,l,f,p,x,w,C,T,R,A,u),D=N.padInfo,P=N.outDepth,M=N.outHeight,F=N.outWidth,B=i?y*d:y;return"channelsFirst"===a?h=[c,B,P,M,F]:"channelsLast"===a&&(h=[c,P,M,F,B]),{batchSize:c,dataFormat:a,inDepth:l,inHeight:f,inWidth:p,inChannels:d,outDepth:P,outHeight:M,outWidth:F,outChannels:B,padInfo:D,strideDepth:x,strideHeight:w,strideWidth:C,filterDepth:v,filterHeight:m,filterWidth:g,effectiveFilterDepth:T,effectiveFilterHeight:R,effectiveFilterWidth:A,dilationDepth:_,dilationHeight:S,dilationWidth:O,inShape:e,outShape:h,filterShape:t}}function Xr(e,t,n,r){void 0===r&&(r=1);var o=Jr(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function Yr(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Qr(e){return"number"==typeof e?[e,e,e]:e}function Jr(e,t){return t<=1?e:e+(e-1)*(t-1)}function Zr(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function eo(e){var t=Yr(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function to(e,t){return eo(e)||eo(t)}function no(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function ro(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Cn(e.shape),o=e.toFloat(),i=n.complex(o,r);return r.dispose(),o.dispose(),i}if(!U(e.dtype,t))return je.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var a=n.real(e);return i=a.cast(t),a.dispose(),i}if("int32"===t)return n.int(e);if("bool"===t){var u=mn(0,e.dtype);return i=n.notEqual(e,u),u.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function oo(e,t){return je.makeTensorFromDataId(e.dataId,t,e.dtype)}function io(e,t,n){var r=(t-e)/(n-1),o=ne(n,"float32");o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return gn(o,"float32")}Object.freeze({castTensor:ro,reshapeTensor:oo,linspaceImpl:io,upcastType:Ie,axesAreInnerMostDims:Zt,combineLocations:en,computeOutAndReduceShapes:tn,expandShapeToKeepDim:nn,assertAxesAreInnerMostDims:rn,getAxesPermutation:on,getUndoAxesPermutation:an,getInnerMostAxes:un,getBroadcastDims:Ur,getReductionAxes:Vr,assertAndGetBroadcastShape:Hr,assertParamsConsistent:sn,computeOutShape:cn,computePool2DInfo:Gr,computePool3DInfo:qr,computeConv2DInfo:Kr,computeConv3DInfo:$r,computeDefaultPad:Xr,tupleValuesAreOne:eo,eitherStridesOrDilationsAreOne:to,convertConv2DDataFormat:no,PARALLELIZE_THRESHOLD:kr,computeOptimalWindowSize:_r});function ao(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function uo(e,t){return{real:e[2*t],imag:e[2*t+1]}}function so(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function co(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function lo(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,o=e.length,i=0,a=!1;r<o;){var u=n(t,e[i=r+(o-r>>>1)]);u>0?r=i+1:(o=i,a=!u)}return a?r:-r-1}(e,t,n||fo)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function fo(e,t){return e>t?1:e<t?-1:0}function po(e,t,n,r,o){return vo(e,t,n,r,o,0).selectedIndices}function ho(e,t,n,r,o,i){var a=vo(e,t,n,r,o,i,!0);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function vo(e,t,n,r,o,i,a,u){void 0===a&&(a=!1),void 0===u&&(u=!1);for(var s=Array.from(t).map(function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}}).filter(function(e){return e.score>o}).sort(yo),c=i>0?-.5/i:0,l=[],f=[];l.length<n&&s.length>0;){var p=s.pop(),d=p.score,h=p.boxIndex,v=p.suppressBeginIndex;if(d<o)break;for(var m=!1,g=l.length-1;g>=v;--g){var y=mo(e,h,l[g]);if(y>=r){m=!0;break}if(p.score=p.score*go(r,c,y),p.score<=o)break}p.suppressBeginIndex=l.length,m||(p.score===d?(l.push(h),f.push(p.score)):p.score>o&&lo(s,p,yo))}var b=l.length;return u&&(l.fill(0,b),f.fill(0,b)),{selectedIndices:gn(l,"int32"),selectedScores:gn(f,"float32"),numValidOutputs:mn(b,"int32")}}function mo(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),s=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),d=(u-i)*(s-a),h=(f-c)*(p-l);if(d<=0||h<=0)return 0;var v=Math.max(i,c),m=Math.max(a,l),g=Math.min(u,f),y=Math.min(s,p),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(d+h-b)}function go(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function yo(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function bo(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map(function(t){o[n]=t;var i=e.slice(r,o);return r[n]+=t,i})}function xo(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=Gn(n,e.dtype);for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),a=new Array(e.rank),u=0;u<a.length;u++)a[u]=i[u]%e.shape[u];var s=e.locToIndex(a);o.values[r]=e.values[s]}return o.toTensor()}function wo(e,t,n,r,o){for(var i=t[t.length-1],a=[e.length/i,i],u=a[0],s=a[1],c=j(n,u*r),l=j("int32",u*r),f=0;f<u;f++){for(var p=f*s,d=e.subarray(p,p+s),h=[],v=0;v<d.length;v++)h.push({value:d[v],index:v});h.sort(function(e,t){return t.value-e.value});var m=f*r,g=c.subarray(m,m+r),y=l.subarray(m,m+r);for(v=0;v<r;v++)g[v]=h[v].value,y[v]=h[v].index}var b=t.slice();return b[b.length-1]=r,[hn(c,b,n),hn(l,b,"int32")]}function Co(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=Gn(e,"int32"),i=Gn([n.length,e.length],"int32");for(r=0;r<n.length;r++){var a=o.indexToLoc(n[r]),u=r*e.length;i.values.set(a,u)}return i.toTensor()}var Eo=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t});var n=[];this.variableNames.forEach(function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")});var r=this.variableNames.map(function(e){return"v"+e}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},ko=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(e,t){return"T"+t});var n=[];this.variableNames.forEach(function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")});var r=this.variableNames.map(function(e){return"v"+e}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},_o=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,i=e.inSize,a=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];var u="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+s+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+u+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function So(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(t){return e+"."+t})}function Oo(e,t){return 1===t?[e]:So(e,t)}function To(){var e,t,n,r,o,i,a,u,s,c;return 2===f().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",u="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",s="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",u="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",s="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:u,defineSpecialInf:s,defineRound:c}}function Ro(e,t,n){void 0===n&&(n="index");var r=J(t);return r.map(function(t,o){return"int "+e[o]+" = "+n+" / "+t+"; "+(o===r.length-1?"int "+e[o+1]+" = "+n+" - "+e[o]+" * "+t:"index -= "+e[o]+" * "+t)+";"}).join("")}function Io(e){var t=J(e).map(function(e){return e.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Ao="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function No(e,t,n,r){var o=[];e.forEach(function(e){var t=T(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?o.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(o.push("uniform sampler2D "+e.name+";"),o.push("uniform int offset"+e.name+";"))});var i,a,u=o.join("\n"),s=e.map(function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?function e(t){var n,r,o;switch(t.shapeInfo.logicalShape.length){case 0:return n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=To(),"\n    vec4 "+r+"() {\n      return "+o.texture2D+"("+n+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=To();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+o[0]+", "+o[1]+", index);\n      return "+i.texture2D+"("+t+", uv);\n    }\n  "}(t);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=o[0],a=o[1],u=To();if(null!=o&&R(t,o))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+a+".0, "+i+".0);\n\n        return "+u.texture2D+"("+n+", uv);\n      }\n    ";var s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(t[1]/2);return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+c+", "+s[0]+", "+s[1]+", row, col);\n      return "+u.texture2D+"("+n+", uv);\n    }\n  "}(t);case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var u=n.slice(1),s=Wo(t,u);return"\n        "+e(s)+"\n        vec4 "+o+"(int b, int row, int col) {\n          return "+o+"("+zo(["b","row","col"],[1,2])+");\n        }\n      "}var c=a[0],l=a[1],f=Math.ceil(n[2]/2),p=f*Math.ceil(n[1]/2),d=To();return"\n    vec4 "+o+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+c+", "+l+", "+p+", "+f+", b, row, col);\n      return "+d.texture2D+"("+r+", uv);\n    }\n  "}(t);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=a[0],s=a[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),f="int b, int row, int col",p="b * "+l+" + (row / 2) * "+c+" + (col / 2)",d=2;d<n-1;d++)f="int b"+d+", "+f,l*=t[n-d-1],p="b"+d+" * "+l+" + "+p;var h=To();return"\n    vec4 "+o+"("+f+") {\n      int index = "+p+";\n      int texR = index / "+s+";\n      int texC = index - texR * "+s+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+s+", "+u+");\n      return "+h.texture2D+"("+r+", uv);\n    }\n  "}(t)}}(e):function e(t){var n=t.shapeInfo.logicalShape;switch(n.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,o=r[0],i=r[1];if(1===o&&1===i)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=e.shapeInfo.texShape,u=a[0],s=a[1],c=Bo(t);return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+u+", "+s+", "+c+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(t);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+jo(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,o=r[0],i=r[1];if(1===i&&1===o)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=Bo(t);return 1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+a+") + 0.5) / "+o+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+a+") + 0.5) / "+i+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+o+", "+i+", index + "+a+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(t);case 2:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(null!=i&&R(n,i)){var a=i[0],u=i[1];return"\n    float "+o+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+u+".0, "+a+".0);\n      return sampleTexture("+r+", uv);\n    }\n  "}var s=B(n),c=s.newShape,l=s.keptDims,f=c;if(f.length<n.length){var p=Wo(t,f);return"\n      "+e(p)+"\n      float "+o+"(int row, int col) {\n        return "+o+"("+zo(["row","col"],l)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+n[1]+", 1)));\n        "+jo(t)+"\n      }\n    ";var d=i[0],h=i[1],v=Bo(r);return 1===h?"\n    float "+o+"(int row, int col) {\n      float index = dot(vec3(row, col, "+v+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+d+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ":1===d?"\n    float "+o+"(int row, int col) {\n      float index = dot(vec3(row, col, "+v+"), vec3("+n[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+h+".0, 0.5);\n      return sampleTexture("+r+", uv);\n    }\n  ":"\n  float "+o+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+n[1]+" + col + "+v+";\n    vec2 uv = uvFromFlat("+d+", "+h+", index);\n    return sampleTexture("+r+", uv);\n  }\n"}(t);case 3:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],a=n[2],u=B(n),s=u.newShape,c=u.keptDims,l=s;if(l.length<n.length){var f=Wo(t,l);return"\n        "+e(f)+"\n        float "+o+"(int row, int col, int depth) {\n          return "+o+"("+zo(["row","col","depth"],c)+");\n        }\n      "}if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+i+", "+a+", 1)));\n        "+jo(t)+"\n      }\n    ";var p=t.shapeInfo.texShape,d=p[0],h=p[1],v=t.shapeInfo.flatOffset;if(h===i&&null==v)return"\n        float "+o+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+d+".0);\n          return sampleTexture("+r+", uv);\n        }\n      ";if(h===a&&null==v)return"\n    float "+o+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+n[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+d+".0);\n      return sampleTexture("+r+", uv);\n    }\n  ";var m=Bo(r);return"\n      float "+o+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+i+" + col * "+a+" + depth + "+m+";\n        vec2 uv = uvFromFlat("+d+", "+h+", index);\n        return sampleTexture("+r+", uv);\n      }\n  "}(t);case 4:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],a=n[2]*i,u=n[1]*a,s=B(n),c=s.newShape,l=s.keptDims;if(c.length<n.length){var f=Wo(t,c);return"\n      "+e(f)+"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        return "+o+"("+zo(["row","col","depth","depth2"],l)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+u+", "+a+", "+i+", 1)));\n        "+jo(t)+"\n      }\n    ";var p=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],v=d[1];if(v===u&&null==p)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";if(v===i&&null==p)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+n[1]*n[2]+", "+n[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+h+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";var m=Bo(r);return"\n    float "+o+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+a+" +\n          depth * "+i+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+v+", index + "+m+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 5:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[4],a=n[3]*i,u=n[2]*a,s=n[1]*u,c=B(n),l=c.newShape,f=c.keptDims;if(l.length<n.length){var p=Wo(t,l);return"\n      "+e(p)+"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+o+"("+zo(["row","col","depth","depth2","depth3"],f)+");\n      }\n    "}if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+u+", "+a+", "+i+")) +\n          depth3;\n        "+jo(t)+"\n      }\n    ";var d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,v=h[0],m=h[1];if(m===s&&null==d)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+u+", "+a+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";if(m===i&&null==d)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]+",\n               "+n[2]*n[3]+", "+n[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+v+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";var g=Bo(r);return"\n    float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+u+" + depth * "+a+" +\n          depth2 * "+i+" + depth3 + "+g+";\n      vec2 uv = uvFromFlat("+v+", "+m+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 6:return function(t){var n=t.shapeInfo.logicalShape,r=t.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=B(n),a=i.newShape,u=i.keptDims;if(a.length<n.length){var s=Wo(t,a);return"\n      "+e(s)+"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+o+"("+zo(["row","col","depth","depth2","depth3","depth4"],u)+");\n      }\n    "}var c=n[5],l=n[4]*c,f=n[3]*l,p=n[2]*f,d=n[1]*p;if(t.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+p+", "+f+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+c+", 1)));\n        "+jo(t)+"\n      }\n    ";var h=t.shapeInfo.flatOffset,v=t.shapeInfo.texShape,m=v[0],g=v[1];if(g===d&&null==h)return"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+p+", "+f+", "+l+", "+c+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+g+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";if(g===c&&null==h)return"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+n[1]*n[2]*n[3]*n[4]+",\n               "+n[2]*n[3]*n[4]+",\n               "+n[3]*n[4]+",\n               "+n[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+g+".0, "+m+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ";var y=Bo(r);return"\n    float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+p+" + depth * "+f+" +\n          depth2 * "+l+" + depth3 * "+c+" + depth4 + "+y+";\n      vec2 uv = uvFromFlat("+m+", "+g+", index);\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);default:throw new Error(n.length+"-D input sampling is not yet supported")}}(e);var o=e.shapeInfo.logicalShape,i=t.logicalShape;return o.length<=i.length&&(r+=n?function(e,t){var n,r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),i="get"+o+"AtOutCoords",a=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,s=Ur(e.shapeInfo.logicalShape,t.logicalShape),c=Lo(u),l=u-a,f=["x","y","z","w","u","v"];n=0===a?"":u<2&&s.length>=1?"coords = 0;":s.map(function(e){return"coords."+f[e+l]+" = 0;"}).join("\n");var p;p=u<2&&a>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+f[t+l]}).join(", ");var d="return outputValue;",h=1===T(e.shapeInfo.logicalShape),v=1===T(t.logicalShape);if(1!==a||h||v){if(h&&!v)d=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){var m=a-2,g=a-1;s.indexOf(m)>-1&&s.indexOf(g)>-1?d="return vec4(outputValue.x);":s.indexOf(m)>-1?d="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(g)>-1&&(d="return vec4(outputValue.xx, outputValue.zz);")}}else d="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+p+");\n      "+d+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=t.texShape,a=e.shapeInfo.texShape,u=e.shapeInfo.logicalShape.length,s=t.logicalShape.length;if(!e.shapeInfo.isUniform&&u===s&&null==e.shapeInfo.flatOffset&&R(a,i))return"\n      float "+o+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c=Lo(s),l=Ur(e.shapeInfo.logicalShape,t.logicalShape),f=s-u,p=["x","y","z","w","u","v"];return"\n    float "+o+"() {\n      "+c+" coords = getOutputCoords();\n      "+(0===u?"":s<2&&l.length>=1?"coords = 0;":l.map(function(e){return"coords."+p[e+f]+" = 0;"}).join("\n"))+"\n      return get"+r+"("+(s<2&&u>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords."+p[t+f]}).join(", "))+");\n    }\n  "}(e,t)),r}(e,t,r)}).join("\n"),c=t.texShape,l=To(),f="\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+l.texture2D+"(textureSampler, uv).r;\n    }\n  ",p=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+Do+"\n    "+Po+"\n    "+Mo+"\n  "}(l);return t.isPacked?(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(R(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=(i=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+o[0]+", "+o[1]+"));\n      int index = resTexRC.x * "+o[1]+" + resTexRC.y;\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+i+");\n      int c = imod(index, "+i+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2),i=o,a="",u="b, r, c",s=2;s<e.length-1;s++)a="\n      int b"+s+" = index / "+(i*=e[e.length-s-1])+";\n      index -= b"+s+" * "+i+";\n    "+a,u="b"+s+", "+u;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+a+"\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+u+");\n    }\n  "}(e,t)}var n,r,o,i,a}(t.logicalShape,c),a="\n    void setOutput(vec4 val) {\n      "+l.output+" = val;\n    }\n  "):(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return R(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Ro(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Ro(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Ro(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Ro(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),a="\n    void setOutput(float val) {\n      "+l.output+" = vec4(val, 0, 0, 0);\n    }\n  "),r&&(p+=Fo),[p,f,a,u,i,s,n].join("\n")}var Do="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Po="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Mo="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Fo="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Bo(e){return"offset"+e}function jo(e){var t=e.name,n=T(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function Lo(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Wo(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function zo(e,t){return t.map(function(t){return e[t]}).join(", ")}var Uo=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,k(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=e[e.length-1],i=Math.ceil(o/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var a,u,s=this.outputShape,c=s.length,l=Lo(c),f=Oo("coords",c);if(1===i){var p=Lo(u=c+1);a="\n        "+p+" sourceLocR = "+p+"("+f.join()+", 0);\n        ++"+f[c-1]+";\n        "+p+" sourceLocG = "+p+"("+f.join()+", 0);\n        ++"+f[c-2]+";\n        "+p+" sourceLocA = "+p+"("+f.join()+", 0);\n        --"+f[c-1]+";\n        "+p+" sourceLocB = "+p+"("+f.join()+", 0);\n        --"+f[c-2]+";"}else u=c,a="\n        "+l+" sourceLocR = coords;\n        ++"+f[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+f[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+f[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+f[c-2]+";";var d=["x","y","z","w","u","v"].slice(0,u),h="."+d[u-1],v=d.map(function(e){return"int "+e}),m=Oo("sourceLocR",u-1).concat("inIdx.r"),g=Oo("sourceLocG",u-1).concat("inIdx.g"),y=Oo("sourceLocB",u-1).concat("inIdx.b"),b=Oo("sourceLocA",u-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",C="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",E=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+d.join()+"),\n                                          vec2("+d.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+d.join()+"),\n                               vec2("+d.slice(-2).join()+"));\n      }\n      "+E+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+f[c-1]+" < "+(s[c-1]-1)+";\n        bool hasNextRow = "+f[c-2]+" < "+(s[c-2]-1)+";\n        "+a+"\n        ivec4 srcIdx = ivec4(sourceLocR"+h+", sourceLocG"+h+",\n          sourceLocB"+h+", sourceLocA"+h+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},Vo=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterHeight,s=e.effectiveFilterWidth,c=u-1-e.padInfo.top,l=s-1-e.padInfo.left,f=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+l+");\n      const float avgMultiplier = float("+f+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+u+";\n            wR += "+i+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+s+";\n            wC+= "+a+") {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ho=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,s=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,p=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=f-1-e.padInfo.top,v=p-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+d+", "+h+", "+v+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+u+") {\n          float dyD = float(dyDCorner + wD) / "+o+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+f+";\n              wR += "+s+") {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+p+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Go=function(e,t,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Hr(e,t),Hr(e,n);var a="0.0";null!=r&&(Hr(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var u="1.0";null!=o&&(Hr(e,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+u+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},qo=function(e,t,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Hr(e,t),Hr(e,n);var a="vec4(0.0)";null!=r&&(Hr(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(Hr(e,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+a+";\n        vec4 scale = "+u+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+i+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},Ko=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Hr(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},$o="return a + b;",Xo="return a - b;",Yo="return a * b;",Qo="return (a < 0.) ? b * a : a;",Jo=function(e,t,n){this.variableNames=["A","B"],this.outputShape=Hr(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},Zo="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",ei=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Hr(t,n);var o=this.outputShape.length,i="";if(r)if(0===o||1===T(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          "+Lo(o)+" coords = getOutputCoords();\n        ",1===o)i+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var a=Oo("coords",o);i+="\n            bool nextRowOutOfBounds =\n              ("+a[o-2]+" + 1) >= "+this.outputShape[o-2]+";\n            bool nextColOutOfBounds =\n              ("+a[o-1]+" + 1) >= "+this.outputShape[o-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+i+"\n\n        setOutput(result);\n      }\n    "},ti=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),ni=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),ri=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},oi=function(e){this.outputShape=[],this.outputShape=cn(e,1),this.variableNames=e.map(function(e,t){return"T"+t});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var i=t.length,a=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+a+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},ii=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=cn(e,t);var n=this.outputShape,r=n.length,o=Lo(r),i=Oo("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(e,t){return"T"+t});var u=new Array(e.length-1);u[0]=e[0][t];for(var s=1;s<u.length;s++)u[s]=u[s-1]+e[s][t];var c=a[t],l=a.slice(-2),f=a.join(),p="if ("+c+" < "+u[0]+") {\n        return getChannel(\n            getT0("+f+"), vec2("+l.join()+"));\n        }";for(s=1;s<u.length;s++){var d=u[s-1];p+="\n        if ("+c+" < "+u[s]+"  && "+c+" >= "+u[s-1]+") {\n          return getChannel(\n            getT"+s+"("+ai(a,c,d)+"),\n            vec2("+ai(l,c,d)+"));\n        }"}var h=u.length,v=u[u.length-1];p+="\n        return getChannel(\n          getT"+h+"("+ai(a,c,v)+"),\n          vec2("+ai(l,c,v)+"));",this.userCode="\n      float getValue("+a.map(function(e){return"int "+e})+") {\n        "+p+"\n      }\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+i+"), 0., 0., 0.);\n\n        "+i[r-1]+" = "+i[r-1]+" + 1;\n        if ("+i[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+i+");\n        }\n\n        "+i[r-2]+" = "+i[r-2]+" + 1;\n        if ("+i[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+i+");\n        }\n\n        "+i[r-1]+" = "+i[r-1]+" - 1;\n        if ("+i[r-2]+" < "+n[r-2]+" &&\n            "+i[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+i+");\n        }\n        setOutput(result);\n      }\n    "};function ai(e,t,n){var r=e.indexOf(t);return e.map(function(e,t){return t===r?e+" - "+n:e}).join()}var ui=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+i+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},si=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,u=n-1-e.padInfo.left,s=i?1:2,c=i?2:3,l=i?3:1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+l+"];\n\n        ivec2 dyCorner = ivec2(coords["+s+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+i+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ci=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+o+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+i+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+a+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},li=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=t-1-e.padInfo.front,s=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+u+", "+s+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+o+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},fi=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+i+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},pi=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+u+"; dm++) {\n              int d2 = d1 * "+u+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},di=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,i=e.padInfo.left,a=e.strideHeight,u=e.strideWidth,s=e.dilationHeight,c=e.dilationWidth,l=e.filterHeight,f=e.filterWidth,p=4*Math.floor(e.inChannels/4),d=e.inChannels%4,h="channelsLast"===e.dataFormat,v=h?1:2,m=h?2:3,g=h?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+a+", "+u+");\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+h+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===d)+") {\n\n              if ("+h+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+p+") *\n                    getW(wR, wC, "+p+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+p+", xR, xC) *\n                    getW(wR, wC, "+p+", d2);\n              }\n\n            } else if ("+(2===d)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2)\n              );\n\n              if ("+h+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===d)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2),\n                getW(wR, wC, "+p+" + 2, d2)\n              );\n\n              if ("+h+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1),\n                  getX(batch, xR, xC, "+p+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC),\n                  getX(batch, "+p+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "},hi=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,s=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,f=e.filterHeight,p=e.filterWidth,d=4*Math.floor(e.inChannels/4),h=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+o+", "+i+", "+a+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+u+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+"; wR++) {\n            int xR = xRCorner + wR * "+s+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+p+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===h)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+d+") *\n                  getW(wF, wR, wC, "+d+", d2);\n              } else if ("+(2===h)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===h)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+d+"),\n                  getX(batch, xF, xR, xC, "+d+" + 1),\n                  getX(batch, xF, xR, xC, "+d+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+d+", d2),\n                  getW(wF, wR, wC, "+d+" + 1, d2),\n                  getW(wF, wR, wC, "+d+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vi=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,u=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,p=e.filterHeight,d=e.filterWidth,h=e.outChannels/e.inChannels,v="",m="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",m="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+s+", "+c+");\n      const ivec2 pads = ivec2("+a+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+h+";\n        int q = d2 - d1 * "+h+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+p+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+o+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+f+";\n\n            if (xC < 0 || xC >= "+i+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+m+"\n        setOutput(result);\n      }\n    "},mi=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,u=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,p=e.filterHeight,d=e.filterWidth,h=d,v="int xR; int xC; int xCOffset;",m=0;m<p;m++)for(var g=0;g<d;g++)v+="\n          vec4 xTexelR"+m+"C"+2*g+" = vec4(0.);\n          vec4 wR"+m+"C"+g+" = vec4(0.);\n          vec4 xR"+m+"C"+g+" = vec4(0.);";for(m=0;m<p;m++)for(var y=0;y<h;y++){if(v+="\n          xR = xRCorner + "+m*l+";\n          xC = xCCorner + "+(g=2*y)*f+";\n        ",1===c){if(g<d&&(v+=u%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    xTexelR"+m+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+".xy);\n                } else {\n                  xR"+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+o+" && xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = xTexelR"+m+"C"+g+";\n              ",g+1<d)){var b=u%2==0?C(f):f;f%2==0&&u%2==1||f%2!=0&&u%2!=1?(v+="\n                  xCOffset = xC + "+u%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",f>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+o+" &&\n                      xCOffset >= 0 && xCOffset < "+i+") {\n                      xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+g+" = vec4(0.);\n                    }\n                  "),v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".xy);\n                "):v+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+";\n                "}}else g<d&&(v+="\n              if(xR >= 0 && xR < "+o+") {\n            ",u%2==1?(v+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+i+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n              ",g+1<d&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+i+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+".xy, final.xy);\n                ")):(v+="\n                if(xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+".xy);\n              ",g+1<d&&(v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n                ")),v+="}");g<d&&(v+="\n            vec4 wTexelR"+m+"C"+g+" = getW("+m+", "+g+", d1, q);\n            wR"+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+".xz);\n          ",g+1<d&&(v+="\n              vec4 wTexelR"+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+", d1, q);\n              wR"+m+"C"+(g+1)+" =\n                vec4(wTexelR"+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<p;m++)for(g=0;g<d;g++)v+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var x="",w="";n&&(x=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var E=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+s+", "+c+");\n      const ivec2 pads = ivec2("+a+", "+u+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+v+"\n\n        vec4 result = dotProd;\n        "+E+"\n        "+w+"\n        setOutput(result);\n      }\n    "},gi=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],a=e[1],u=e[2],s=e[3],c=t[0],l=n[0],f=n[1];this.outputShape=[c,l,f,s];var p="bilinear"===r?1:0,d=[a-1+".0",u-1+".0"],h=d[0],v=d[1],m=l>1?[""+(a-1)/(l-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],g=m[0],y=m[1],b=m[2],x=f>1?[""+(u-1)/(f-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],w=x[0],C=x[1],E=x[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+i+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+C+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+h+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n        float in_x = "+E+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+p+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},yi=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Lo(r)+" coords = getOutputCoords();\n        int end = "+bi(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+bi(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===r)return""+t;if(2===r)return t+".x, "+t+".y";if(3===r)return t+".x, "+t+".y, "+t+".z";if(4===r)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+r+" is not yet supported")}(0,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function bi(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var xi=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=ze.DENSE;var t=Xe(e),n=To();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Ro(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},wi=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=ze.DENSE;var t=Xe(e),n=To();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Ro(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Ci=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Ei=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},ki=function(e){this.variableNames=["A"],this.outTexUsage=Ue.DOWNLOAD;var t=To();this.outputShape=e,this.userCode="\n      "+Ao+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},_i=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Ue.DOWNLOAD;var t=To();this.outputShape=e,this.userCode="\n      "+Ao+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Si=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=To(),o=t[0],i=t[1];this.outputShape=e;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      "+Io(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+i+";\n        int c = imod(flatIndex, "+i+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+o+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+a+", 0., 0., 0.);\n      }\n    "},Oi=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=To(),o=t[0],i=t[1];this.outputShape=e;var a="",u="result";n&&(u="floor(result * 255. + 0.5)");for(var s=0;s<=1;s++)for(var c=0;c<=1;c++){var l=2*s+c;a+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+s+" < "+e[1]+") {\n              localCoords[1] += "+s+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+i+";\n              c = imod(flatIndex, "+i+");\n              uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+o+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+Io(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+a+"\n\n        "+r.output+" = "+u+";\n      }\n    "},Ti=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+o+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+i+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Ri=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),Ii=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=Lo(this.rank),i=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=0;i<e.length;i++)i===t?o.push("int(getIndices("+r[i]+"))"):o.push(""+r[i]);return o.join()}(e,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},Ai=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=Lo(t.length),o=Lo(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+o+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+i+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function Ni(e,t){var n=To();return ot(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Di(e,t){return pt(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Pi(e,t){return dt(e,t,new Uint16Array([0,1,2,2,1,3]))}function Mi(e,t,n,r,o,i,a){vt(n,r);var u=ht(e,t),s=e.TEXTURE_2D;return Je(e,t,function(){return e.bindTexture(s,u)}),Je(e,t,function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Je(e,t,function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Je(e,t,function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Je(e,t,function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Je(e,t,function(){return e.texImage2D(s,0,o,n,r,0,i,a,null)}),Je(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),u}function Fi(e,t,n,r,o){var i=$e(n,r);return Mi(e,t,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function Bi(e,t,n,r,o){var i=$e(n,r);return Mi(e,t,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function ji(e,t,n,r,o){var i=$e(n,r);return Mi(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function Li(e,t,n,r,o){var i=Ye(n,r);return Mi(e,t,i[0],i[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function Wi(e,t,n,r,o){var i=Ye(n,r);return Mi(e,t,i[0],i[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function zi(e,t,n,r){return Je(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),gt(e,t,n,"clipSpacePos",r,3,20,0)&&gt(e,t,n,"uv",r,2,20,12)}function Ui(e,t,n,r,o,i,a){var u,s,c;Je(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),i instanceof Uint8Array?(u=new Uint8Array(r*o*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(u=new Float32Array(r*o*4),s=e.FLOAT,c=a.internalFormatPackedFloat),u.set(i),Je(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,o,0,e.RGBA,s,u)}),Je(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Vi(e,t,n,r){Je(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?Je(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):Je(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),Je(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function Hi(e,t,n,r,o){var i=e.createBuffer();Je(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var a=16*n*r;return Je(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)}),Je(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),Je(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function Gi(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function qi(e,t,n,r,o){var i=$e(n,r),a=i[0],u=i[1],s=new Uint8Array(n*r*4);return Je(e,t,function(){return e.readPixels(0,0,a,u,o.downloadTextureFormat,e.UNSIGNED_BYTE,s)}),new Float32Array(s.buffer)}function Ki(e,t,n,r,o,i,a,u){var s=e,c=new Float32Array(function(e,t){var n=Ye(i,a);return n[0]*n[1]*4}());return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,c),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),c}function $i(e,t,n,r){var o=new Float32Array(n*r*4);return Je(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)}),o}var Xi=Object.freeze({createVertexShader:Ni,createVertexBuffer:Di,createIndexBuffer:Pi,createFloat32MatrixTexture:Fi,createFloat16MatrixTexture:Bi,createUnsignedBytesMatrixTexture:ji,createPackedMatrixTexture:Li,createFloat16PackedMatrixTexture:Wi,bindVertexProgramAttributeStreams:zi,uploadDenseMatrixToTexture:Ui,uploadPixelDataToTexture:Vi,createBufferFromOutputTexture:Hi,downloadFloat32MatrixFromBuffer:Gi,downloadByteEncodedFloatMatrixFromOutputTexture:qi,downloadPackedMatrixFromBuffer:Ki,downloadMatrixFromPackedOutputTexture:$i}),Yi=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=f().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,qe(t,e)):this.gl=Ke(t);var n="WEBGL_color_buffer_float";if(1===f().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=rt(this.gl,this.debug,"OES_texture_float"),Bt(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=rt(this.gl,this.debug,"OES_texture_half_float");else if(f().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Bt(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=rt(this.gl,this.debug,"EXT_color_buffer_half_float");else if(f().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Bt(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Bt(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=Di(this.gl,this.debug),this.indexBuffer=Pi(this.gl,this.debug),this.framebuffer=mt(this.gl,this.debug),this.textureConfig=Qe(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return f().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Je(t,this.debug,function(){return t.finish()}),Je(t,this.debug,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),Je(t,this.debug,function(){return t.deleteFramebuffer(e.framebuffer)}),Je(t,this.debug,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),Je(t,this.debug,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),Je(t,this.debug,function(){return t.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Fi(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Bi(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),ji(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),Vi(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),Ui(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Wi(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Li(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Et(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Je(this.gl,this.debug,function(){return t.gl.deleteTexture(e)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return qi(r.gl,r.debug,t,n,r.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,o,i){return Ki(this.gl,e,0,0,0,o,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return Gi(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=Hi(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(f().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=o.clientWaitSync(i,0,0);return e===o.ALREADY_SIGNALED||e===o.CONDITION_SATISFIED},t=i}else f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return $i(r.gl,r.debug,t,n)})},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=it(t,this.debug,e),r=Ni(t,this.debug),o=ct(t,this.debug);return Je(t,this.debug,function(){return t.attachShader(o,r)}),Je(t,this.debug,function(){return t.attachShader(o,n)}),lt(t,this.debug,o),this.debug&&ft(t,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=zi(t,this.debug,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Je(this.gl,this.debug,function(){return t.gl.deleteProgram(e)})},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&ft(this.gl,this.debug,this.program),Je(this.gl,this.debug,function(){return t.gl.useProgram(e)})},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?bt(this.gl,this.debug,e,t):xt(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),Je(this.gl,this.debug,function(){return n.gl.getAttribLocation(e,t)})},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),wt(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=Ye(t,n),o=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,o,i)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&ft(this.gl,this.debug,this.program),kt(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Je(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Je(this.gl,this.debug,function(){return e.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=rt(this.gl,this.debug,2===f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(2!==f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return s(this,void 0,void 0,function(){var t=this;return c(this,function(n){switch(n.label){case 0:return[4,P(function(){return t.disposed||t.isQueryAvailable(e,f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(e,f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise(function(n){t.addItemToPoll(function(){return e.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(function(e){return e.isDoneFn})),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||P(function(){return n.pollItems(),0===n.itemsToPoll.length})},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Ct(this.gl,this.debug,e,this.framebuffer),this.debug&&kt(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Ct(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&kt(this.gl)):Et(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Ct(r,this.debug,e,this.framebuffer),this.debug&&kt(r),this.outputTexture=e,Je(r,this.debug,function(){return r.viewport(0,0,t,n)}),Je(r,this.debug,function(){return r.scissor(0,0,t,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var o=this;this.throwIfDisposed(),Je(this.gl,this.debug,function(){return o.gl.scissor(e,t,n,r)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function Qi(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(e,n){var r=e.logicalShape,o=t[n],i=o.shape;if(!R(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!e.isUniform||!o.isUniform){var a=e.texShape,u=o.isUniform?null:o.texData.texShape;if(!R(a,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+u+" must match")}})}var Ji=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,o=n.inChannels,i=n.strideWidth,a=n.strideHeight,u=n.padInfo,s=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,f=n.dataFormat,p=u.left,d=u.top,h=o*r,v=To(),m="channelsLast"===f,g=m?0:1,y=m?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+s+")) * "+a+" - "+d+";\n            d0 = offsetY + "+l+" * (pos / "+h+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+s+".) * "+i+". - "+p+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+h+".) / "+o+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+o+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+v.output+" = result;\n      }\n    "},Zi=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var i,a=t,u=e[3]-1;this.outputShape=e;var s="float("+n+") + float("+r+") * sum";i=.5===o?"inversesqrt("+s+")":1===o?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+a+"; j <= "+a+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+u+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+i+";\n        setOutput(val);\n      }\n    "},ea=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},ta=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,a=t,u=e[3]-1;this.outputShape=e;var s="float("+n+") + float("+r+") * sum";i=.5===o?"inversesqrt("+s+")":1===o?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+a+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+a+"; j <= "+a+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+u+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+i+";\n        setOutput(result);\n      }\n    "},na=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,u=i-1-e.padInfo.left,s=o*i-1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+i+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+i+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ra=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterDepth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=u-1-e.padInfo.front,f=s-1-e.padInfo.top,p=c-1-e.padInfo.left,d=u*s*c-1;this.userCode="\n      const ivec3 pads = ivec3("+l+", "+f+", "+p+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+u+";\n           wD += "+o+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+s+";\n              wR += "+i+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+a+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+d+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+s+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},oa=function(e,t,n,r,o,i,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=null),void 0===a&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var u=n?e[1]:e[2],s=Math.ceil(u/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],d="",h="";i&&(d=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+i+"\n        }":"vec4 activation(vec4 x) {\n          "+i+"\n        }",h="result = activation(result);");var v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+d+"\n\n      const float sharedDimension = "+s+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+s+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+f[0]+" * "+p[0]+");\n          result += ("+f[1]+" * "+p[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+v+"\n\n        "+h+"\n\n        setOutput(result);\n      }\n    "},ia=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),aa=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},ua=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Oo("rc",t),r=Lo(t),o=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",o=e-2;o<e;o++)r+=n[o]+" >= "+t[o],o<e-1&&(r+="||");return r}(t,e,n),i=function(e,t,n,r){if(1===e)return"";var o=r.slice(-2);return"\n    int r = "+o[0]+";\n    int c = "+o[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),a=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var i=(0===r?"r":"rp1")+", "+(0===o?"c":"cp1"),a=2;a<e;a++)i=t[t.length-1-a]+","+i;n.push(i)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+o+") {\n            setOutput(vec4(0));\n          } else {\n            "+i+"\n\n            setOutput(vec4("+a+"));\n          }\n        }\n      "}},sa=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});var r=e.length,o=Lo(r),i=t.map(function(e){return e[0]}).join(","),a=t.map(function(t,n){return t[0]+e[n]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+i+");\n      "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+u+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},ca=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});for(var r=e.length,o=Lo(r),i=t.map(function(e){return e[0]}).join(","),a=t.map(function(t,n){return t[0]+e[n]}).join(","),u=Oo("rc",r),s=Oo("source",r),c=u[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+s.slice(-2).join()+")",f=[o+" rc = outputLoc;",u[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+u[r-2]+" += 1;\n       if("+u[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+u[r-1]+" += 1;\n         if("+c+") {"],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",d="",h=0,v=1===r?2:4;h<v;h++)d+="\n        "+f[h]+"\n        if ("+p+") {\n          result["+h+"] = float("+n+");\n        } else {\n          "+o+" source = rc - start;\n          result["+h+"] = getChannel(getX("+s.join()+"), "+l+");\n        }\n      ";d+=1===r?"} ":"}}",this.userCode="\n      const "+o+" start = "+o+"("+i+");\n      const "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+d+"\n        setOutput(result);\n      }\n    "},la=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,u=e.dilationWidth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;var p="avg"===t,d="0.0";if(p||(d="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+o+", "+i+");\n        const ivec2 pads = ivec2("+l+", "+f+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+s+";\n              wR += "+a+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+u+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var h=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(h="avgValue / count");var v=4*Math.floor(r/4),m=r%4,g="\n      if ("+p+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+i+");\n      const ivec2 pads = ivec2("+l+", "+f+");\n      const float initializationValue = "+d+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+d+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+s+";\n            wR += "+a+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+u+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+u+", d),\n              getValue(batch, xR, xC + 2 * "+u+", d),\n              getValue(batch, xR, xC + 3 * "+u+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+u+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+u+", d),\n              getValue(batch, xR, xC + 2 * "+u+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+h+");\n      }\n    "}},fa=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,s=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,p=e.effectiveFilterWidth,d=e.padInfo.front,h=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;var m="avg"===t,g="0.0";if(m||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+o+", "+i+", "+a+");\n        const ivec3 pads = ivec3("+d+", "+h+", "+v+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+l+";\n              wD += "+u+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+f+";\n                wR += "+s+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+p+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+f+" * "+p+" +\n                      wR * "+p+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(r/4),x=r%4,w="\n      if ("+m+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+o+", "+i+", "+a+");\n      const ivec3 pads = ivec3("+d+", "+h+", "+v+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+u+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+";\n            wR += "+s+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},pa=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",u="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",u="min"):"max"===t&&(a="-1.0 / 1e-20",u="max");var s=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?s="sumValue":"prod"===t?s="prodValue":"all"===t?s="allValue":"any"===t&&(s="anyValue");var c=4*Math.floor(n/4),l=n%4,f="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+u+"(values, minMaxValue);\n      }\n    ",p="vec4";"all"===t?(a="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(a="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===l)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===l)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+s+");\n      }\n    "},da=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+="\n        "+o+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Ro(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+Io(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},ha=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,u=a[1],s=a[2],c=[n&&u>1?o-1:o,n&&s>1?i-1:i],l=[n&&u>1?u-1:u,n&&s>1?s-1:s],f=c[0]/l[0],p=c[1]/l[1],d=1/f,h=1/p,v=2*Math.ceil(d)+2,m=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+u+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+s+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},va=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],u=e[3];this.outputShape=[o,t,n,u];var s=[r&&t>1?i-1:i,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+s[0]/c[0]+",\n          "+s[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},ma=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],i=e[1],a=e[2],u=e[3];this.outputShape=[o,t,n,u];var s=[r&&t>1?i-1:i,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+s[0]/c[0]+",\n          "+s[1]/c[1]+",\n          "+s[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+i+".0, "+a+".0,\n                                     "+a+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(u-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},ga=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,u=a[1],s=a[2],c=[n&&u>1?o-1:o,n&&s>1?i-1:i],l=[n&&u>1?u-1:u,n&&s>1?s-1:s],f=c[0]/l[0],p=c[1]/l[1],d=1/f,h=1/p,v=2*Math.ceil(d)+2,m=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+u+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+s+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},ya=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],u=e[3];this.outputShape=[o,t,n,u];var s=[r&&t>1?i-1:i,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+s[0]/c[0]+",\n          "+s[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+l+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},ba=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map(function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),o=Lo(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},xa=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Oo("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],a=Lo(n);function u(n){var r=e.map(function(r,o){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(o,n)});return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+o+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+a+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+u(r.slice())+";\n          if("+o+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",u(e)}(r.slice())+";\n          }\n          if("+i+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",u(e)}(r.slice())+";\n            if("+o+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",u(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},wa=function(e,t,n,r,o,i,a){void 0===a&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var u=Lo(o.length),s=Lo(i.length),c="";1===n?c="i":2===n&&(c="i, j");var l="getIndices("+c+")",f="";1===r?f="i":2===r&&(f="i, coords[1]");var p="getUpdates("+f+")",d=t>1?"strides[j]":"strides";this.userCode="\n        "+u+" strides = "+u+"("+o+");\n\n        void main() {\n          "+s+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+l+");\n              flattenedIndex += index * "+d+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+p+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Ca=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var u=4*Math.floor(n/4),s=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l="";o%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var f="";o%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+u+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+u+";\n        if ("+(1===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},Ea=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],u=[],s=0;s<t.length;s++)u.push(""+i[s]),s<e&&a.push(""+i[s]);r=a.join(),o=u.join()}var c=Lo(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "},ka=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=Lo(this.rank),r="uniform int start["+this.rank+"];",o=function(e){if(1===e)return"sourceLoc";if(e<=6)return _a.slice(0,e).map(function(e){return"sourceLoc."+e}).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map(function(e,t){return"sourceLoc."+_a[t]+" = start["+t+"] + coords."+_a[t]+";"}).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+o+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),_a=["x","y","z","w","u","v"],Sa=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Lo(this.rank),n=Oo("coords",this.rank),r=Oo("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",i="getChannel(getSource("+r.join()+"), "+o+")",a="\n      result.x = "+i+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+i+";\n        --"+r[this.rank-1]+";\n      }\n    ",u=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+i+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+i+";\n        }\n      }\n    ",s=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map(function(e,t){return"start["+t+"]"}).join()+");":e.map(function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+s+"\n        vec4 result = vec4(0.);\n        "+a+"\n        "+u+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Oa=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=Lo(n.length),i=Lo(n.length),a="";if(1===r)a="coords * strides + begin";else{var u=0;a=n.map(function(e,t){return u++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(u-1)+"] * strides["+t+"] + begin["+t+"]"}).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+e+");\n      "+o+" strides = "+o+"("+t+");\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+a+"));\n      }\n    "},Ta=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,o=Ra(t,n),i=Ia(e,o,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[i].shift();return this.usedTextures[i].push(a),a}return this.numUsedTextures++,this.log(),o===Ve.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===Ve.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===Ve.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===Ve.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===Ve.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var o=Ia(t,Ra(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[o],a=i.indexOf(e);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(a,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Ra(e,t){if(e===Ue.UPLOAD)return Ve.PACKED_2X2_FLOAT32;if(e===Ue.RENDER||null==e)return function(e){return f().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?Ve.PACKED_2X2_FLOAT32:Ve.UNPACKED_FLOAT32:e?Ve.PACKED_2X2_FLOAT16:Ve.UNPACKED_FLOAT16}(t);if(e===Ue.DOWNLOAD||e===Ue.PIXELS)return Ve.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Ia(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var Aa=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=Lo(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<e.length;o++)r.push("imod("+n[o]+", "+e[o]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},Na=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=Lo(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "},Da=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Lo(this.rank),i=So("rc",this.rank),a=new Array(this.rank);for(r=0;r<t.length;r++)a[t[r]]=i[r];var u="vec2("+a.slice(-2).join()+")",s="++"+i[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+a.join()+"), "+u+")";this.userCode="\n    void main() {\n      "+o+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+s+") {\n        result[1] = "+c+";\n      }\n      --"+i[this.rank-1]+";\n      if(++"+i[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+s+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},Pa=1.7580993408473768,Ma=1.0507009873554805,Fa=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Ba="if (isnan(x)) return x;",ja="return x;",La="return abs(x);",Wa=Ba+"\n  return (x < 0.0) ? 0.0 : x;\n",za=Ba+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",Ua="return (x >= 0.0) ? x : (exp(x) - 1.0);",Va="return -x;",Ha="return ceil(x);",Ga="return floor(x);",qa="return exp(x);",Ka="return exp(x) - 1.0;",$a="return x;",Xa="return x;",Ya="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Qa="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",Ja="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Za=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},eu=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Oo("rc",t),r=Lo(t),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),a=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+o+");\n\n        setOutput(getChannel(packedInput, "+a+"));\n      }\n    "},tu={};function nu(e,t){if(void 0===t&&(t=!1),"linear"===e)return t?Xa:ja;if("relu"===e)return t?Ya:Wa;if("elu"===e)return t?Ja:Ua;if("relu6"===e)return t?Qa:za;if("prelu"===e)return t?Zo:Qo;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var ru=600,ou=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!f().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var o=Ke(f().getNumber("WEBGL_VERSION"));r.binaryCache=(n=f().getNumber("WEBGL_VERSION"))in tu?tu[n]:(tu[n]={},tu[n]),r.gpgpu=new Yi(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new Ta(r.gpgpu),r.numMBBeforeWarning=null==f().global.screen?1024:f().global.screen.height*f().global.screen.width*window.devicePixelRatio*ru/1024/1024,r.texData=new Lr(r,je),r}return u(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(f().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:Ue.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(f().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:Ue.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,o=t.complexTensors,i=t.slice,a=t.shape,u=t.isPacked;if(null!=i){var s;s=u?new Za(a,$a):new Fa(a,$a);var c=this.runWebGLProgram(s,[{dataId:e,shape:a,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeData(c.dataId),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,p,d=null!=this.activeTimers;return d&&(f=re()),p="complex64"===r?ao(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(e),d&&(this.downloadWaitMs+=re()-f),this.convertAndCacheOnCPU(e,p)},t.prototype.read=function(e){return s(this,void 0,void 0,function(){var t,n,r,o,i,a,u,s,l,p,d,h,v,m,g,y,b,x,w,C,E,k;return c(this,function(c){switch(c.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise(function(e){return t.push(e)})];if(n=this.texData.get(e),r=n.values,o=n.shape,i=n.slice,a=n.dtype,u=n.complexTensors,s=n.isPacked,null!=i)return void 0,l=s?new Za(o,$a):new Fa(o,$a),p=this.runWebGLProgram(l,[{dataId:e,shape:o,dtype:a}],a),d=this.read(p.dataId),this.disposeData(p.dataId),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!f().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===f().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,"complex64"!==a&&f().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(e),m=this.texData.get(v.dataId),h=(k=this.gpgpu).createBufferFromTexture.apply(k,[m.texture].concat(Xe(o)))),this.pendingRead.set(e,[]),"complex64"===a?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:c.sent(),c.label=2;case 2:return"complex64"!==a?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return y=c.sent(),b=y[0],x=y[1],g=ao(b,x),[3,5];case 4:null==h?g=this.getValuesFromTexture(e):(w=T(o),g=this.gpgpu.downloadFloat32MatrixFromBuffer(h,w)),c.label=5;case 5:return null!=v&&this.disposeData(v.dataId),C=this.convertAndCacheOnCPU(e,g),E=this.pendingRead.get(e),this.pendingRead.delete(e),E.forEach(function(e){return e(C)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,C]}})})},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!tt(n)){if(f().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,i=n.isPacked,a=T(r);if(f().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(e),s=this.texData.get(u.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[s.texture].concat(Xe(r))).subarray(0,a);return this.disposeData(u.dataId),c}var l=f().getBool("WEBGL_PACK")&&!0===i,p=l?It(r):r,d=l?new _i(p):new ki(p),h=this.runWebGLProgram(d,[{shape:p,dtype:o,dataId:e}],"float32"),v=this.texData.get(h.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,a);return this.disposeData(h.dataId),m},t.prototype.time=function(e){return s(this,void 0,void 0,function(){var t,n,r,o,i,a,u;return c(this,function(s){switch(s.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),o=O(this.activeTimers.map(function(e){return e.query})).filter(function(e){return null!=e}),i=O(this.activeTimers.map(function(e){return e.name})).filter(function(e){return null!=e}),this.activeTimers=t,r&&(this.programTimersStack=null),a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return u=s.sent(),a.kernelMs=E(u),a.getExtraProfileInfo=function(){return u.map(function(e,t){return{name:i[t],ms:e}}).map(function(e){return e.name+": "+e.ms}).join(", ")},[3,3];case 2:a.kernelMs={error:"WebGL query timers are not supported in this environment."},s.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,a]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:re(),endMs:null}},t.prototype.endTimer=function(e){return f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=re(),e)},t.prototype.getQueryTime=function(e){return s(this,void 0,void 0,function(){var t;return c(this,function(n){return f().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]})})},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,o=t.texShape,i=t.usage,a=t.isPacked,u=t.slice,s=u&&u.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=n&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,i,a)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return f().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=je.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every(function(e){return null==n.texData.get(e.dataId).texture&&e.size<t})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:je.keep(e.clone()),imag:je.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===T(n))return hn([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,o=Pr(e.shape,t,n);if(r||!o){var i=f().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Sa(n):new ka(n),a=i.getCustomSetupFunc(t);return this.compileAndRun(i,[e],null,a)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),o=this.makeOutput(n,e.dtype),i=this.texData.get(o.dataId);Object.assign(i,r),i.shape=n,i.dtype=e.dtype;var a=Mr(t,e.strides);r.slice&&(a+=r.slice.flatOffset),i.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||e.dataId};var u=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,u+1),o},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var o=Ar(t,n,r);if(o.some(function(e){return 0===e}))return hn([],o);var i=new Oa(t,r,o);return this.compileAndRun(i,[e])},t.prototype.reverse=function(e,t){var n=f().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xa(e.shape,t):new ba(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map(function(e){return pn(e)}),r=e.map(function(e){return dn(e)});return fn(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>f().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(e.length/2),i=this.concat(e.slice(0,o),t),a=this.concat(e.slice(o),t);return this.concat([i,a],t)}if(f().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var u=new ii(e.map(function(e){return e.shape}),t);return this.compileAndRun(u,e)}var s=cn(e.map(function(e){return e.shape}),t),c=e.map(function(e){return e.as2D(-1,T(e.shape.slice(t)))}),l=new oi(c.map(function(e){return e.shape}));return this.compileAndRun(l,c).reshape(s)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(f().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Va,e.dtype);var t=new Fa(e.shape,Va);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var o=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],a=n?e.shape[1]:e.shape[2],u=e.shape[0];if((1===o||1===i)&&a>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var s=1===i?e:e.as3D(u,a,1),c=1===i?2:1,l=1===i?t.as3D(u,1,a):t;return this.multiply(s,l).sum(c,!0)}var f=Ie(e.dtype,t.dtype),p=new oa(e.shape,[u,o,i],n,r);return this.compileAndRun(p,[e,t],f)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,i=e.bias,a=e.activation,u=e.preluActivationWeights,s=r?t.shape[2]:t.shape[1],c=o?n.shape[1]:n.shape[2],l=t.shape[0],f=Ie(t.dtype,n.dtype),p=null!=i,d=null!=u,h=a?nu(a,!0):null,v=new oa(t.shape,[l,s,c],r,o,p,h,d),m=[t,n];return i&&m.push(i),u&&m.push(u),this.compileAndRun(v,m,f)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),o=new Ko("return areal * breal - aimag * bimag;",e.shape,t.shape),i=new Ko("return areal * bimag + aimag * breal;",e.shape,t.shape),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],u=this.compileAndRun(o,a),s=this.compileAndRun(i,a),c=this.complex(u,s);return u.dispose(),s.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Yo,e.dtype);var l=new Jo(Yo,e.shape,t.shape);return this.compileAndRun(l,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,i){var a=[e,t,n],u=null;null!=i&&(u=i.shape,a.push(i));var s=null;if(null!=o&&(s=o.shape,a.push(o)),f().getBool("WEBGL_PACK_NORMALIZATION")){var c=new qo(e.shape,t.shape,n.shape,u,s,r);return this.compileAndRun(c,a)}var l=new Go(e.shape,t.shape,n.shape,u,s,r);return this.compileAndRun(l,a)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){var i=f().getBool("WEBGL_PACK_NORMALIZATION")?new ta(e.shape,t,n,r,o):new Zi(e.shape,t,n,r,o);return this.compileAndRun(i,[e])},t.prototype.LRNGrad=function(e,t,n,r,o,i,a){var u=new ea(t.shape,r,o,i,a);return this.compileAndRun(u,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map(function(e){return ae(e)});return xo(Gn(e.shape,e.dtype,n),t)}var r=new Aa(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=f().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ca(e.shape,t,n):new sa(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=f().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Da(e.shape,t):new Na(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new Ii(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){k(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var r=t.reduce(function(e,t){return e*t}),o=yr(e.shape,t,r),i=br(o.length,t.length),a=xr(e.shape,t,r),u=wr(n,t.length),s=Cr(a,n,t.length);return e.reshape(o).transpose(i).reshape(a).slice(u,s)},t.prototype.spaceToBatchND=function(e,t,n){k(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var r=t.reduce(function(e,t){return e*t}),o=[[0,0]];o.push.apply(o,n);for(var i=1+t.length;i<e.shape.length;++i)o.push([0,0]);var a=e.pad(o),u=yr(a.shape,t,r,!1),s=br(u.length,t.length,!1),c=xr(a.shape,t,r,!1);return a.reshape(u).transpose(s).reshape(c)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],o=e.shape[1],i=_r(o),a=new pa({windowSize:i,inSize:o,batchSize:r},t),u=this.compileAndRun(a,[e],n);return 1===u.shape[1]?u:this.reduce(u,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],o=e.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var i=_r(o),a=new _o({windowSize:i,inSize:o,batchSize:r},t,null==n),u=[e];null!=n&&u.push(n);var s=this.compileAndRun(a,u,"int32");return 1===s.shape[1]?s:this.argReduce(e,t,s)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,o=_r(r[r.length-1]),i=new Uo(r,o,t,null==n),a=null==n?[e]:[e,n],u=this.compileAndRun(i,a,"int32");return u.rank===e.rank?this.argReducePacked(e,t,u):u},t.prototype.sum=function(e,t){rn("sum",t,e.rank);var n=tn(e.shape,t),r=n[0],o=T(n[1]),i=e.as2D(-1,o),a=Ae(e.dtype);return this.reduce(i,"sum",a).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=tn(e.shape,t),r=n[0],o=T(n[1]),i=e.as2D(-1,o),a=Ae(e.dtype);return this.reduce(i,"prod",a).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,o=on([r],e.rank),i=e;null!=o&&(i=e.transpose(o),r=un(1,e.rank)[0]);var a=function(e,t,n){for(var r=[],o=e.length,i=0;i<o;i++)i!==t?r.push(e[i]):r.push(n);return r}(i.shape,r,n),u=T([i.shape[r]]),s=i.as2D(-1,u),c=Ae(e.dtype),l=this.segOpCompute(s,"unsortedSegmentSum",t,c,n).reshape(a);return null!=o&&(l=l.transpose(an(o))),l},t.prototype.segOpCompute=function(e,t,n,r,o){var i=e.shape[0],a=e.shape[1],u=function(e,t){var n,r=!1;for(e<=kr?(n=e,r=!0):n=Q(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Q(e,n+1);return n}(a,o),s=new Ca({windowSize:u,inSize:a,batchSize:i,numSegments:o},t),c=this.compileAndRun(s,[e,n],r);return c.shape[1]===o?c:(n=kn(0,o).tile([a/u]),this.segOpCompute(c,t,n,r,o))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(rn("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!f().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var o=tn(e.shape,r),i=o[0],a=T(o[1]),u=e.as2D(-1,a);return this.argReduce(u,n).reshape(i)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var o=new yi(e.shape,n,r);return this.compileAndRun(o,[e])},t.prototype.equal=function(e,t){if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new Jo("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new Jo("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new Jo("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new Jo("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new Jo("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new Jo("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new Fa(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new Jo("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new Jo("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Ea(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Ie(t.dtype,n.dtype))},t.prototype.where=function(e){$t("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Co(e.shape,t)},t.prototype.topk=function(e,t,n){return wo(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){rn("min",t,e.rank);var n=tn(e.shape,t),r=n[0],o=T(n[1]),i=e.as2D(-1,o);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=f().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ei("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Jo("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=f().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ei("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Jo("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);rn("max",t,e.rank);var n=tn(e.shape,t),r=n[0],o=T(n[1]),i=e.as2D(-1,o);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=f().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ei("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Jo("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){rn("all",t,e.rank);var n=tn(e.shape,t),r=n[0],o=T(n[1]),i=e.as2D(-1,o);return this.reduce(i,"all",i.dtype).reshape(r)},t.prototype.any=function(e,t){rn("any",t,e.rank);var n=tn(e.shape,t),r=n[0],o=T(n[1]),i=e.as2D(-1,o);return this.reduce(i,"any",i.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new Jo("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new Jo("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,$o);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Ie(e.dtype,t.dtype);if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,$o,n);var r=new Jo($o,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new Za(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,o){void 0===o&&(o=!1);var i=new ei(n,e.shape,t.shape,o);return this.compileAndRun(i,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,o=this.texData.get(e.dataId),i=this.texData.get(t.dataId),a=[[o.complexTensors.real,i.complexTensors.real],[o.complexTensors.imag,i.complexTensors.imag]].map(function(o){var i=o[0],a=o[1],u=r.makeComplexComponentTensorInfo(e,i),s=r.makeComplexComponentTensorInfo(t,a),c=new Jo(n,e.shape,t.shape);return r.compileAndRun(c,[u,s],Ie(i.dtype,a.dtype))}),u=a[0],s=a[1],c=this.complex(u,s);return u.dispose(),s.dispose(),c},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>f().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var o=e.map(function(e){return e.dtype}).reduce(function(e,t){return Ie(e,t)}),i=e.map(function(e){return e.shape}),a=f().getBool("WEBGL_PACK")?new ko(e[0].shape,i):new Eo(e[0].shape,i);return this.compileAndRun(a,e,o)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,Xo);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Ie(e.dtype,t.dtype);if(f().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,Xo,e.dtype);var r=new Jo(Xo,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=f().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ei("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Jo("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Ie(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(f().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ha,e.dtype);var t=new Fa(e.shape,Ha);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(f().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ga,e.dtype);var t=new Fa(e.shape,Ga);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new Fa(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new Fa(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new Fa(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new Fa(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new Fa(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(f().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,qa,e.dtype);var t=new Fa(e.shape,qa);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(f().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ka,e.dtype);var t=new Fa(e.shape,Ka);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=F([t],e.shape),r=this.max(e,n),o=nn(r.shape,n),i=this.subtract(e,r.reshape(o)),a=this.exp(i),u=this.sum(a,n).reshape(o);return this.realDivide(a,u)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(f().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new Fa(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new Fa(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new Fa(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new Fa(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new Fa(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=f().getBool("WEBGL_PACK")?new Za(e.shape,Ya):new Fa(e.shape,Wa),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=f().getBool("WEBGL_PACK")?new Za(e.shape,Qa):new Fa(e.shape,za),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=f().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ei(Zo,e.shape,t.shape):new Jo(Qo,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(f().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ja,e.dtype);var t=new Fa(e.shape,Ua);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=f().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ei("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new Jo("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new Fa(e.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new Fa(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,o=(r=f().getBool("WEBGL_PACK_CLIP")?new ni(e.shape):new ti(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,o)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(f().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,La,e.dtype);var t=new Fa(e.shape,La);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new ri(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new Fa(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new Fa(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new Fa(e.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new Fa(e.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new Fa(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new Fa(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new Fa(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new Fa(e.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=f().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ei("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new Jo("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new Fa(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new Fa(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new Fa(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new Fa(e.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new Fa(e.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new Fa(e.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new Fa(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new Fa(e.shape,function(e){return void 0===e&&(e=0),Ba+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,o,i){var a=e.shape,u=this.texData.get(e.dataId),s=n.inChannels,c=a[0]*a[1]*a[2],l=n.outChannels,p="channelsLast"===n.dataFormat,d=(1===c||1===l)&&s>1e3,h=a[2]%2!=0&&!!u.isPacked;if(d||!f().getBool("WEBGL_LAZILY_UNPACK")||!f().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!h){var v=p?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],m=this.reshape(e,[1,v,n.inChannels]),g=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:i}),n.outShape)}var y=p?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),b={dataId:e.dataId,shape:[1,y,n.inChannels],dtype:e.dtype},x=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,k(Dt(u.shape,b.shape),function(){return"packed reshape "+u.shape+" to "+b.shape+" isn't free"});var w=this.reshape(t,[1,n.inChannels,n.outChannels]),C=this.fusedBatchMatMul({a:b,b:w,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:i}),E=this.texData.get(C.dataId);return k(E.isPacked,function(){return"batchMatMul result is expected to be packed"}),u.shape=x,E.shape=n.outShape,je.makeTensorFromDataId(C.dataId,n.outShape,C.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,o,i){var a=n.filterWidth,u=n.filterHeight,s=n.inChannels,c=n.outWidth,l=n.outHeight,f="channelsLast"===n.dataFormat,p=a*u*s,d=l*c,h=[p,d],v=e.squeeze([0]),m=t.reshape([1,p,-1]),g=new Ji(h,v.shape,n),y=this.compileAndRun(g,[v]).reshape([1,h[0],h[1]]),b=null!=r,x=null!=i,w=o?nu(o,!0):null,C=new oa(y.shape,[1,d,n.outChannels],!0,!1,b,w,x),E=[y,m];r&&E.push(r),x&&E.push(i);var k=this.compileAndRun(C,E);return f?k.reshape([1,l,c,n.outChannels]):k.reshape([1,n.outChannels,l,c])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,i=e.activation,a=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,o,i,a);if(f().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,o,i,a);var u=null!=o,s=null!=a,c=i?nu(i,!1):null,l=new di(r,u,c,s),p=[t,n];return o&&p.push(o),a&&p.push(a),this.compileAndRun(l,p)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(f().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new di(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new si(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new ui(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,o=e.convInfo,i=e.bias,a=e.activation,u=e.preluActivationWeights,s=f().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,c=a?nu(a,s):null,l=[n,r],p=null!=i,d=null!=u;return p&&l.push(i),d&&l.push(u),s?(t=new mi(o,p,c,d),this.compileAndRun(t,l)):(t=new vi(o,p,c,d),this.compileAndRun(t,l))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return f().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new mi(n),this.compileAndRun(r,[e,t])):(r=new vi(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new pi(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new fi(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new hi(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new li(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new ci(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new la(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new la(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var o=new la(r,"max",!0),i=this.compileAndRun(o,[t]),a=new na(r),u=this.compileAndRun(a,[e,i],t.dtype);return i.dispose(),u},t.prototype.avgPoolBackprop=function(e,t,n){var r=new Vo(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return ro(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,i=0;i<e.rank;i++)i!==t&&(r[o++]=e.shape[i]);var a=new Array(e.rank).fill(0),u=e.shape.slice();u[t]=1;var s=new Array(n);for(i=0;i<s.length;i++)a[t]=i,s[i]=this.slice(e,a,u).reshape(r);return s},t.prototype.avgPool3d=function(e,t){var n=new fa(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new Ho(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new fa(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var o=new fa(r,"max",!0),i=this.compileAndRun(o,[t]),a=new ra(r),u=this.compileAndRun(a,[e,i],t.dtype);return i.dispose(),u},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!Dt(e.shape,t)&&(null===n.texture||!Dt(n.shape,t))){var r=this.packedReshape(e,t);return je.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return oo(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var o=f().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ma(e.shape,t,n,r):new va(e.shape,t,n,r);return this.compileAndRun(o,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new ha(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var o=new ya(e.shape,t,n,r);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new ga(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var o=t?e:Br(e),i=o.shape[0],a=o.shape[1],u=new ia(i,a,n),s=u.getCustomSetupFunc(r);return this.compileAndRun(u,[o],"int32",s)},t.prototype.oneHot=function(e,t,n,r){var o=new aa(e.size,t,n,r);return this.compileAndRun(o,[e])},t.prototype.diag=function(e){var t=new Ei(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return $t("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),po(e.dataSync(),t.dataSync(),n,r,o)},t.prototype.cropAndResize=function(e,t,n,r,o,i){var a=new gi(e.shape,t.shape,r,o,i);return this.compileAndRun(a,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){k(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});var r=e.shape[0],o="NHWC"===n?e.shape[1]:e.shape[2],i="NHWC"===n?e.shape[2]:e.shape[3],a="NHWC"===n?e.shape[3]:e.shape[1],u=o*t,s=i*t,c=a/(t*t),l=new Ci("NHWC"===n?[r,u,s,c]:[r,c,u,s],t,n);return this.compileAndRun(l,[e])},t.prototype.split=function(e,t,n){return bo(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Tr(0,e,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,u=r.strides,s=r.outputSize,c=[s/a,a],l=e.reshape([i,o]),f=t.reshape([i,a]);if(0===s)return oo(hn([]),n);var p=mn(0),d=new wa(i,o,l.rank,f.rank,u,c);return this.compileAndRun(d,[f,l,p]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var o=Tr(0,e,n),i=o.sliceRank,a=o.numUpdates,u=o.strides,s=o.outputSize,c=new wa(a,i,e.rank,t.rank,u,[s,1],!1);return this.compileAndRun(c,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Ti("return real * expR - imag * expI;",e.shape,t),o=new Ti("return real * expI + imag * expR;",e.shape,t),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],a=this.compileAndRun(r,i),u=this.compileAndRun(o,i),s=this.complex(a,u).as2D(e.shape[0],e.shape[1]);return a.dispose(),u.dispose(),s},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=Er(e,t),i=o[0],a=o[1],u=o[2],s=o[3],c=t.reshape([a,r]),l=e.reshape([e.size/u,u]),f=new Ai(r,s,[a,u]);return this.compileAndRun(f,[l,c]).reshape(i)},t.prototype.fill=function(e,t,n){if("string"===(n=n||X(t))){var r=L(n,T(e));return r.fill(t),je.makeTensor(r,e,n,this)}var o=new Ri(e,t),i=o.getCustomSetupFunc(t);return this.compileAndRun(o,[],n,i)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return io(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return je.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new eu(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new ua(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[Tt(e.shape)].concat(Rt(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[Tt(t)].concat(Rt(t)),i=new da(o,n),a=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:a.dataId,shape:t,dtype:a.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,o=n.shape,i=n.dtype,a=It(o);return t=r?new wi(a):new xi(a),{dtype:i,shape:o,dataId:this.runWebGLProgram(t,[{shape:a,dtype:i,dataId:e}],i,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,o){var i=this;void 0===o&&(o=!1);var a=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(a.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===ze.DENSE){var s=Xe(e.outputShape);u.texShape=s.map(function(e){return 2*e})}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===T(a.shape))return u.values=j(a.dtype,0),a;var c=[],l=t.map(function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&T(t.shape)<=f().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),c.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!Dt(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=i.packedReshape(t,o),c.push(t),n=i.texData.get(t.dataId),r.shape=o}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(a.dataId);var p,d={shape:a.shape,texData:u,isUniform:!1},h=function(e,t,n){var r="";l.concat(n).forEach(function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t});var o=e.userCode;return e.constructor.name+"_"+r+"_"+o}(e,0,d),v=this.getAndSaveBinary(h,function(){return function(e,t,n,r){var o=t.userCode,i=n.map(function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),a=i.map(function(e){return e.shapeInfo}),u={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=No(i,u,o,t.packedInputs),c=e.createProgram(s),l=null,p=e.getUniformLocation(c,"NAN",!1);1===f().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var d={},h=0;h<t.variableNames.length;h++){var v=t.variableNames[h];d[v]=e.getUniformLocation(c,v,!1),d["offset"+v]=e.getUniformLocation(c,"offset"+v,!1)}return{program:t,source:s,webGLProgram:c,uniformLocations:d,inShapeInfos:a,outShapeInfo:u,infLoc:l,nanLoc:p}}(i.gpgpu,e,l,d)}),m=null!=this.activeTimers;if(m&&(p=this.startTimer()),function(e,t,n,r,o){Qi(t.inShapeInfos,n),Qi([t.outShapeInfo],[r]);var i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i,a[0],a[1]):e.setOutputMatrixTexture(i,a[0],a[1]),e.setProgram(t.webGLProgram),1===f().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(function(n,r){var o=t.program.variableNames[r],i=t.uniformLocations[o],a=t.uniformLocations["offset"+o];if(null!=i)if(n.isUniform)if(T(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var u=n.uniformValues;u instanceof Float32Array||(u=new Float32Array(u)),e.gl.uniform1fv(i,u)}else null!=n.texData.slice&&null!=a&&e.gl.uniform1i(a,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,i,r)}),null!=o&&o(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,v,l,d,r),c.forEach(function(e){return i.disposeData(e.dataId)}),m&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)})),!f().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var g=this.unpackTensor(a);return this.disposeData(a.dataId),g}return a},t.prototype.compileAndRun=function(e,t,n,r,o){void 0===o&&(o=!1),n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,o);return je.makeTensorFromDataId(i.dataId,i.shape,i.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(f().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=qt(function(){if(!f().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=f().getBool("DEBUG");f().set("DEBUG",!1);var n=e.abs(mn(1e-8)).dataSync()[0];if(f().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,i=n.values,a=n.texture,u=n.usage,s=n.isPacked;if(null==a){var c,l=null!=this.activeTimers;l&&(c=re());var f=n.texShape;if(null==f&&(f=At(r,s),n.texShape=f),null!=i){var p=It(r),d=void 0,h=f[1],v=f[0],m=i instanceof Uint8Array;s?(h=(t=Ye(f[0],f[1]))[0],v=t[1],d=new Oi(p,[v,h],m)):d=new Si(p,[v,h],m);var g=this.makeTensorInfo([v,h],o);this.texData.get(g.dataId).usage=m?Ue.PIXELS:Ue.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),h,v,i);var y=this.runWebGLProgram(d,[g],o,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,l&&(this.uploadWaitMs+=re()-c)}else{var x=this.acquireTexture(f,u,o,s);n.texture=x}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*H(t)},t}(Wr);Le()&&je.registerBackend("webgl",function(){return new ou},2);var iu=ln({square_:function(e){var t=Qt(e,"x","square"),n=[t];return je.runKernelFunc(function(e,n){return n([t]),e.square(t)},{x:t},null,"Square",{},n,[])}}),au="SquaredDifference",uu=ln({squaredDifference_:function(e,t){var n,r=Qt(e,"a","squaredDifference"),o=Qt(t,"b","squaredDifference");n=Ne(r,o),r=n[0],o=n[1],Hr(r.shape,o.shape);var i={a:r,b:o},a=[r,o];return je.runKernelFunc(function(e,t){var n=e.squaredDifference(r,o);return t([r,o]),n},i,function(e,t){var n=t[0],r=t[1],o=mn(2);return{a:function(){return e.mul(n.sub(r).mul(o))},b:function(){return e.mul(r.sub(n).mul(o))}}},au,{},a,[])}}),su=ln({abs_:function(e){var t=Qt(e,"x","abs");return"complex64"===t.dtype?je.runKernelFunc(function(e){return e.complexAbs(t)},{$x:t}):je.runKernelFunc(function(e,n){var r=e.abs(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}},"Abs")}}),cu=ln({acos_:function(e){var t=Qt(e,"x","acos");return je.runKernelFunc(function(e,n){var r=e.acos(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(mn(1).sub(n.toFloat().square()).sqrt()).neg()}}})}}),lu=ln({acosh_:function(e){var t=Qt(e,"x","acosh");return je.runKernelFunc(function(e,n){var r=e.acosh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}})}}),fu=ln({asin_:function(e){var t=Qt(e,"x","asin");return je.runKernelFunc(function(e,n){var r=e.asin(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(mn(1).sub(n.toFloat().square()).sqrt())}}})}}),pu=ln({asinh_:function(e){var t=Qt(e,"x","asinh");return je.runKernelFunc(function(e,n){var r=e.asinh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.divStrict(mn(1).add(n.toFloat().square()).sqrt())}}})}}),du=ln({atan_:function(e){var t=Qt(e,"x","atan");return je.runKernelFunc(function(e,n){var r=e.atan(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}})}}),hu=ln({atanh_:function(e){var t=Qt(e,"x","atanh");return je.runKernelFunc(function(e,n){var r=e.atanh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(mn(1).sub(n.toFloat().square()))}}})}}),vu=ln({ceil_:function(e){var t=Qt(e,"x","ceil");return je.runKernelFunc(function(e){return e.ceil(t)},{$x:t},function(e){return{$x:function(){return Sn(e)}}})}}),mu=ln({clipByValue_:function(e,t,n){var r=Qt(e,"x","clipByValue");k(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var o=[r],i={min:t,max:n};return je.runKernelFunc(function(e,o){var i=e.clip(r,t,n);return o([r]),i},{x:r},function(e,r){var o=r[0];return{x:function(){return e.where(o.greaterEqual(t).logicalAnd(o.lessEqual(n)),Sn(e))}}},"ClipByValue",i,o)}}),gu=ln({cos_:function(e){var t=Qt(e,"x","cos"),n=[t];return je.runKernelFunc(function(e,n){var r=e.cos(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}},"Cos",{},n)}}),yu=ln({cosh_:function(e){var t=Qt(e,"x","cosh");return je.runKernelFunc(function(e,n){var r=e.cosh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}})}}),bu=ln({erf_:function(e){var t=Qt(e,"x","erf");return k("int32"===t.dtype||"float32"===t.dtype,function(){return"Input dtype must be `int32` or `float32`."}),"int32"===t.dtype&&(t=t.toFloat()),je.runKernelFunc(function(e,n){var r=e.erf(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),xu=ln({exp_:function(e){var t=Qt(e,"x","exp");return je.runKernelFunc(function(e,n){var r=e.exp(t);return n([r]),r},{x:t},function(e,t){return{x:function(){return e.mulStrict(t[0])}}},"Exp",{},[],[!0])}}),wu=ln({expm1_:function(e){var t=Qt(e,"x","expm1");return je.runKernelFunc(function(e,n){var r=e.expm1(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}})}}),Cu=ln({floor_:function(e){var t=Qt(e,"x","floor");return je.runKernelFunc(function(e){return e.floor(t)},{$x:t},function(e){return{$x:function(){return Sn(e)}}})}}),Eu=ln({log_:function(e){var t=Qt(e,"x","log"),n=[t];return je.runKernelFunc(function(e,n){var r=e.log(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}},"Log",{},n)}}),ku=ln({log1p_:function(e){var t=Qt(e,"x","log1p");return je.runKernelFunc(function(e,n){var r=e.log1p(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}})}}),_u=ln({logSigmoid_:function(e){var t=Qt(e,"x","logSigmoid");return je.runKernelFunc(function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}})}}),Su=ln({neg_:function(e){var t=Qt(e,"x","neg"),n=[t];return je.runKernelFunc(function(e){return e.neg(t)},{x:t},function(e){return{x:function(){return e.neg()}}},"Neg",{},n)}}),Ou=ln({reciprocal_:function(e){var t=Qt(e,"x","reciprocal");return je.runKernelFunc(function(e,n){var r=e.reciprocal(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}})}}),Tu=ln({round_:function(e){var t=Qt(e,"x","round");return je.runKernelFunc(function(e){return e.round(t)},{$x:t},function(e){return{$x:function(){return Sn(e)}}})}}),Ru=ln({rsqrt_:function(e){var t=Qt(e,"x","rsqrt"),n=[t];return je.runKernelFunc(function(e,n){var r=e.rsqrt(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),Iu=ln({sigmoid_:function(e){var t=Qt(e,"x","sigmoid");return je.runKernelFunc(function(e,n){var r=e.sigmoid(t);return n([r]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(mn(1).sub(n)))}}},"Sigmoid")}}),Au=ln({sign_:function(e){var t=Qt(e,"x","sign");return je.runKernelFunc(function(e){return e.sign(t)},{$x:t},function(e){return{$x:function(){return Sn(e)}}})}}),Nu=ln({isNaN_:function(e){var t=Qt(e,"x","isNaN");return je.runKernelFunc(function(e){return e.isNaN(t)},{$x:t},function(e){return{$x:function(){return Sn(e)}}})}}),Du=ln({isInf_:function(e){var t=Qt(e,"x","isInf");return je.runKernelFunc(function(e){return e.isInf(t)},{$x:t},function(e){return{$x:function(){return Sn(e)}}})}}),Pu=ln({isFinite_:function(e){var t=Qt(e,"x","isFinite");return je.runKernelFunc(function(e){return e.isFinite(t)},{$x:t},function(e){return{$x:function(){return Sn(e)}}})}}),Mu=ln({sin_:function(e){var t=Qt(e,"x","sin"),n=[t];return je.runKernelFunc(function(e,n){var r=e.sin(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}},"Sin",{},n)}}),Fu=ln({sinh_:function(e){var t=Qt(e,"x","sinh");return je.runKernelFunc(function(e,n){var r=e.sinh(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}})}}),Bu=ln({softplus_:function(e){var t=Qt(e,"x","softplus");return je.runKernelFunc(function(e,n){var r=e.softplus(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}})}}),ju=ln({sqrt_:function(e){var t=Qt(e,"x","sqrt");return je.runKernelFunc(function(e,n){var r=e.sqrt(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}})}}),Lu=ln({step_:function(e,t){void 0===t&&(t=0);var n=Qt(e,"x","step");return je.runKernelFunc(function(e){return e.step(n,t)},{$x:n},function(e){return{$x:function(){return Sn(e)}}})}}),Wu=ln({tan_:function(e){var t=Qt(e,"x","tan");return je.runKernelFunc(function(e,n){var r=e.tan(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}})}}),zu=ln({tanh_:function(e){var t=Qt(e,"x","tanh");return je.runKernelFunc(function(e,n){var r=e.tanh(t);return n([r]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return mn(1).sub(n.square()).mulStrict(e)}}},"Tanh",{},null,[!0])}});function Uu(e,t,n,r,o,i){var a,u,s=Qt(e,"x","batchNorm"),c=Qt(t,"mean","batchNorm"),l=Qt(n,"variance","batchNorm");return null!=o&&(a=Qt(o,"scale","batchNorm")),null!=r&&(u=Qt(r,"offset","batchNorm")),k(2===s.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."}),k(2===c.rank||1===c.rank,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),k(2===l.rank||1===l.rank,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),null!=a&&k(2===a.rank||1===a.rank,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."}),null!=u&&k(2===u.rank||1===u.rank,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+u.rank+"."}),Gu(s,c,l,u,a,i)}function Vu(e,t,n,r,o,i){var a,u,s=Qt(e,"x","batchNorm"),c=Qt(t,"mean","batchNorm"),l=Qt(n,"variance","batchNorm");return null!=o&&(a=Qt(o,"scale","batchNorm")),null!=r&&(u=Qt(r,"offset","batchNorm")),k(3===s.rank,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."}),k(3===c.rank||1===c.rank,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),k(3===l.rank||1===l.rank,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),null!=a&&k(3===a.rank||1===a.rank,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."}),null!=u&&k(3===u.rank||1===u.rank,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+u.rank+"."}),Gu(s,c,l,u,a,i)}function Hu(e,t,n,r,o,i){var a,u,s=Qt(e,"x","batchNorm"),c=Qt(t,"mean","batchNorm"),l=Qt(n,"variance","batchNorm");return null!=o&&(a=Qt(o,"scale","batchNorm")),null!=r&&(u=Qt(r,"offset","batchNorm")),k(4===s.rank,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+s.rank+"."}),k(4===c.rank||1===c.rank,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),k(4===l.rank||1===l.rank,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),null!=a&&k(4===a.rank||1===a.rank,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."}),null!=u&&k(4===u.rank||1===u.rank,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+u.rank+"."}),Gu(s,c,l,u,a,i)}function Gu(e,t,n,r,o,i){null==i&&(i=.001);var a,u,s,c=Qt(e,"x","batchNorm"),l=Qt(t,"mean","batchNorm"),f=Qt(n,"variance","batchNorm");null!=o&&(a=Qt(o,"scale","batchNorm")),null!=r&&(u=Qt(r,"offset","batchNorm")),k(l.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),k(null==u||l.rank===u.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),k(null==a||l.rank===a.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),s=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var p=[c,l,f,a];return je.runKernelFunc(function(e,t){var n=e.batchNormalization(s,qu(l),qu(f),i,qu(a),qu(u));return t([c,l,f,a]),n},{x:c,mean:l,variance:f,scale:a,offset:u},function(e,t){var n=t,r=n[0],o=n[1],a=n[2],u=n[3],c=null==u?mn(1):u,l=Vr(o.shape,s.shape),f=[];if(1===o.rank){for(var p=0;p<s.shape.length-1;++p)f.push(s.shape[p]);f.push(1)}var d=r.sub(o),h=e.mul(c),v=Ru(a.add(mn(i))),m=v.mul(v).mul(v).mul(mn(-.5));return{x:function(){return 1===o.rank?e.mul(vr(v.as4D(1,1,1,o.shape[0]),f)).mul(c).reshape(r.shape):e.mul(v).mul(c).reshape(r.shape)},mean:function(){var e=v.mul(mn(-1)).mul(h);return 1===o.rank&&(e=e.sum(l)),e.reshape(o.shape)},variance:function(){var e=m.mul(d).mul(h);return 1===o.rank&&(e=e.sum(l)),e.reshape(o.shape)},scale:function(){var t=d.mul(v),n=e.mul(t);return 1===o.rank&&(n=n.sum(l)),n.reshape(o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=t.sum(l)),t.reshape(o.shape)}}},"BatchNormalization",{varianceEpsilon:i},p).reshape(c.shape)}function qu(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Ku(){Gt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var $u=ln({batchNormalization2d_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),Ku(),Uu(e,t,n,i,o,r)}}),Xu=ln({batchNormalization3d_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),Ku(),Vu(e,t,n,i,o,r)}}),Yu=ln({batchNormalization4d_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),Ku(),Hu(e,t,n,i,o,r)}}),Qu=ln({batchNormalization_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),Ku(),Gu(e,t,n,i,o,r)}}),Ju=ln({batchNorm_:Gu}),Zu=ln({batchNorm2d_:Uu}),es=ln({batchNorm3d_:Vu}),ts=ln({batchNorm4d_:Hu}),ns=ln({logicalAnd_:function(e,t){var n=Qt(e,"a","logicalAnd","bool"),r=Qt(t,"b","logicalAnd","bool");return Hr(n.shape,r.shape),je.runKernelFunc(function(e){return e.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),rs=ln({logicalNot_:function(e){var t=Qt(e,"x","logicalNot","bool");return je.runKernelFunc(function(e){return e.logicalNot(t)},{$x:t})}}),os=ln({logicalOr_:function(e,t){var n=Qt(e,"a","logicalOr","bool"),r=Qt(t,"b","logicalOr","bool");return Hr(n.shape,r.shape),je.runKernelFunc(function(e){return e.logicalOr(n,r)},{$a:n,$b:r})}}),is=ln({logicalXor_:function(e,t){var n=Qt(e,"a","logicalXor","bool"),r=Qt(t,"b","logicalXor","bool");return Hr(n.shape,r.shape),os(e,t).logicalAnd(ns(e,t).logicalNot())}}),as=ln({where_:function(e,t,n){var r=Qt(t,"a","where"),o=Qt(n,"b","where"),i=Qt(e,"condition","where","bool");return _(r.shape,o.shape,"Error in where: "),1===i.rank?k(i.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):_(i.shape,o.shape,"Error in where: "),je.runKernelFunc(function(e,t){var n=e.select(i,r,o);return t([i]),n},{$condition:i,$a:r,$b:o},function(e,t){var n=t[0];return{$condition:function(){return Sn(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}})}}),us=function(e){return s(this,void 0,void 0,function(){var t,n,r;return c(this,function(o){switch(o.label){case 0:return[4,(t=Qt(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=Co(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},ss=ln({add_:function(e,t){var n,r=Qt(e,"a","add"),o=Qt(t,"b","add");n=Ne(r,o),r=n[0],o=n[1];var i=Hr(r.shape,o.shape);return je.runKernelFunc(function(e){return e.add(r,o)},{a:r,b:o},function(e){return{a:function(){var t=e,n=Vr(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Vr(o.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(o.shape)}}},"Add")}}),cs=ln({addN_:function(e){k(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),k(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(e,t){return Qt(e,"tensors"+t,"addN")}),n=t[0];t.forEach(function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(e){if(!R(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return je.runKernelFunc(function(e){return e.addN(t)},r,function(e){var n={};return t.forEach(function(t,r){n[r]=function(){return e.clone()}}),n},"AddN")}}),ls=ln({addStrict_:function(e,t){var n=Qt(e,"a","addStrict"),r=Qt(t,"b","addStrict");return _(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),fs=ln({atan2_:function(e,t){var n,r=Qt(e,"a","atan2"),o=Qt(t,"b","atan2");n=Ne(r,o),r=n[0],o=n[1];var i=Hr(r.shape,o.shape);return je.runKernelFunc(function(e,t){var n=e.atan2(r,o);return t([r,o]),n},{$a:r,$b:o},function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=ss(n.square(),r.square()),o=e.mul(r.div(t)),a=Vr(n.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},$b:function(){var t=ss(n.square(),r.square()),o=Su(e.mul(n.div(t))),a=Vr(r.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(r.shape)}}})}}),ps=ln({div_:function(e,t){var n,r=Qt(e,"a","div"),o=Qt(t,"b","div");if(n=Ne(r,o),r=n[0],o=n[1],"int32"===r.dtype&&"int32"===o.dtype)return vs(r,o);var i=Hr(r.shape,o.shape);return je.runKernelFunc(function(e,t){var n=e.realDivide(r,o);return t([r,o]),n},{a:r,b:o},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),o=Vr(n.shape,i);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=Vr(r.shape,i);o.length>0&&(t=t.sum(o).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}},"Div")}}),ds=ln({divNoNan_:function(e,t){var n,r=Qt(e,"a","div"),o=Qt(t,"b","div");r=(n=Ne(r,o))[0],o=n[1];var i=ps(r,o),a=Sn(i),u=o.equal(a);return as(u,a,i)}}),hs=ln({divStrict_:function(e,t){var n=Qt(e,"a","div"),r=Qt(t,"b","div");return _(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),vs=ln({floorDiv_:function(e,t){var n,r=Qt(e,"a","floorDiv"),o=Qt(t,"b","floorDiv");n=Ne(r,o),r=n[0],o=n[1];var i=Hr(r.shape,o.shape);return je.runKernelFunc(function(e,t){var n=e.floorDiv(r,o);return t([r,o]),n},{a:r,b:o},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),o=Vr(n.shape,i);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=Vr(r.shape,i);o.length>0&&(t=t.sum(o).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}},"FloorDiv")}}),ms=ln({maximum_:function(e,t){var n,r=Qt(e,"a","maximum"),o=Qt(t,"b","maximum");return n=Ne(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),Hr(r.shape,o.shape),je.runKernelFunc(function(e,t){var n=e.maximum(r,o);return t([r,o]),n},{a:r,b:o},function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}},"Maximum")}}),gs=ln({maximumStrict_:function(e,t){var n=Qt(e,"a","maximumStrict"),r=Qt(t,"b","maximumStrict");return _(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),ys=ln({minimum_:function(e,t){var n,r=Qt(e,"a","minimum"),o=Qt(t,"b","minimum");return n=Ne(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),Hr(r.shape,o.shape),je.runKernelFunc(function(e,t){var n=e.minimum(r,o);return t([r,o]),n},{a:r,b:o},function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}},"Minimum")}}),bs=ln({minimumStrict_:function(e,t){var n=Qt(e,"a","minimumStrict"),r=Qt(t,"b","minimumStrict");return _(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),xs=ln({mod_:function(e,t){var n,r=Qt(e,"a","mod"),o=Qt(t,"b","mod");n=Ne(r,o),r=n[0],o=n[1];var i=Hr(r.shape,o.shape);return je.runKernelFunc(function(e,t){var n=e.mod(r,o);return t([r,o]),n},{$a:r,$b:o},function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Vr(n.shape,i);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),o=Vr(r.shape,i);return o.length>0?t.sum(o).reshape(r.shape):t}}})}}),ws=ln({modStrict_:function(e,t){var n=Qt(e,"a","modStrict"),r=Qt(t,"b","modStrict");return _(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Cs=ln({mul_:function(e,t){var n,r=Qt(e,"a","mul"),o=Qt(t,"b","mul");n=Ne(r,o),r=n[0],o=n[1];var i=Hr(r.shape,o.shape);return je.runKernelFunc(function(e,t){var n=e.multiply(r,o);return t([r,o]),n},{a:r,b:o},function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),o=Vr(n.shape,i);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=Vr(r.shape,i);return o.length>0?t.sum(o).reshape(r.shape):t}}},"Mul")}}),Es=ln({mulStrict_:function(e,t){var n=Qt(e,"a","mul"),r=Qt(t,"b","mul");return _(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),ks=ln({pow_:function(e,t){var n,r=Qt(e,"base","pow"),o=Qt(t,"exp","pow");n=Ne(r,o),r=n[0],o=n[1];var i=Hr(r.shape,o.shape),a=[r,o];return je.runKernelFunc(function(e,t){var n=e.pow(r,o);return t([r,o,n]),n},{a:r,b:o},function(e,t){var n=t[0],r=t[1],o=t[2];return{a:function(){var t=r.toFloat(),o=e.mul(t.mul(n.pow(t.sub(mn(1))))),a=Vr(n.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},b:function(){var t=n.greater(0),a=n.log().where(t,Sn(n)),u=e.mul(o.mul(a)),s=Vr(r.shape,i);return s.length>0&&(u=u.sum(s)),u.reshape(r.shape)}}},"Pow",{},a,[!0])}}),_s=ln({powStrict_:function(e,t){return _(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Ss=ln({squaredDifferenceStrict_:function(e,t){var n=Qt(e,"a","squaredDifferenceStrict"),r=Qt(t,"b","squaredDifferenceStrict");return _(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Os=ln({sub_:function(e,t){var n,r=Qt(e,"a","sub"),o=Qt(t,"b","sub");n=Ne(r,o),r=n[0],o=n[1];var i=Hr(r.shape,o.shape);return je.runKernelFunc(function(e){return e.subtract(r,o)},{a:r,b:o},function(e){return{a:function(){var t=e,n=Vr(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Vr(o.shape,i);return n.length>0&&(t=t.sum(n)),t.neg().reshape(o.shape)}}},"Sub")}}),Ts=ln({subStrict_:function(e,t){var n=Qt(e,"a","subStrict"),r=Qt(t,"b","subStrict");return _(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Rs=ln({equal_:function(e,t){var n,r=Qt(e,"a","equal"),o=Qt(t,"b","equal");return n=Ne(r,o),r=n[0],o=n[1],Hr(r.shape,o.shape),je.runKernelFunc(function(e){return e.equal(r,o)},{$a:r,$b:o})}}),Is=ln({equalStrict_:function(e,t){var n=Qt(e,"a","equalStrict"),r=Qt(t,"b","equalStrict");return _(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),As=ln({greater_:function(e,t){var n,r=Qt(e,"a","greater"),o=Qt(t,"b","greater");return n=Ne(r,o),r=n[0],o=n[1],Hr(r.shape,o.shape),je.runKernelFunc(function(e){return e.greater(r,o)},{a:r,b:o},null,"Greater")}}),Ns=ln({greaterEqual_:function(e,t){var n,r=Qt(e,"a","greaterEqual"),o=Qt(t,"b","greaterEqual");return n=Ne(r,o),r=n[0],o=n[1],Hr(r.shape,o.shape),je.runKernelFunc(function(e,t){var n=e.greaterEqual(r,o);return t([r,o]),n},{a:r,b:o},function(e,t){var n=t[0],r=t[1];return{a:function(){return Sn(n)},b:function(){return Sn(r)}}},"GreaterEqual")}}),Ds=ln({greaterEqualStrict_:function(e,t){var n=Qt(e,"a","greaterEqualStrict"),r=Qt(t,"b","greaterEqualStrict");return _(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Ps=ln({greaterStrict_:function(e,t){var n=Qt(e,"a","greaterStrict"),r=Qt(t,"b","greaterStrict");return _(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Ms=ln({less_:function(e,t){var n,r=Qt(e,"a","less"),o=Qt(t,"b","less");return n=Ne(r,o),r=n[0],o=n[1],Hr(r.shape,o.shape),je.runKernelFunc(function(e){return e.less(r,o)},{a:r,b:o},null,"Less")}}),Fs=ln({lessEqual_:function(e,t){var n,r=Qt(e,"a","lessEqual"),o=Qt(t,"b","lessEqual");return n=Ne(r,o),r=n[0],o=n[1],Hr(r.shape,o.shape),je.runKernelFunc(function(e,t){var n=e.lessEqual(r,o);return t([r,o]),n},{a:r,b:o},null,"LessEqual")}}),Bs=ln({lessEqualStrict_:function(e,t){var n=Qt(e,"a","lessEqualStrict"),r=Qt(t,"b","lessEqualStrict");return _(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),js=ln({lessStrict_:function(e,t){var n=Qt(e,"a","lessStrict"),r=Qt(t,"b","lessStrict");return _(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Ls=ln({notEqual_:function(e,t){var n,r=Qt(e,"a","notEqual"),o=Qt(t,"b","notEqual");return n=Ne(r,o),r=n[0],o=n[1],Hr(r.shape,o.shape),je.runKernelFunc(function(e){return e.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),Ws=ln({notEqualStrict_:function(e,t){var n=Qt(e,"a","notEqualStrict"),r=Qt(t,"b","notEqualStrict");return _(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function zs(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Us(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Vs=ln({gather_:function(e,t,n){void 0===n&&(n=0);var r=Qt(e,"x","gather"),o=Qt(t,"indices","gather","int32");n=F(n,r.shape)[0];var i=function(e,t,n){for(var r=e.shape[n],o=[],i=1,a=1,u=0;u<n;u++)o.push(e.shape[u]),i*=e.shape[u];for(u=0;u<t.rank;u++)o.push(t.shape[u]);for(u=n+1;u<e.rank;u++)o.push(e.shape[u]),a*=e.shape[u];return{batchSize:i,sliceSize:a,dimSize:r,outputShape:o}}(r,o,n);return je.runKernelFunc(function(e,t){var i=e.gather(r,o.flatten(),n);return t([o]),i},{x:r,indices:o},function(e,t){var o=t[0];return{x:function(){var t=r.shape,i=o.size,a=t.slice(0,n),u=a.length,s=t.slice(n,t.length).slice(1),c=s.length,l=zs(0,u),f=zs(u+1,u+1+c),p=Us([a,[i],s]),d=e.reshape(p),h=o.reshape([i]),v=Us([[u],l,f]),m=d.transpose(v),g=Hs(m,h,r.shape[n]),y=an(v);return g.transpose(y)},indices:function(){return o}}},"Gather",{axis:n}).reshape(i.outputShape)}}),Hs=ln({unsortedSegmentSum_:function(e,t,n){var r=Qt(e,"x","unsortedSegmentSum"),o=Qt(t,"segmentIds","unsortedSegmentSum","int32");return k(I(n),function(){return"numSegments must be of dtype int"}),je.runKernelFunc(function(e,t){var i=e.unsortedSegmentSum(r,o,n);return t([o]),i},{$x:r},function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=ms(t,Sn(t)),r=Vs(e,n),o=Ns(t,mn(0,"int32")),i=r.rank-o.rank,a=0;a<i;++a)o=Jn(o,a+1);o=ns(o,wn(r.shape,"bool"));var u=Sn(r);return as(o,r,u)}(e,n)}}})}});function Gs(e,t,n,r,o,i,a){void 0===i&&(i="NHWC"),k(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var u=e,s=t,c=!1;3===t.rank&&(c=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),u=[1,e[0],e[1],e[2]]),k(4===u.length,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+u.length+"."}),k(4===s.rank,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank}),k(4===n.rank,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var l="NHWC"===i?u[3]:u[1],f="NHWC"===i?s.shape[3]:s.shape[1];k(l===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."}),k(f===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."}),null!=a&&k(I(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var p=no(i),d=Kr(u,n.shape,r,1,o,a,!1,p),h=je.runKernelFunc(function(e,t){var r=e.conv2dDerInput(s,n,d);return t([n,s]),r},{dy4D:s,filter:n},function(e,t){var n=t[0],u=t[1];return{dy4D:function(){return Xs(e,n,r,o,i,1,a)},filter:function(){return Qs(e,u,n.shape,r,o,i,a)}}});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function qs(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function Ks(e,t,n,r,o){k(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,a=t,u=!1;4===t.rank&&(u=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var s=i[4],c=a.shape[4];k(5===i.length,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),k(5===a.rank,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank}),k(5===n.rank,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),k(s===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+s+") must match input depth for filter "+n.shape[3]+"."}),k(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var l=$r(i,n.shape,r,1,o),f=je.runKernelFunc(function(e){return e.conv3dDerInput(a,n,l)},{dy5D:a});return u?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var $s=ln({conv1d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NWC"),void 0===i&&(i=1);var u=Qt(e,"x","conv1d"),s=Qt(t,"filter","conv1d"),c=u,l=!1;2===u.rank&&(l=!0,c=u.as3D(1,u.shape[0],u.shape[1])),k(3===c.rank,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),k(3===s.rank,function(){return"Error in conv1d: filter must be rank 3, but got rank "+s.rank+"."}),null!=a&&k(I(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}),k(c.shape[2]===s.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+s.shape[1]+"."}),k(to(n,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"}),k("NWC"===o,function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var f=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),p=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),d=Xs(p,f,[1,n],r,"NHWC",[1,i],a);return l?d.as2D(d.shape[2],d.shape[3]):d.as3D(d.shape[0],d.shape[2],d.shape[3])}}),Xs=ln({conv2d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var u=Qt(e,"x","conv2d"),s=Qt(t,"filter","conv2d"),c=u,l=!1;3===u.rank&&(l=!0,c=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),k(4===c.rank,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),k(4===s.rank,function(){return"Error in conv2d: filter must be rank 4, but got rank "+s.rank+"."}),null!=a&&k(I(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var f="NHWC"===o?c.shape[3]:c.shape[1];k(f===s.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+s.shape[2]+"."}),k(to(n,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"});var p=no(o),d=Kr(c.shape,s.shape,n,i,r,a,!1,p),h=[s,c],v=je.runKernelFunc(function(e,t){var n=e.conv2d(c,s,d);return t([s,c]),n},{x:c,filter:s},function(e,t){var a=t,u=a[0],s=a[1];return k(eo(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return Js(s.shape,e,u,n,r,o)},filter:function(){return Qs(s,e,u.shape,n,r,o)}}},"Conv2D",d,h);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),Ys=ln({conv3d_:function(e,t,n,r,o,i){void 0===o&&(o="NDHWC"),void 0===i&&(i=[1,1,1]);var a=Qt(e,"x","conv3d"),u=Qt(t,"filter","conv3d"),s=a,c=!1;4===a.rank&&(c=!0,s=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),k(5===s.rank,function(){return"Error in conv3d: input must be rank 5, but got rank "+s.rank+"."}),k(5===u.rank,function(){return"Error in conv3d: filter must be rank 5, but got rank "+u.rank+"."}),k(s.shape[4]===u.shape[3],function(){return"Error in conv3d: depth of input ("+s.shape[4]+") must match input depth for filter "+u.shape[3]+"."}),k(function(e,t){return qs(n)||qs(t)}(0,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),k("NDHWC"===o,function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var l=$r(s.shape,u.shape,n,i,r),f=je.runKernelFunc(function(e,t){var n=e.conv3d(s,u,l);return t([s,u]),n},{x:s,$filter:u},function(e,t){k(qs(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var o=t[0],a=t[1];return{x:function(){return Ks(o.shape,e,a,n,r)},$filter:function(){return function(e,t,n,r,o){var i=e;4===e.rank&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var a=t;4===a.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),k(5===i.rank,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+i.shape+"."}),k(5===a.rank,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."}),k(5===n.length,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."}),k(i.shape[4]===n[3],function(){return"Error in conv3dDerFilter: depth of input "+i.shape[4]+") must match input depth in filter ("+n[3]+"."}),k(a.shape[4]===n[4],function(){return"Error in conv3dDerFilter: depth of dy ("+a.shape[4]+") must match output depth for filter ("+n[4]+")."});var u=$r(i.shape,n,r,1,o);return je.runKernelFunc(function(e){return e.conv3dDerFilter(i,a,u)},{x5D:i,dy5D:a})}(o,e,a.shape,n,r)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Qs=ln({conv2dDerFilter_:function(e,t,n,r,o,i,a){void 0===i&&(i="NHWC");var u=e;3===e.rank&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t;3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),k(4===u.rank,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+u.shape+"."}),k(4===s.rank,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."}),k(4===n.length,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var c="NHWC"===i?u.shape[3]:u.shape[1],l="NHWC"===i?s.shape[3]:s.shape[1];k(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),k(l===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."}),null!=a&&k(I(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var f=no(i),p=Kr(u.shape,n,r,1,o,a,!1,f);return je.runKernelFunc(function(e){return e.conv2dDerFilter(u,s,p)},{x4D:u,dy4D:s})}}),Js=ln({conv2dDerInput_:Gs}),Zs=ln({depthwiseConv2d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var u=Qt(e,"x","depthwiseConv2d"),s=Qt(t,"filter","depthwiseConv2d"),c=u,l=!1;3===u.rank&&(l=!0,c=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),k(4===c.rank,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),k(4===s.rank,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+s.rank+"."}),k(c.shape[3]===s.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+s.shape[2]+"."}),null==i&&(i=[1,1]),k(to(n,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),null!=a&&k(I(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."});var f=Kr(c.shape,s.shape,n,i,r,a,!0),p=[c,s],d=je.runKernelFunc(function(e,t){var n=e.depthwiseConv2D(c,s,f);return t([c,s]),n},{x:c,filter:s},function(e,t){k(eo(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var n=t[0],r=t[1];return{x:function(){return ec(n.shape,e,r,f)},filter:function(){return tc(n,e,r.shape,f)}}},"DepthwiseConv2dNative",f,p);return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}}),ec=ln({depthwiseConv2dDerInput_:function(e,t,n,r){var o=t,i=!1;3===t.rank&&(i=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=je.runKernelFunc(function(e){return e.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),tc=ln({depthwiseConv2dDerFilter_:function(e,t,n,r){var o=e;3===e.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return 3===i.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),je.runKernelFunc(function(e){return e.depthwiseConv2DDerFilter(o,i,r)},{x4D:o,dy4D:i})}}),nc=ln({separableConv2d_:function(e,t,n,r,o,i,a){void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC");var u=Qt(e,"x","separableConv2d"),s=Qt(t,"depthwiseFilter","separableConv2d"),c=Qt(n,"pointwiseFilter","separableConv2d"),l=u,f=!1;if(3===u.rank&&(f=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");k(4===l.rank,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),k(4===s.rank,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+s.rank+"."}),k(4===c.rank,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+s.rank+"."}),k(1===c.shape[0],function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),k(1===c.shape[1],function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var p=s.shape[2],d=s.shape[3];k(c.shape[2]===p*d,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*d+", but got "+c.shape[2]+"."});var h=Zs(l,s,r,o,a,i),v=Xs(h,c,1,"valid",a);return f?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),rc=ln({conv2dTranspose_:function(e,t,n,r,o,i){return Gs(n,Qt(e,"x","conv2dTranspose"),Qt(t,"filter","conv2dTranspose"),r,o,"NHWC",i)}}),oc=ln({conv3dTranspose_:function(e,t,n,r,o){return Ks(n,Qt(e,"x","conv3dTranspose"),Qt(t,"filter","conv3dTranspose"),r,o)}}),ic=ln({matMul_:function(e,t,n,r){var o;void 0===n&&(n=!1),void 0===r&&(r=!1);var i=Qt(e,"a","matMul"),a=Qt(t,"b","matMul");o=Ne(i,a),i=o[0],a=o[1];var u=n?i.shape[i.rank-2]:i.shape[i.rank-1],s=r?a.shape[a.rank-1]:a.shape[a.rank-2],c=n?i.shape[i.rank-1]:i.shape[i.rank-2],l=r?a.shape[a.rank-2]:a.shape[a.rank-1],f=i.shape.slice(0,-2),p=a.shape.slice(0,-2),d=T(f),h=T(p);k(i.rank>=2&&a.rank>=2&&i.rank===a.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+a.rank+"."}),k(R(f,p),function(){return"Error in matMul: outer dimensions ("+f+") and ("+p+") of Tensors with shapes "+i.shape+" and "+a.shape+" must match."}),k(u===s,function(){return"Error in matMul: inner shapes ("+u+") and ("+s+") of Tensors with shapes "+i.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var v=i.shape.slice(0,-2).concat([c,l]),m=n?i.as3D(d,u,c):i.as3D(d,c,u),g=r?a.as3D(h,l,s):a.as3D(h,s,l),y={transposeA:n,transposeB:r};return je.runKernelFunc(function(e,t){var o=e.batchMatMul(m,g,n,r);return t([m,g]),o},{a:m,b:g},function(e,t){var o=t,i=o[0],a=o[1];return n||r?!n&&r?{a:function(){return e.matMul(a,!1,!1)},b:function(){return e.matMul(i,!0,!1)}}:n&&!r?{a:function(){return a.matMul(e,!1,!0)},b:function(){return i.matMul(e,!1,!1)}}:{a:function(){return a.matMul(e,!0,!0)},b:function(){return e.matMul(i,!0,!0)}}:{a:function(){return e.matMul(a,!1,!0)},b:function(){return i.matMul(e,!0,!1)}}},"BatchMatMul",y).reshape(v)}}),ac=ln({dot_:function(e,t){var n=Qt(e,"t1","dot"),r=Qt(t,"t2","dot");k(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return k(o===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."}),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),uc=ln({outerProduct_:function(e,t){var n=Qt(e,"v1","outerProduct"),r=Qt(t,"v2","outerProduct");return k(1===n.rank&&1===r.rank,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),sc=ln({reverse_:function(e,t){var n=Qt(e,"x","reverse");if(0===n.rank)return n.clone();var r=F(t,n.shape);return je.runKernelFunc(function(e){return e.reverse(n,r)},{$x:n},function(e){return{$x:function(){return e.reverse(r)}}}).reshapeAs(n)}}),cc=ln({reverse1d_:function(e){var t=Qt(e,"x","reverse");return k(1===t.rank,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),sc(t,0)}}),lc=ln({reverse2d_:function(e,t){var n=Qt(e,"x","reverse");return k(2===n.rank,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),sc(n,t)}}),fc=ln({reverse3d_:function(e,t){var n=Qt(e,"x","reverse");return k(3===n.rank,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),sc(n,t)}}),pc=ln({reverse4d_:function(e,t){var n=Qt(e,"x","reverse");return k(4===n.rank,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),sc(n,t)}});function dc(e,t,n,r,o,i){var a=Qt(e,"x","maxPool"),u=a,s=!1;3===a.rank&&(s=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),null==r&&(r=[1,1]),k(4===u.rank,function(){return"Error in maxPool: input must be rank 4 but got rank "+u.rank+"."}),k(to(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),null!=i&&k(I(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var c=Gr(u.shape,t,n,r,o,i);if(1===c.filterWidth&&1===c.filterHeight&&R(c.inShape,c.outShape))return a.clone();var l=[u],f=je.runKernelFunc(function(e,t){var n=e.maxPool(u,c);return t([u,n]),n},{x:u},function(e,i){var a=i[0],u=i[1];return{x:function(){return function(e,t,n,r,o,i,a,u){var s=Qt(e,"dy","maxPoolBackprop"),c=Qt(t,"input","maxPoolBackprop"),l=Qt(n,"output","maxPoolBackprop");k(c.rank===s.rank,function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+s.rank+")"}),null==i&&(i=[1,1]),k(to(o,i),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"}),k(4===s.rank,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."}),k(4===c.rank,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."});var f=Gr(c.shape,r,o,i,a,u);return je.runKernelFunc(function(e){return e.maxPoolBackprop(s,c,l,f)},{$dy:s,$input:c})}(e,a,u,t,n,r,o)}}},"MaxPool",c,l);return s?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function hc(e,t,n,r,o,i){var a=Qt(e,"x","avgPool","float32");null==r&&(r=[1,1]),k(to(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var u=a,s=!1;3===a.rank&&(s=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),k(4===u.rank,function(){return"Error in avgPool: x must be rank 4 but got rank "+u.rank+"."}),null!=i&&k(I(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var c=Gr(u.shape,t,n,r,o,i);if(1===c.filterWidth&&1===c.filterHeight&&R(c.inShape,c.outShape))return a.clone();var l=je.runKernelFunc(function(e){return e.avgPool(u,c)},{x:u},function(e){return{x:function(){return function(e,t,n,r,o,i){var a=Qt(e,"dy","avgPoolBackprop"),u=Qt(t,"input","avgPoolBackprop");k(u.rank===a.rank,function(){return"Rank of input ("+u.rank+") does not match rank of dy ("+a.rank+")"}),null==o&&(o=[1,1]),k(to(r,o),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"});var s=u,c=a,l=!1;3===u.rank&&(l=!0,s=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),k(4===c.rank,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."}),k(4===s.rank,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+"."});var f=Gr(s.shape,n,r,o,i),p=je.runKernelFunc(function(e){return e.avgPoolBackprop(c,s,f)},{dy4D:c,input4D:s});return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}(e,u,t,n,r,o)}}},"AvgPool",c);return l=l.cast(a.dtype),s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var vc=ln({maxPool_:function(e,t,n,r,o){return dc(e,t,n,1,r,o)}}),mc=ln({avgPool_:function(e,t,n,r,o){return hc(e,t,n,1,r,o)}}),gc=ln({pool_:function(e,t,n,r,o,i){null==o&&(o=[1,1]),null==i&&(i=1),0===r&&(r="valid");var a=Qt(e,"x","maxPool"),u=a,s=!1;3===a.rank&&(s=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),k(to(i,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"});var c,l=Gr(u.shape,t,i,o,r),f=[l.dilationHeight,l.dilationWidth];c="same"===r?function(e,t){var n=e.map(function(e,n){return e+(e-1)*(t[n]-1)}).map(function(e){return e-1}),r=n.map(function(e){return Math.floor(e/2)}),o=n.map(function(e,t){return e-r[t]});return n.map(function(e,t){return[r[t],o[t]]})}([l.filterHeight,l.filterWidth],f):[[0,0],[0,0]];var p=1===f[0]&&1===f[1],d=function(e,t,n){var r=n.map(function(e){return e[0]}),o=n.map(function(e){return e[1]}),i=e.concat(r,o),a=t.map(function(e,t){return(e-i[t]%e)%e}),u=o.map(function(e,t){return e+a[t]});return[t.map(function(e,t){return[r[t],u[t]]}),t.map(function(e,t){return[0,a[t]]})]}([l.inHeight,l.inWidth],f,c),h=d[0],v=d[1],m=p?r:"valid",g=p?u:pr(u,f,h),y=("avg"===n?function(){return hc(g,t,i,1,m)}:function(){return dc(g,t,i,1,m)})(),b=p?y:qn(y,f,v);return s?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),yc=ln({maxPool3d_:function(e,t,n,r,o,i,a){void 0===i&&(i="NDHWC");var u=Qt(e,"x","maxPool3d"),s=u,c=!1;4===u.rank&&(c=!0,s=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),null==a&&(a=[1,1,1]),k(5===s.rank,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+s.rank+"."}),k("NDHWC"===i,function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),k(to(n,a),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),null!=o&&k(I(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=qr(s.shape,t,n,a,r,o,i),f=je.runKernelFunc(function(e,t){var n=e.maxPool3d(s,l);return t([s,n]),n},{x:s},function(e,i){var u=i[0],s=i[1];return{x:function(){return function(e,t,n,r,o,i,a,u){var s=Qt(e,"dy","maxPool3dBackprop"),c=Qt(t,"input","maxPool3dBackprop"),l=Qt(n,"output","maxPool3dBackprop"),f=s,p=c,d=l,h=!1;4===c.rank&&(h=!0,f=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),p=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),k(5===f.rank,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+f.rank+"."}),k(5===p.rank,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+p.rank+"."}),k(5===d.rank,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+d.rank+"."}),null==i&&(i=[1,1,1]),k(to(o,i),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"}),null!=u&&k(I(a),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+a+"."});var v=qr(p.shape,r,o,i,a,u),m=je.runKernelFunc(function(e){return e.maxPool3dBackprop(f,p,d,v)},{dy5D:f,input5D:p});return h?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(e,u,s,t,n,a,r,o)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),bc=ln({avgPool3d_:function(e,t,n,r,o,i,a){void 0===i&&(i="NDHWC");var u=Qt(e,"x","avgPool3d","float32"),s=u,c=!1;4===u.rank&&(c=!0,s=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),null==a&&(a=[1,1,1]),k(5===s.rank,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+s.rank+"."}),k("NDHWC"===i,function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),k(to(n,a),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),null!=o&&k(I(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=qr(s.shape,t,n,a,r,o,i),f=je.runKernelFunc(function(e){return e.avgPool3d(s,l)},{x:s},function(e){return{x:function(){return function(e,t,n,r,o,i,a){var u=Qt(e,"dy","avgPool3dBackprop"),s=Qt(t,"input","avgPool3dBackprop"),c=u,l=s,f=!1;4===s.rank&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),k(5===c.rank,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."}),k(5===l.rank,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."}),null==o&&(o=[1,1,1]),k(to(r,o),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),null!=a&&k(I(i),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."});var p=qr(l.shape,n,r,o,i,a),d=je.runKernelFunc(function(e){return e.avgPool3dBackprop(c,l,p)},{dy5D:c,input5D:l});return f?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}(e,s,t,n,a,r,o)}}});return f=f.cast(s.dtype),c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),xc=ln({slice_:function(e,t,n){var r,o,i=Qt(e,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(e){k(-1!==e,function(){return"slice() does not support negative begin indexing."})}),o=(o=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map(function(e,t){return e>=0?e:(k(-1===e,function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."}),i.shape[t]-r[t])}),Rr(i,r,o);var a=i.shape,u={begin:r,size:o};return je.runKernelFunc(function(e){return e.slice(i,r,o)},{x:i},function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],a[n]-r[n]-o[n]]);return{x:function(){return e.pad(t)}}},"Slice",u)}}),wc=ln({slice1d_:function(e,t,n){var r=Qt(e,"x","slice1d");return k(1===r.rank,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),xc(r,[t],[n])}}),Cc=ln({slice2d_:function(e,t,n){var r=Qt(e,"x","slice2d");return k(2===r.rank,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),xc(r,t,n)}}),Ec=ln({slice3d_:function(e,t,n){var r=Qt(e,"x","slice3d");return k(3===r.rank,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),xc(r,t,n)}}),kc=ln({slice4d_:function(e,t,n){var r=Qt(e,"x","slice4d");return k(4===r.rank,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),xc(r,t,n)}});function _c(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(nn(t.shape,r))),e.rank<n.rank&&(e=e.reshape(nn(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==o?r:r.transpose(o)}}}var Sc=ln({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Qt(e,"x","all","bool"),o=F(t,r.shape),i=o,a=on(i,r.rank);null!=a&&(r=r.transpose(a),i=un(i.length,r.rank));var u=je.runKernelFunc(function(e){return e.all(r,i)},{$x:r});if(n){var s=nn(u.shape,o);return u.reshape(s)}return u}}),Oc=ln({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Qt(e,"x","any","bool"),o=F(t,r.shape),i=o,a=on(i,r.rank);null!=a&&(r=r.transpose(a),i=un(i.length,r.rank));var u=je.runKernelFunc(function(e){return e.any(r,i)},{$x:r});if(n){var s=nn(u.shape,o);return u.reshape(s)}return u}}),Tc=ln({argMax_:function(e,t){void 0===t&&(t=0);var n=Qt(e,"x","argMax");null==t&&(t=0);var r=F(t,n.shape),o=on(r,n.rank);null!=o&&(n=n.transpose(o),r=un(r.length,n.rank));var i={axis:r[0]},a=[n];return je.runKernelFunc(function(e,t){var o=e.argMax(n,r[0]);return t([n]),o},{x:n},function(e,t){var n=t[0];return{x:function(){return Sn(n)}}},"ArgMax",i,a)}}),Rc=ln({argMin_:function(e,t){void 0===t&&(t=0);var n=Qt(e,"x","argMin");null==t&&(t=0);var r=F(t,n.shape),o=on(r,n.rank);return null!=o&&(n=n.transpose(o),r=un(r.length,n.rank)),je.runKernelFunc(function(e,t){var o=e.argMin(n,r[0]);return t([n]),o},{$x:n},function(e,t){var n=t[0];return{$x:function(){return Sn(n)}}})}}),Ic=ln({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Qt(e,"x","logSumExp"),o=F(t,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),u=i.reshape(a.shape).add(a);if(n){var s=nn(u.shape,o);return u.reshape(s)}return u}}),Ac=ln({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Qt(e,"x","max"),o=r,i=F(t,r.shape),a=i,u=on(a,r.rank);null!=u&&(r=r.transpose(u),a=un(a.length,r.rank));var s=[r],c=je.runKernelFunc(function(e,t){var n=e.max(r,a);return t([o,n]),n},{x:r},function(e,t){return _c(e,t[1],t[0],i,u)},"Max",{axes:a},s,[!0]);if(n){var l=nn(c.shape,i);c=c.reshape(l)}return c}}),Nc=ln({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Qt(e,"x","mean"),o=F(t,r.shape),i=T(tn(r.shape,o)[1]);return Fr(function(e){var r=mn(i);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return o.forEach(function(e){n[e]=1}),t.reshape(n).mul(wn(e.shape,"float32")).div(i)}}})(r)}}),Dc=ln({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Qt(e,"x","min"),o=r,i=F(t,r.shape),a=i,u=on(a,r.rank);null!=u&&(r=r.transpose(u),a=un(a.length,r.rank));var s=[r],c=je.runKernelFunc(function(e,t){var n=e.min(r,a);return t([o,n]),n},{x:r},function(e,t){return _c(e,t[1],t[0],i,u)},"Min",{axes:a},s,[!0]);if(n){var l=nn(c.shape,i);c=c.reshape(l)}return c}}),Pc=ln({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=F(t,(e=Qt(e,"x","moments")).shape),o=e.mean(r,n),i=o.shape;n||(i=nn(o.shape,r));var a=e.toFloat().sub(o.reshape(i)).square();return{mean:o,variance:a.mean(r,n)}}}),Mc=ln({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Qt(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=F(t,r.shape);return Fr(function(e){var t=on(o,e.rank),r=o,i=e;null!=t&&(i=e.transpose(t),r=un(r.length,e.rank));var a=function(t){var n=e.shape.slice();return o.forEach(function(e){n[e]=1}),t.reshape(n).mul(wn(e.shape,"float32"))},u={axes:r},s=je.runKernelFunc(function(e){return e.sum(i,r)},{x:i},function(e){return{x:function(){return a(e)}}},"Sum",u);if(n){var c=nn(s.shape,o);s=s.reshape(c)}return{value:s,gradFunc:a}})(r)}}),Fc=ln({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Qt(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var o=F(t,r.shape),i=on(o,r.rank),a=o,u=r;null!=i&&(u=r.transpose(i),a=un(a.length,r.rank));var s=je.runKernelFunc(function(e){return e.prod(u,a)},{permutedX:u});if(n){var c=nn(s.shape,o);s=s.reshape(c)}return s}}),Bc=ln({elu_:function(e){var t=Qt(e,"x","elu");return je.runKernelFunc(function(e,n){var r=e.elu(t);return n([r]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){return je.runKernelFunc(function(t){return t.eluDer(e,n)},{dy:e,y:n})}}})}}),jc=ln({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=Qt(e,"x","leakyRelu");return ms(mn(t).mul(n),n)}}),Lc=ln({prelu_:function(e,t){var n=Qt(e,"x","prelu"),r=Qt(t,"alpha","prelu");return je.runKernelFunc(function(e,t){var o=e.prelu(n,r);return t([n,r]),o},{x:n,alpha:r},function(e,t){var n=t[0],r=t[1],o=n.greater(0);return{x:function(){return as(o,e,e.mul(r))},alpha:function(){var t=as(o,Sn(e),e.mul(n)),i=Vr(r.shape,e.shape);return i.length>0&&(t=t.sum(i)),t.reshape(r.shape)}}},"Prelu")}}),Wc=ln({relu_:function(e){var t=Qt(e,"x","relu");return"bool"===t.dtype?t.toInt():je.runKernelFunc(function(e,n){var r=e.relu(t);return n([t]),r},{x:t},function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}},"Relu")}}),zc=ln({relu6_:function(e){var t=Qt(e,"x","relu6");return"bool"===t.dtype?t.toInt():je.runKernelFunc(function(e,n){var r=e.relu6(t);return n([t]),r},{x:t},function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}},"Relu6")}}),Uc=ln({selu_:function(e){var t=Qt(e,"x","selu");return je.runKernelFunc(function(e,n){var r=e.selu(t);return n([t]),r},{$x:t},function(e,t){var n=t[0];return{$x:function(){var t=n.greater(mn(0)),r=mn(Pa),o=mn(Ma),i=e.mul(o),a=e.mul(r).mul(n.toFloat().exp());return as(t,i,a)}}})}}),Vc=ln({transpose_:function(e,t){var n=Qt(e,"x","transpose");if(null==t&&(t=n.shape.map(function(e,t){return t}).reverse()),k(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(e){k(e>=0&&e<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return je.runKernelFunc(function(e){return e.transpose(n,t)},{x:n},function(e){var n=an(t);return{x:function(){return e.transpose(n)}}},"Transpose",r)}}),Hc=ln({localResponseNormalization_:function(e,t,n,r,o){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var i=Qt(e,"x","localResponseNormalization");k(4===i.rank||3===i.rank,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."}),k(I(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var a=i,u=!1;3===i.rank&&(u=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var s=je.runKernelFunc(function(e,i){var u=e.localResponseNormalization4D(a,t,n,r,o);return i([a,u]),u},{x4D:a},function(e,i){var a=i[0],u=i[1];return{x4D:function(){return je.runKernelFunc(function(i){return i.LRNGrad(e,a,u,t,n,r,o)},{})}}});return u?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),Gc=ln({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(mn(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=Qt(e,"x","norm"),t,n),i=o.shape;if(r){var a=F(n,e.shape);i=nn(o.shape,a)}return o.reshape(i)}}),qc=ln({basicLSTMCell_:function(e,t,n,r,o,i){var a=Qt(e,"forgetBias","basicLSTMCell"),u=Qt(t,"lstmKernel","basicLSTMCell"),s=Qt(n,"lstmBias","basicLSTMCell"),c=Qt(r,"data","basicLSTMCell"),l=Qt(o,"c","basicLSTMCell"),f=Qt(i,"h","basicLSTMCell"),p=c.concat(f,1).matMul(u).add(s),d=p.shape[0],h=p.shape[1]/4,v=[d,h],m=p.slice([0,0],v),g=p.slice([0,h],v),y=p.slice([0,2*h],v),b=p.slice([0,3*h],v),x=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(a.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),Kc=ln({multiRNNCell_:function(e,t,n,r){for(var o=Qt(t,"data","multiRNNCell"),i=Jt(n,"c","multiRNNCell"),a=Jt(r,"h","multiRNNCell"),u=o,s=[],c=0;c<e.length;c++){var l=e[c](u,i[c],a[c]);s.push(l[0]),s.push(l[1]),u=l[1]}var f=[],p=[];for(c=0;c<s.length;c+=2)f.push(s[c]),p.push(s[c+1]);return[f,p]}}),$c=ln({movingAverage_:function(e,t,n,r,o){void 0===o&&(o=!0);var i=Qt(e,"v","movingAverage"),a=Qt(t,"x","movingAverage"),u=Qt(n,"decay","movingAverage");De(i,a),k(R(i.shape,a.shape),function(){return"Shape mismatch in v and x"});var s=mn(1),c=s.sub(u),l=a.sub(i).mul(c);if(o){k(null!=r,function(){return"When using zeroDebias: true, step is required."});var f=Qt(r,"step","movingAverage");l=l.div(s.sub(ks(u,f)))}return i.add(l)}}),Xc=ln({stridedSlice_:function(e,t,n,r,o,i,a,u,s){if(void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===s&&(s=0),null==r&&(r=new Array(t.length)),0!==a)throw new Error("ellipsis mask is not yet supported");var c=Qt(e,"x","stridedSlice"),l=Ir(u),f=c.shape.slice();l.forEach(function(e){t[e]=0,n[e]=1,f.splice(e,0,1)}),c=c.reshape(f);for(var p=0;p<c.rank;p++)t[p]=Nr(o,t,r,c.shape,p),n[p]=Dr(i,n,r,c.shape,p),r[p]=r[p]||1;var d=Ir(s);d.forEach(function(e){n[e]=t[e]+1,r[e]=1});var h=Ar(t,n,r),v=h.filter(function(e,t){return-1===d.indexOf(t)});return r.every(function(e){return 1===e})?xc(c,t,h).reshape(v):je.runKernelFunc(function(e){return e.stridedSlice(c,t,n,r)},{$x:c}).reshape(v)}}),Yc=ln({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=Qt(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var i=je.runKernelFunc(function(e){return e.topk(r,t,n)},{$x:r});return{values:i[0],indices:i[1]}}}),Qc=ln({scatterND_:function(e,t,n){var r=Qt(e,"indices","scatterND","int32"),o=Qt(t,"updates","scatterND");return Or(o,r,n),je.runKernelFunc(function(e){return e.scatterND(r,o,n)},{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),Jc=ln({fft_:function(e){k("complex64"===e.dtype,function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return je.runKernelFunc(function(e){return e.fft(r)},{input:e}).reshape(e.shape)}}),Zc=ln({ifft_:function(e){k("complex64"===e.dtype,function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return je.runKernelFunc(function(e){return e.ifft(r)},{input:e}).reshape(e.shape)}}),el=ln({rfft_:function(e,t){k("float32"===e.dtype,function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],o=e.size/r;if(null!=t&&t<r){var i=e.shape.map(function(e){return 0}),a=e.shape.map(function(e){return e});a[e.shape.length-1]=t,n=e.slice(i,a),r=t}else if(null!=t&&t>r){var u=e.shape.map(function(e){return e});u[e.shape.length-1]=t-r,n=e.concat(Cn(u),e.shape.length-1),r=t}else n=e;var s=n.zerosLike(),c=fn(n,s).as2D(o,r),l=Jc(c),f=Math.floor(r/2)+1,p=pn(l),d=dn(l),h=p.split([f,r-f],p.shape.length-1),v=d.split([f,r-f],d.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=f,fn(h[0],v[0]).reshape(m)}}),tl=ln({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=Zc(r);return pn(o)}var i=[n,2*(t-1)],a=pn(e).as2D(n,t),u=dn(e).as2D(n,t),s=a.slice([0,1],[n,t-2]).reverse(1),c=u.slice([0,1],[n,t-2]).reverse(1).mul(mn(-1)),l=a.concat(s,1),f=u.concat(c,1);return r=fn(l,f).as2D(i[0],i[1]),o=Zc(r),pn(o)}}),nl=Object.freeze({fft:Jc,ifft:Zc,rfft:el,irfft:tl}),rl=ln({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var o=Qt(e,"sparseIndices","sparseToDense","int32"),i=Qt(t,"sparseValues","sparseToDense"),a=Qt(r,"defaultValue","sparseToDense",i.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var o=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+i+".");var a=t.size;if(0!==t.rank&&(1!==t.rank||a!==o))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+o+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,a),je.runKernelFunc(function(e){return e.sparseToDense(o,i,n,a)},{$sparseIndices:o,$sparseValues:i,$defaultValue:a})}}),ol=ln({gatherND_:function(e,t){var n=Qt(t,"indices","gatherND","int32"),r=Qt(e,"x","gatherND");return je.runKernelFunc(function(e){return e.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),il=ln({diag_:function(e){var t=Qt(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return je.runKernelFunc(function(e){return e.diag(t)},{$x:t}).reshape(n)}}),al=ln({dropout_:function(e,t,n,r){var o=Qt(e,"x","dropout");if(k("float32"===o.dtype,function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),k(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),0===t)return e instanceof we?o.clone():o;var i=function(e,t){if(null==t)return e.shape.slice();if(R(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),a=1-t,u=lr(i,0,1,"float32",r).add(a).floor().div(a);return o.mul(u)}});function ul(e,t,n){for(var r=1-e%2,o=new Float32Array(e),i=0;i<e;++i){var a=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(a)}return gn(o,"float32")}var sl,cl=ln({hannWindow_:function(e){return ul(e,.5,.5)}}),ll=ln({hammingWindow_:function(e){return ul(e,.54,.46)}}),fl=ln({frame_:function(e,t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0);for(var i=0,a=[];i+t<=e.size;)a.push(xc(e,i,t)),i+=n;if(r)for(;i<e.size;){var u=i+t-e.size,s=On([xc(e,i,t-u),En([u],o)]);a.push(s),i+=n}return 0===a.length?yn([],[0,t]):On(a).as2D(a.length,t)}}),pl=ln({stft_:function(e,t,n,r,o){var i;void 0===o&&(o=cl),null==r&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var a=fl(e,t,n),u=Cs(a,o(t)),s=[],c=0;c<a.shape[0];c++)s.push(el(u.slice([c,0],[1,t]),r));return On(s)}}),dl=Object.freeze({hannWindow:cl,hammingWindow:ll,frame:fl,stft:pl});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(sl||(sl={}));var hl=ln({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=sl.SUM_BY_NONZERO_WEIGHTS);var o=Qt(e,"labels","absoluteDifference"),i=Qt(t,"predictions","absoluteDifference"),a=null;null!=n&&(a=Qt(n,"weights","absoluteDifference")),_(o.shape,i.shape,"Error in absoluteDifference: ");var u=o.sub(i).abs();return vl(u,a,r)}}),vl=ln({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=sl.SUM_BY_NONZERO_WEIGHTS);var r=Qt(e,"losses","computeWeightedLoss"),o=null;null!=t&&(o=Qt(t,"weights","computeWeightedLoss"));var i=null==o?r:r.mul(o);if(n===sl.NONE)return i;if(n===sl.SUM)return i.sum();if(n===sl.MEAN){if(null==o)return i.mean();var a=r.size/o.size,u=i.sum().div(o.sum());return a>1?u.div(mn(a)):u}if(n===sl.SUM_BY_NONZERO_WEIGHTS){if(null==o)return i.sum().div(mn(r.size));var s=o.mul(wn(r.shape)).notEqual(mn(0)).sum().toFloat();return i.sum().div(s)}throw Error("Unknown reduction: "+n)}}),ml=ln({cosineDistance_:function(e,t,n,r,o){void 0===o&&(o=sl.SUM_BY_NONZERO_WEIGHTS);var i=Qt(e,"labels","cosineDistance"),a=Qt(t,"predictions","cosineDistance"),u=null;null!=r&&(u=Qt(r,"weights","cosineDistance")),_(i.shape,a.shape,"Error in cosineDistance: ");var s=mn(1).sub(i.mul(a).sum(n,!0));return vl(s,u,o)}}),gl=ln({hingeLoss_:function(e,t,n,r){void 0===r&&(r=sl.SUM_BY_NONZERO_WEIGHTS);var o=Qt(e,"labels","hingeLoss"),i=Qt(t,"predictions","hingeLoss"),a=null;null!=n&&(a=Qt(n,"weights","hingeLoss")),_(o.shape,i.shape,"Error in hingeLoss: ");var u=mn(1);o=mn(2).mul(o).sub(u);var s=u.sub(o.mul(i)).relu();return vl(s,a,r)}}),yl=ln({huberLoss_:function(e,t,n,r,o){void 0===r&&(r=1),void 0===o&&(o=sl.SUM_BY_NONZERO_WEIGHTS);var i=Qt(e,"labels","huberLoss"),a=Qt(t,"predictions","huberLoss"),u=null;null!=n&&(u=Qt(n,"weights","huberLoss")),_(i.shape,a.shape,"Error in huberLoss: ");var s=mn(r),c=a.sub(i).abs(),l=ys(c,s),f=c.sub(l),p=mn(.5).mul(l.square()).add(s.mul(f));return vl(p,u,o)}}),bl=ln({logLoss_:function(e,t,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=sl.SUM_BY_NONZERO_WEIGHTS);var i=Qt(e,"labels","logLoss"),a=Qt(t,"predictions","logLoss"),u=null;null!=n&&(u=Qt(n,"weights","logLoss")),_(i.shape,a.shape,"Error in logLoss: ");var s=mn(1),c=mn(r),l=i.mul(a.add(c).log()).neg().sub(s.sub(i).mul(s.sub(a).add(c).log()));return vl(l,u,o)}}),xl=ln({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=sl.SUM_BY_NONZERO_WEIGHTS);var o=Qt(e,"labels","meanSquaredError"),i=Qt(t,"predictions","meanSquaredError"),a=null;null!=n&&(a=Qt(n,"weights","meanSquaredError")),_(o.shape,i.shape,"Error in meanSquaredError: ");var u=o.squaredDifference(i);return vl(u,a,r)}}),wl=ln({sigmoidCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=sl.SUM_BY_NONZERO_WEIGHTS);var i=Qt(e,"multiClassLabels","sigmoidCrossEntropy"),a=Qt(t,"logits","sigmoidCrossEntropy"),u=null;if(null!=n&&(u=Qt(n,"weights","sigmoidCrossEntropy")),_(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var s=mn(r),c=mn(1),l=mn(.5);i=i.mul(c.sub(s)).add(l.mul(s))}var f=function(e,t){var n=Qt(e,"labels","sigmoidCrossEntropyWithLogits"),r=Qt(t,"logits","sigmoidCrossEntropyWithLogits");_(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),i=r.mul(n),a=r.abs().neg().exp().log1p();return o.sub(i).add(a)}(i,a);return vl(f,u,o)}}),Cl=ln({softmaxCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=sl.SUM_BY_NONZERO_WEIGHTS);var i=Qt(e,"onehotLabels","softmaxCrossEntropy"),a=Qt(t,"logits","softmaxCrossEntropy"),u=null;if(null!=n&&(u=Qt(n,"weights","softmaxCrossEntropy")),_(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var s=mn(r),c=mn(1),l=mn(i.shape[1]);i=i.mul(c.sub(s)).add(s.div(l))}var f=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return Fr(function(e,t,r){var o=t.logSumExp([n],!0),i=t.toFloat().sub(o);return r([e,i]),{value:i.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],o=t[1],i=nn(e.shape,[n]);return[e.reshape(i).mul(r.toFloat().sub(o.exp())),e.reshape(i).mul(o.exp().sub(r.toFloat()))]}}})(e,t)}(i,a);return vl(f,u,o)}}),El=Object.freeze({get Reduction(){return sl},absoluteDifference:hl,computeWeightedLoss:vl,cosineDistance:ml,hingeLoss:gl,huberLoss:yl,logLoss:bl,meanSquaredError:xl,sigmoidCrossEntropy:wl,softmaxCrossEntropy:Cl});function kl(e,t){return void 0===t&&(t=!1),je.tidy(function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=Zn(n),i=e.clone(),a=yn([[1]],[1,1]),u=a.clone(),s=n>=r?r:n,c=function(e){var t,s=i,c=u,l=o;t=je.tidy(function(){var t=i.slice([e,e],[n-e,1]),s=t.norm(),c=i.slice([e,e],[1,1]),l=yn([[-1]]).where(c.greater(0),yn([[1]])),f=c.sub(l.mul(s)),p=t.div(f);u=1===p.shape[0]?a.clone():a.concat(p.slice([1,0],[p.shape[0]-1,p.shape[1]]),0);var d=l.matMul(f).div(s).neg(),h=i.slice([e,0],[n-e,r]),v=d.mul(u);if(0===e)i=h.sub(v.matMul(u.transpose().matMul(h)));else{var m=h.sub(v.matMul(u.transpose().matMul(h)));i=i.slice([0,0],[e,r]).concat(m,0)}var g=o.slice([0,e],[n,o.shape[1]-e]);if(0===e)o=g.sub(g.matMul(u).matMul(v.transpose()));else{var y=g.sub(g.matMul(u).matMul(v.transpose()));o=o.slice([0,0],[n,e]).concat(y,1)}return[u,i,o]}),u=t[0],i=t[1],o=t[2],Kt([s,c,l])},l=0;l<s;++l)c(l);return!t&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]})}var _l=ln({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=Qt(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,i=r.shape.slice(-2),a=i[0],u=i[1];if(!(t<=a))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+a+").");if(!(n<=u))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+u+").");t<0&&(t=a),n<0&&(n=u);var s=kn(0,a,1,"int32").reshape([-1,1]),c=kn(0,u,1,"int32"),l=Os(s,c),f=ns(l.lessEqual(mn(+t,"int32")),l.greaterEqual(mn(-n,"int32"))),p=Cn([a,u],r.dtype);return hr(gr(r.reshape([-1,a,u])).map(function(e){return as(f,e,p)})).reshape(o)}}),Sl=ln({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,k(null!=e&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(t){k(e[t].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"})},o=1;o<e.length;++o)r(o)}else t=!0,e=Nn(e,e.shape[0],0).map(function(e){return dr(e,[0])});k(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],a=e,u=function(e){i.push(je.tidy(function(){var t=a[e];if(e>0)for(var n=0;n<e;++n){var r=Mc(i[n].mulStrict(t)).mul(i[n]);t=t.sub(r)}return t.div(Gc(t,"euclidean"))}))};for(o=0;o<e.length;++o)u(o);return t?hr(i,0):i}}),Ol=ln({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return kl(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(e,t){return e*t}),r=gr(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];return r.forEach(function(e){var n=kl(e,t),r=n[0],a=n[1];o.push(r),i.push(a)}),[hr(o,0).reshape(e.shape),hr(i,0).reshape(e.shape)]}}),Tl=Object.freeze({bandPart:_l,gramSchmidt:Sl,qr:Ol});function Rl(e,t,n,r,o,i){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==i&&(i=0);var a=e.shape[0];return n=Math.min(n,a),k(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),k(2===e.rank,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),k(4===e.shape[1],function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),k(1===t.rank,function(){return"scores must be a 1D tensor"}),k(t.shape[0]===a,function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+t.shape[0]}),k(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}var Il=ln({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=Qt(e,"images","resizeBilinear");k(3===r.rank||4===r.rank,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),k(2===t.length,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],u=t[1],s=je.runKernelFunc(function(e,t){return t([o]),e.resizeBilinear(o,a,u,n)},{x:o},function(e,t){return{x:function(){return je.runKernelFunc(function(r){return r.resizeBilinearBackprop(e,t[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:u});return i?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),Al=ln({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=Qt(e,"images","resizeNearestNeighbor");k(3===r.rank||4===r.rank,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),k(2===t.length,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),k("float32"===r.dtype||"int32"===r.dtype,function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],u=t[1],s=je.runKernelFunc(function(e,t){return t([o]),e.resizeNearestNeighbor(o,a,u,n)},{batchImages:o},function(e,t){return{batchImages:function(){return je.runKernelFunc(function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)},{})}}});return i?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),Nl=ln({nonMaxSuppression_:function(e,t,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var i=Qt(e,"boxes","nonMaxSuppression"),a=Qt(t,"scores","nonMaxSuppression"),u=Rl(i,a,n,r,o);n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold;var s={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return je.runKernelFunc(function(e){return e.nonMaxSuppression(i,a,n,r,o)},{boxes:i,scores:a},null,"NonMaxSuppressionV3",s)}}),Dl=ln({nonMaxSuppressionWithScore_:function(e,t,n,r,o,i){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===i&&(i=0);var a=Qt(e,"boxes","nonMaxSuppression"),u=Qt(t,"scores","nonMaxSuppression"),s=Rl(a,u,n,r,o,i),c={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:o=s.scoreThreshold,softNmsSigma:i=s.softNmsSigma},l=je.runKernel("NonMaxSuppressionV5",{boxes:a,scores:u},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),Pl=ln({cropAndResize_:function(e,t,n,r,o,i){var a=Qt(e,"image","cropAndResize"),u=Qt(t,"boxes","cropAndResize","float32"),s=Qt(n,"boxInd","cropAndResize","int32");o=o||"bilinear",i=i||0;var c=u.shape[0];return k(4===a.rank,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."}),k(2===u.rank&&4===u.shape[1],function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+u.shape+"."}),k(1===s.rank&&s.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+u.shape+"."}),k(2===r.length,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),k(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),k("bilinear"===o||"nearest"===o,function(){return"method must be bilinear or nearest, but was "+o}),je.runKernelFunc(function(e,t){return e.cropAndResize(a,u,s,r,o,i)},{images:a,boxes:u,boxInd:s},null,"CropAndResize",{method:o,extrapolationValue:i,cropSize:r})}}),Ml=Object.freeze({resizeBilinear:Il,resizeNearestNeighbor:Al,nonMaxSuppression:Nl,nonMaxSuppressionAsync:function(e,t,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),s(this,void 0,void 0,function(){var i,a,u,s,l,f,p;return c(this,function(c){switch(c.label){case 0:return i=Qt(e,"boxes","nonMaxSuppressionAsync"),a=Qt(t,"scores","nonMaxSuppressionAsync"),u=Rl(i,a,n,r,o),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,[4,Promise.all([i.data(),a.data()])];case 1:return s=c.sent(),l=s[0],f=s[1],p=po(l,f,n,r,o),i!==e&&i.dispose(),a!==t&&a.dispose(),[2,p]}})})},nonMaxSuppressionWithScore:Dl,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,o,i){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===i&&(i=0),s(this,void 0,void 0,function(){var a,u,s,l,f,p,d;return c(this,function(c){switch(c.label){case 0:return a=Qt(e,"boxes","nonMaxSuppressionAsync"),u=Qt(t,"scores","nonMaxSuppressionAsync"),s=Rl(a,u,n,r,o,i),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,i=s.softNmsSigma,[4,Promise.all([a.data(),u.data()])];case 1:return l=c.sent(),f=l[0],p=l[1],d=ho(f,p,n,r,o,i),a!==e&&a.dispose(),u!==t&&u.dispose(),[2,d]}})})},cropAndResize:Pl}),Fl=function(e,t){return!(e>0)||"linear"===t},Bl=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},jl=function(e,t){var n=t,r=Vr(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},Ll=function(e,t,n){if("linear"===t)return e;if("relu"===t)return Wc(e);if("elu"===t)return Bc(e);if("relu6"===t)return zc(e);if("prelu"===t)return Lc(e,n);throw new Error("Unknown fused activation "+t+".")},Wl=ln({fusedMatMul_:function(e){var t,n=e.a,r=e.b,o=e.transposeA,i=void 0!==o&&o,a=e.transposeB,u=void 0!==a&&a,s=e.bias,c=e.activation,l=void 0===c?"linear":c,f=e.preluActivationWeights;if(!1===Fl(je.state.gradientDepth,l)){var p=ic(n,r,i,u);return null!=s&&(p=ss(p,s)),Ll(p,l,f)}var d=Qt(n,"a","fused matMul"),h=Qt(r,"b","fused matMul");t=Ne(d,h),d=t[0],h=t[1];var v=i?d.shape[d.rank-2]:d.shape[d.rank-1],m=u?h.shape[h.rank-1]:h.shape[h.rank-2],g=i?d.shape[d.rank-1]:d.shape[d.rank-2],y=u?h.shape[h.rank-2]:h.shape[h.rank-1],b=d.shape.slice(0,-2),x=h.shape.slice(0,-2),w=T(b),C=T(x);k(d.rank>=2&&h.rank>=2&&d.rank===h.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+d.rank+" and "+h.rank+"."}),k(R(b,x),function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+x+") of Tensors with shapes "+d.shape+" and "+h.shape+" must match."}),k(v===m,function(){return"Error in fused matMul: inner shapes ("+v+") and ("+m+") of Tensors with shapes "+d.shape+" and "+h.shape+" and transposeA="+i+" and transposeB="+u+" must match."});var E,_,S=d.shape.slice(0,-2).concat([g,y]),O=i?d.as3D(w,v,g):d.as3D(w,g,v),I=u?h.as3D(C,y,m):h.as3D(C,m,y);null!=s&&Hr(S,(E=Ne(E=Qt(s,"bias","fused matMul"),d)[0]).shape),null!=f&&(_=Qt(f,"prelu weights","fused matMul"));var A={a:O,b:I};null!=s&&(A.bias=E),null!=f&&(A.preluActivationWeights=_);var N=[O,I];return je.runKernelFunc(function(e,t){var n=e.fusedBatchMatMul({a:O,b:I,transposeA:i,transposeB:u,bias:E,activation:l,preluActivationWeights:_});return t([O,I,n]),n},A,function(e,t){var n=t[0],r=t[1],o=t[2],a=Bl(e,o,l),c={};return null!=s&&(c={bias:function(){return jl(E,a)}}),i||u?!i&&u?Object.assign({a:function(){return a.matMul(r,!1,!1)},b:function(){return a.matMul(n,!0,!1)}},c):i&&!u?Object.assign({a:function(){return r.matMul(a,!1,!0)},b:function(){return n.matMul(a,!1,!1)}},c):Object.assign({a:function(){return r.matMul(a,!0,!0)},b:function(){return a.matMul(n,!0,!0)}},c):Object.assign({a:function(){return a.matMul(r,!1,!0)},b:function(){return n.matMul(a,!0,!1)}},c)},"_FusedMatMul",{transposeA:i,transposeB:u,activation:l},N,[!0]).reshape(S)}}),zl=ln({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=void 0===i?"NHWC":i,u=e.dilations,s=void 0===u?[1,1]:u,c=e.dimRoundingMode,l=e.bias,f=e.activation,p=void 0===f?"linear":f,d=e.preluActivationWeights;if(p=p||"linear",!1===Fl(je.state.gradientDepth,p)){var h=Xs(t,n,r,o,a,s,c);return null!=l&&(h=ss(h,l)),Ll(h,p,d)}var v=Qt(t,"x","conv2d"),m=Qt(n,"filter","conv2d"),g=v,y=!1;3===v.rank&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),k(4===g.rank,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."}),k(4===m.rank,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."}),null!=c&&k(I(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+o+"."}),k(g.shape[3]===m.shape[2],function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."}),k(to(r,s),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"}),k("NHWC"===a,function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."});var b,x,w=Kr(g.shape,m.shape,r,s,o,c);null!=l&&(b=Ne(b=Qt(l,"bias","fused conv2d"),v)[0],Hr(w.outShape,b.shape)),null!=d&&(x=Qt(d,"prelu weights","fused conv2d"));var C={x:g,filter:m};null!=l&&(C.bias=b),null!=d&&(C.preluActivationWeights=x);var E=[m,g],_=je.runKernelFunc(function(e,t){var n=e.fusedConv2d({input:g,filter:m,convInfo:w,bias:b,activation:p,preluActivationWeights:x});return t([m,g,n]),n},C,function(e,t){var n=t,i=n[0],a=n[1],u=n[2],c=Bl(e,u,p);k(eo(s),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"});var f={};return null!=l&&(f={bias:function(){return jl(b,c)}}),Object.assign({x:function(){return Js(a.shape,c,i,r,o)},filter:function(){return Qs(a,c,i.shape,r,o)}},f)},"FusedConv2D",{convInfo:w,activation:p},E,[!0]);return y?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),Ul=ln({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=void 0===i?"NHWC":i,u=e.dilations,s=void 0===u?[1,1]:u,c=e.dimRoundingMode,l=e.bias,f=e.activation,p=void 0===f?"linear":f,d=e.preluActivationWeights;if(!1===Fl(je.state.gradientDepth,p)){var h=Zs(t,n,r,o,a,s,c);return null!=l&&(h=ss(h,l)),Ll(h,p,d)}var v=Qt(t,"x","depthwiseConv2d"),m=Qt(n,"filter","depthwiseConv2d"),g=v,y=!1;3===v.rank&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),k(4===g.rank,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."}),k(4===m.rank,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."}),k(g.shape[3]===m.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."}),null==s&&(s=[1,1]),k(to(r,s),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"}),null!=c&&k(I(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+o+"."});var b,x,w=Kr(g.shape,m.shape,r,s,o,c,!0);null!=l&&(b=Ne(b=Qt(l,"bias","fused conv2d"),v)[0],Hr(w.outShape,b.shape)),null!=d&&(x=Qt(d,"prelu weights","fused depthwiseConv2d"));var C={x:g,filter:m};null!=l&&(C.bias=b),null!=d&&(C.preluActivationWeights=x);var E=[m,g],_=je.runKernelFunc(function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:m,convInfo:w,bias:b,activation:p,preluActivationWeights:x});return t([m,g,n]),n},C,function(e,t){k(eo(s),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"});var n=t[0],r=t[1],o=t[2],i=Bl(e,o,p),a={};return null!=l&&(a={bias:function(){return jl(b,i)}}),Object.assign({x:function(){return ec(r.shape,i,n,w)},filter:function(){return tc(r,i,n.shape,w)}},a)},"FusedDepthwiseConv2D",{convInfo:w,activation:p},E,[!0]);return y?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),Vl=Object.freeze({matMul:Wl,conv2d:zl,depthwiseConv2d:Ul}),Hl=Object.freeze({image:Ml,linalg:Tl,losses:El,spectral:nl,fused:Vl,signal:dl,square:iu,squaredDifference:uu,conv1d:$s,conv2d:Xs,conv3d:Ys,depthwiseConv2d:Zs,separableConv2d:nc,conv2dTranspose:rc,conv3dTranspose:oc,op:ln,batchNormalization2d:$u,batchNormalization3d:Xu,batchNormalization4d:Yu,batchNormalization:Qu,batchNorm:Ju,batchNorm2d:Zu,batchNorm3d:es,batchNorm4d:ts,booleanMaskAsync:function(e,t,n){return s(this,void 0,void 0,function(){var r,o,i,a,u,s,l,f,p,d,h,v,m;return c(this,function(c){switch(c.label){case 0:for(r=Qt(e,"tensor","boolMask"),o=Qt(t,"mask","boolMask","bool"),i=null==n?0:n,a=o.rank,u=r.shape,k(a>0,function(){return"mask cannot be scalar"}),_(u.slice(i,i+a),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),s=1,l=i;l<i+a;l++)s*=u[l];return f=u.slice(0,i).concat([s],u.slice(i+a)),p=r.reshape(f),d=o.reshape([-1]),[4,us(d)];case 1:return h=c.sent(),v=h.squeeze([1]),m=Vs(p,v,i),e!==r&&r.dispose(),t!==o&&o.dispose(),v.dispose(),p.dispose(),d.dispose(),h.dispose(),[2,m]}})})},complex:fn,real:pn,imag:dn,concat:On,concat1d:Tn,concat2d:Rn,concat3d:In,concat4d:An,split:Nn,matMul:ic,dot:ac,outerProduct:uc,reverse:sc,reverse1d:cc,reverse2d:lc,reverse3d:fc,reverse4d:pc,maxPool:vc,avgPool:mc,pool:gc,maxPool3d:yc,avgPool3d:bc,slice:xc,slice1d:wc,slice2d:Cc,slice3d:Ec,slice4d:kc,abs:su,acos:cu,acosh:lu,asin:fu,asinh:pu,atan:du,atanh:hu,ceil:vu,clipByValue:mu,cos:gu,cosh:yu,erf:bu,exp:xu,expm1:wu,floor:Cu,log:Eu,log1p:ku,logSigmoid:_u,neg:Su,reciprocal:Ou,round:Tu,rsqrt:Ru,sigmoid:Iu,sign:Au,isNaN:Nu,isInf:Du,isFinite:Pu,sin:Mu,sinh:Fu,softplus:Bu,sqrt:ju,step:Lu,tan:Wu,tanh:zu,all:Sc,any:Oc,argMax:Tc,argMin:Rc,logSumExp:Ic,max:Ac,mean:Nc,min:Dc,moments:Pc,sum:Mc,prod:Fc,equal:Rs,equalStrict:Is,greater:As,greaterEqual:Ns,greaterEqualStrict:Ds,greaterStrict:Ps,less:Ms,lessEqual:Fs,lessEqualStrict:Bs,lessStrict:js,notEqual:Ls,notEqualStrict:Ws,add:ss,addN:cs,addStrict:ls,atan2:fs,div:ps,divNoNan:ds,divStrict:hs,floorDiv:vs,maximum:ms,maximumStrict:gs,minimum:ys,minimumStrict:bs,mod:xs,modStrict:ws,mul:Cs,mulStrict:Es,pow:ks,powStrict:_s,squaredDifferenceStrict:Ss,sub:Os,subStrict:Ts,elu:Bc,leakyRelu:jc,prelu:Lc,relu:Wc,relu6:zc,selu:Uc,logicalAnd:ns,logicalNot:rs,logicalOr:os,logicalXor:is,where:as,whereAsync:us,buffer:Gn,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:qn,broadcastTo:Kn,cast:$n,clone:Xn,cumsum:Yn,depthToSpace:Qn,expandDims:Jn,eye:Zn,multinomial:er,oneHot:tr,pad:nr,pad1d:rr,pad2d:or,pad3d:ir,pad4d:ar,rand:ur,randomNormal:sr,randomGamma:cr,randomUniform:lr,reshape:fr,spaceToBatchND:pr,squeeze:dr,stack:hr,tile:vr,truncatedNormal:mr,unstack:gr,setdiff1dAsync:function(e,t){return s(this,void 0,void 0,function(){var n,r,o,i,a,u,s,l,f,p;return c(this,function(c){switch(c.label){case 0:return n=Qt(e,"x","setdiff1d"),r=Qt(t,"y","setdiff1d"),k(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),k(1===n.rank,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),k(1===r.rank,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=c.sent(),[4,r.data()];case 2:for(i=c.sent(),a=new Set(i),u=0,f=0;f<o.length;f++)a.has(o[f])||u++;for(s=new ge([u],n.dtype),l=new ge([u],"int32"),f=0,p=0;f<o.length;f++)a.has(o[f])||(s.values[p]=o[f],l.values[p]=f,p++);return[2,[s.toTensor(),l.toTensor()]]}})})},fill:En,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return je.runKernelFunc(function(r){return r.linspace(e,t,n)},{})},ones:wn,range:kn,scalar:mn,tensor:hn,tensor1d:gn,tensor2d:yn,tensor3d:bn,tensor4d:xn,tensor5d:function(e,t,n){if(S(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Xt(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return vn(e,t,r,n)},tensor6d:function(e,t,n){if(S(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Xt(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return vn(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),je.makeVariable(e,t,n,r)},zeros:Cn,onesLike:_n,zerosLike:Sn,transpose:Vc,softmax:Br,logSoftmax:jr,localResponseNormalization:Hc,norm:Gc,gather:Vs,unsortedSegmentSum:Hs,basicLSTMCell:qc,multiRNNCell:Kc,movingAverage:$c,stridedSlice:Xc,topk:Yc,scatterND:Qc,fft:Jc,ifft:Zc,rfft:el,irfft:tl,sparseToDense:rl,gatherND:ol,diag:il,dropout:al,hannWindow:cl,hammingWindow:ll,frame:fl,stft:pl,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),s(this,void 0,void 0,function(){var r,o,i,a,u,s,l,f,p,d,h,v,m,g;return c(this,function(c){switch(c.label){case 0:return r=Qt(e,"predictions","inTopK"),o=Qt(t,"targets","inTopK"),k(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),k(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),_(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],k(n>0&&n<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n}),[4,r.data()];case 1:return a=c.sent(),[4,o.data()];case 2:for(u=c.sent(),s=[a.length/i,i],f=s[1],p=j("bool",l=s[0]),d=0;d<l;d++){for(h=d*f,v=a.subarray(h,h+f),m=[],g=0;g<v.length;g++)m.push({value:v[g],index:g});for(m.sort(function(e,t){return t.value-e.value}),p[d]=0,g=0;g<n;g++)if(m[g].index===u[d]){p[d]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),[2,hn(p,o.shape,"bool")]}})})}});function Gl(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(e){null!=e&&k("complex64"!==e.dtype,function(){return t+" does not support complex64 tensors."})})}function ql(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var Kl=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new Lr(t,je),t}return u(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,f().get("IS_NODE")&&$t("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){return[2,this.readSync(e)]})})},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?ao(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map(function(e){return ae(e)})}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return Gn(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return je.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return s(this,void 0,void 0,function(){var t;return c(this,function(n){return t=re(),e(),[2,{kernelMs:re()-t}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:je.keep(e.clone()),imag:je.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(Gl(e,"slice"),Pr(e.shape,t,n)){var r=Mr(t,e.strides),o=T(n);return hn(this.readSync(e.dataId).subarray(r,r+o),n,e.dtype)}for(var i=Gn(n,e.dtype),a=this.bufferSync(e),u=0;u<i.size;++u){var s=i.indexToLoc(u).map(function(e,n){return e+t[n]});i.values[u]=a.get.apply(a,s)}return i.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){Gl(e,"stridedSlice");var o=Ar(t,n,r);if(o.some(function(e){return 0===e}))return hn([],o);for(var i=Gn(o,e.dtype),a=this.bufferSync(e),u=0;u<i.size;u++){for(var s=i.indexToLoc(u),c=new Array(s.length),l=0;l<c.length;l++)c[l]=s[l]*r[l]+t[l];i.set.apply(i,[a.get.apply(a,c)].concat(s))}return i.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=Gn([e.size,e.size],e.dtype),r=n.values,o=0;o<t.length;o++)r[o*e.size+o]=t[o];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,i=0;i<e.rank;i++)i!==t&&(r[o++]=e.shape[i]);var a=new Array(e.rank).fill(0),u=e.shape.slice();u[t]=1;var s=new Array(n);for(i=0;i<s.length;i++)a[t]=i,s[i]=this.slice(e,a,u).reshape(r);return s},t.prototype.reverse=function(e,t){Gl(e,"reverse");for(var n=Gn(e.shape,e.dtype),r=this.bufferSync(e),o=function(o){var i=n.indexToLoc(o),a=i.slice();t.forEach(function(t){return a[t]=e.shape[t]-1-a[t]}),n.set.apply(n,[r.get.apply(r,a)].concat(i))},i=0;i<n.size;i++)o(i);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map(function(e){return pn(e)}),o=e.map(function(e){return dn(e)});return fn(this.concat(r,t),this.concat(o,t))}var i=e.map(function(e){var n=T(e.shape.slice(t));return e.as2D(-1,n)}),a=cn(i.map(function(e){return e.shape}),1),u=Gn(a,e[0].dtype).values;if(1===i[0].shape[0]){var s=0;i.forEach(function(e){u.set(n.readSync(e.dataId),s),s+=e.size})}else{var c=0;i.forEach(function(e){for(var t=n.readSync(e.dataId),r=0,o=0;o<e.shape[0];++o)for(var i=o*a[1]+c,s=0;s<e.shape[1];++s)u[i+s]=t[r++];c+=e.shape[1]})}var l=cn(e.map(function(e){return e.shape}),t);return hn(u,l,e[0].dtype)},t.prototype.neg=function(e){return Gl(e,"neg"),this.multiply(mn(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e+n,imag:t+r}}):this.broadcastedBinaryOp(e,t,Ie(e.dtype,t.dtype),function(e,t){return e+t})},t.prototype.addN=function(e){var t=this;Gl(e,"addN");for(var n=e.map(function(e){return t.readSync(e.dataId)}),r=Gn(e[0].shape,e[0].dtype),o=r.values,i=0;i<e.length;i++)for(var a=n[i],u=0;u<o.length;u++)o[u]+=a[u];return r.toTensor()},t.prototype.softmax=function(e,t){var n=F([t],e.shape),r=this.max(e,n),o=nn(r.shape,n),i=this.subtract(e,r.reshape(o)),a=this.exp(i),u=this.sum(a,n).reshape(o);return this.realDivide(a,u)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e-n,imag:t-r}}):this.broadcastedBinaryOp(e,t,Ie(e.dtype,t.dtype),function(e,t){return e-t})},t.prototype.pow=function(e,t){return Gl([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.pow(e,t)})},t.prototype.batchMatMul=function(e,t,n,r){Gl([e,t],"matMul");for(var o=n?e.shape[1]:e.shape[2],i=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],u=e.shape[0],s=this.readSync(e.dataId),c=this.readSync(t.dataId),l=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],f=l[0],p=l[1],d=l[2],h=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],v=h[0],m=h[1],g=h[2],y=i*a,b=Gn([u,i,a],e.dtype),x=b.values,w=this.blockSize,C=0;C<u;C++)for(var E=0;E<i;E+=w)for(var k=0;k<a;k+=w)for(var _=0;_<o;_+=w)for(var S=Math.min(E+w,i),O=Math.min(k+w,a),T=Math.min(_+w,o),R=E;R<S;R++)for(var I=k;I<O;I++){for(var A=0,N=_;N<T;N++)A+=s[C*f+R*p+N*d]*c[N*v+I*m+C*g];x[C*y+(R*a+I)]+=A}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,i=e.bias,a=e.activation,u=e.preluActivationWeights,s=this.batchMatMul(t,n,r,o);return i&&(s=this.add(s,i)),a&&(s=ql(this,s,a,u)),s},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}):this.broadcastedBinaryOp(e,t,Ie(e.dtype,t.dtype),function(e,t){return e*t})},t.prototype.realDivide=function(e,t){return Gl([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",function(e,t){return e/t})},t.prototype.floorDiv=function(e,t){return Gl([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",function(e,t){return Math.floor(e/t)})},t.prototype.sum=function(e,t){Gl(e,"sum"),rn("sum",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],i=Cn(r,Ie(e.dtype,"int32")),a=T(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=0,p=0;p<a;++p)f+=s[l+p];u[c]=f}return i},t.prototype.prod=function(e,t){Gl(e,"sum");for(var n=tn(e.shape,t),r=n[0],o=n[1],i=Cn(r,Ie(e.dtype,"int32")),a=T(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=1,p=0;p<a;++p)f*=s[l+p];u[c]=f}return i},t.prototype.unsortedSegmentSum=function(e,t,n){Gl(e,"unsortedSegmentSum");for(var r=[],o=e.rank-t.rank,i=0;i<o;++i)t=t.expandDims(i+1);for(i=0;i<n;++i){var a=mn(i,"int32"),u=Rs(a,t).asType("float32").mul(e).sum(0);r.push(u)}return hr(r)},t.prototype.argMin=function(e,t){Gl(e,"argMin");var n=[t];rn("argMin",n,e.rank);for(var r=tn(e.shape,n),o=r[0],i=r[1],a=Cn(o,"int32"),u=T(i),s=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var f=l*u,p=c[f],d=0,h=0;h<u;++h){var v=c[f+h];v<p&&(p=v,d=h)}s[l]=d}return a},t.prototype.argMax=function(e,t){Gl(e,"argMax");var n=[t];rn("argMax",n,e.rank);for(var r=tn(e.shape,n),o=r[0],i=r[1],a=Cn(o,"int32"),u=T(i),s=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var f=l*u,p=c[f],d=0,h=0;h<u;++h){var v=c[f+h];v>p&&(p=v,d=h)}s[l]=d}return a},t.prototype.cumsum=function(e,t,n,r){if(Gl(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var o=Ie(e.dtype,"int32"),i=Cn(e.shape,o),a=this.readSync(i.dataId),u=this.readSync(e.dataId),s=e.shape[e.rank-1],c=r?function(e,t){return e+s-t-1}:function(e,t){return e+t},l=0;l<u.length;l+=s)for(var f=0;f<s;f++){var p=c(l,f);if(0===f)a[p]=n?0:u[p];else{var d=c(l,f-1);a[p]=n?u[d]+a[d]:u[p]+a[d]}}return i},t.prototype.equal=function(e,t){return Gl([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e===t?1:0})},t.prototype.notEqual=function(e,t){return Gl([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e!==t?1:0})},t.prototype.less=function(e,t){return Gl([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<t?1:0})},t.prototype.lessEqual=function(e,t){return Gl([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<=t?1:0})},t.prototype.greater=function(e,t){return Gl([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>t?1:0})},t.prototype.greaterEqual=function(e,t){return Gl([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>=t?1:0})},t.prototype.logicalNot=function(e){Gl(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return Gl([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e&&t})},t.prototype.logicalOr=function(e,t){return Gl([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e||t})},t.prototype.select=function(e,t,n){Gl([e,t,n],"select");for(var r=this.readSync(e.dataId),o=this.readSync(t.dataId),i=this.readSync(n.dataId),a=Cn(t.shape,Ie(t.dtype,n.dtype)),u=this.readSync(a.dataId),s=0,c=0===e.rank||e.rank>1||1===t.rank?1:T(t.shape.slice(1)),l=0;l<r.length;l++)for(var f=0;f<c;f++)1===r[l]?u[s++]=o[l]:u[s++]=i[l];return a},t.prototype.where=function(e){Gl([e],"where");var t=this.readSync(e.dataId);return Co(e.shape,t)},t.prototype.topk=function(e,t,n){return Gl(e,"topk"),wo(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){Gl(e,"min"),rn("min",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],i=Cn(r,e.dtype),a=T(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=s[l],p=0;p<a;++p){var d=s[l+p];d<f&&(f=d)}u[c]=f}return i},t.prototype.minimum=function(e,t){return Gl([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.min(e,t)})},t.prototype.mod=function(e,t){return Gl([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})},t.prototype.max=function(e,t){Gl(e,"max"),rn("max",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],i=Cn(r,e.dtype),a=T(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=s[l],p=0;p<a;++p){var d=s[l+p];d>f&&(f=d)}u[c]=f}return i},t.prototype.maximum=function(e,t){return Gl([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.max(e,t)})},t.prototype.all=function(e,t){Gl(e,"all"),rn("all",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],i=Cn(r,e.dtype),a=T(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=s[l],p=0;p<a;++p){var d=s[l+p];f=f&&d}u[c]=f}return i},t.prototype.any=function(e,t){Gl(e,"any"),rn("any",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],i=Cn(r,e.dtype),a=T(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=s[l],p=0;p<a;++p){var d=s[l+p];f=f||d}u[c]=f}return i},t.prototype.squaredDifference=function(e,t){return Gl([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e-t;return n*n})},t.prototype.ceil=function(e){Gl(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){Gl(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){Gl(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){Gl(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){Gl(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){Gl(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){Gl(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=Math.floor(t[r]);t[r]-o<.5?n[r]=Math.floor(t[r]):t[r]-o>.5?n[r]=Math.ceil(t[r]):n[r]=o%2==0?o:o+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){Gl(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){Gl(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){Gl(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){Gl(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log1p(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){Gl(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){Gl(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=1/Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){Gl(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){Gl(e,"relu");for(var t=Cn(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return t},t.prototype.relu6=function(e){Gl(e,"relu");for(var t=Cn(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.min(Math.max(0,r[o]),6);return t},t.prototype.prelu=function(e,t){return Gl([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return e<0?t*e:e})},t.prototype.elu=function(e){Gl(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?o:Math.exp(o)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){Gl([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),o=this.readSync(e.dataId),i=0;i<r.length;++i){var a=r[i];n[i]=a>=1?o[i]:o[i]*(a+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){Gl(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return this.makeOutput(t,e.shape,"float32")},t.prototype.clip=function(e,t,n){Gl(e,"clip");for(var r=new Float32Array(e.size),o=this.readSync(e.dataId),i=0;i<o.length;++i){var a=o[i];r[i]=a>n?n:a<t?t:a}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var o=n[2*r],i=n[2*r+1];t[r]=Math.hypot(o,i)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){Gl(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){Gl(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){Gl(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var i,a=r[o]>-t,u=r[o]<t,s=Math.exp(r[o]);i=u?s:a?r[o]:Math.log(1+s),n[o]=i}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){Gl(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){Gl(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){Gl(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){Gl(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){Gl(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){Gl(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return Gl([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.atan2(e,t)})},t.prototype.sinh=function(e){Gl(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){Gl(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){Gl(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=A(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){Gl(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){Gl(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){Gl(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){Gl(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=Math.sign(n[r]),i=Math.abs(n[r]),a=1/(1+.3275911*i);t[r]=o*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-i*i))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),Gl(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var i=r[o];isNaN(i)?n[o]=NaN:n[o]=i>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,i=e.activation,a=e.preluActivationWeights,u=this.conv2d(t,n,r);return o&&(u=this.add(u,o)),i&&(u=ql(this,u,i,a)),u},t.prototype.conv2d=function(e,t,n){Gl([e,t],"conv2d");for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,u=n.padInfo.left,s=n.padInfo.top,c="channelsLast"===n.dataFormat,l=Gn(n.outShape,e.dtype),f=e.strides[0],p=c?e.strides[1]:e.strides[2],d=c?e.strides[2]:1,h=c?1:e.strides[1],v=l.strides[0],m=c?l.strides[1]:l.strides[2],g=c?l.strides[2]:1,y=c?1:l.strides[1],b=this.readSync(e.dataId),x=this.readSync(t.dataId),w=l.values,C=0;C<n.batchSize;++C)for(var E=C*f,k=C*v,_=0;_<n.outHeight;++_)for(var S=k+_*m,O=_*n.strideHeight-s,T=0;T<r;T++){var R=O+T*i;if(!(R<0||R>=n.inHeight))for(var I=T*t.strides[0],A=E+R*p,N=0;N<n.outWidth;++N)for(var D=S+N*g,P=N*n.strideWidth-u,M=0;M<o;M++){var F=P+M*a;if(!(F<0||F>=n.inWidth))for(var B=A+F*d,j=I+M*t.strides[1],L=0;L<n.inChannels;++L){for(var W=b[B+L*h],z=0;z<n.outChannels;++z)w[D+z*y]+=W*x[j+z];j+=n.outChannels}}}return l.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,o=n.filterHeight,i=n.filterWidth,a=n.dilationDepth,u=n.dilationHeight,s=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,f=n.padInfo.top,p=Gn(n.outShape,e.dtype),d=this.readSync(e.dataId),h=this.readSync(t.dataId),v=p.values,m=0;m<n.batchSize;++m)for(var g=m*e.strides[0],y=m*p.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*p.strides[1],w=b*n.strideDepth-c,C=0;C<r;C++){var E=w+C*a;if(!(E<0||E>=n.inDepth))for(var k=C*t.strides[0],_=g+E*e.strides[1],S=0;S<n.outHeight;++S)for(var O=x+S*p.strides[2],T=S*n.strideHeight-f,R=0;R<o;R++){var I=T+R*u;if(!(I<0||I>=n.inHeight))for(var A=k+R*t.strides[1],N=_+I*e.strides[2],D=0;D<n.outWidth;++D)for(var P=O+D*n.outChannels,M=D*n.strideWidth-l,F=0;F<i;F++){var B=M+F*s;if(!(B<0||B>=n.inWidth))for(var j=A+F*t.strides[2],L=N+B*n.inChannels,W=j,z=0;z<n.inChannels;++z){for(var U=d[L+z],V=0;V<n.outChannels;++V)v[P+V]+=U*h[W+V];W+=n.outChannels}}}}return p.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){Gl([e,t],"conv2dDerInput");for(var r=Gn(n.inShape,"float32"),o=r.values,i=this.readSync(e.dataId),a=this.readSync(t.dataId),u=t.strides,s=u[0],c=u[1],l=u[2],f=n.batchSize,p=n.filterHeight,d=n.filterWidth,h=n.inChannels,v=n.inHeight,m=n.inWidth,g=n.outChannels,y=n.outHeight,b=n.outWidth,x=n.strideHeight,w=n.strideWidth,C=n.dataFormat,E=p-1-n.padInfo.top,k=d-1-n.padInfo.left,_="channelsLast"===C,S=r.strides[0],O=_?r.strides[1]:r.strides[2],T=_?r.strides[2]:1,R=_?1:r.strides[1],I=e.strides[0],A=_?e.strides[1]:e.strides[2],N=_?e.strides[2]:1,D=_?1:e.strides[1],P=0;P<f;++P)for(var M=0;M<h;++M)for(var F=0;F<v;++F)for(var B=F-E,j=Math.max(0,Math.ceil(B/x)),L=Math.min(y,(p+B)/x),W=0;W<m;++W){for(var z=W-k,U=Math.max(0,Math.ceil(z/w)),V=Math.min(b,(d+z)/w),H=0,G=j;G<L;++G)for(var q=G*x-B,K=U;K<V;++K)for(var $=I*P+A*G+N*K,X=s*(p-1-q)+c*(d-1-(K*w-z))+l*M,Y=0;Y<g;++Y)H+=i[$+D*Y]*a[X+Y];o[S*P+O*F+T*W+R*M]=H}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=Gn(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],u=i[1],s=i[2],c=i[3],l=this.readSync(e.dataId),f=e.strides,p=f[0],d=f[1],h=f[2],v=f[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],C=n.batchSize,E=n.filterDepth,k=n.filterHeight,_=n.filterWidth,S=n.inChannels,O=n.inDepth,T=n.inHeight,R=n.inWidth,I=n.outChannels,A=n.outDepth,N=n.outHeight,D=n.outWidth,P=n.strideDepth,M=n.strideHeight,F=n.strideWidth,B=E-1-n.padInfo.front,j=k-1-n.padInfo.top,L=_-1-n.padInfo.left,W=0;W<C;++W)for(var z=0;z<S;++z)for(var U=0;U<O;++U)for(var V=U-B,H=Math.max(0,Math.ceil(V/P)),G=Math.min(A,(E+V)/P),q=0;q<T;++q)for(var K=q-j,$=Math.max(0,Math.ceil(K/M)),X=Math.min(N,(k+K)/M),Y=0;Y<R;++Y){for(var Q=Y-L,J=Math.max(0,Math.ceil(Q/F)),Z=Math.min(D,(_+Q)/F),ee=0,te=H;te<G;++te)for(var ne=te*P-V,re=$;re<X;++re)for(var oe=re*M-K,ie=J;ie<Z;++ie)for(var ae=p*W+d*te+h*re+v*ie,ue=y*(E-1-ne)+b*(k-1-oe)+x*(_-1-(ie*F-Q))+w*z,se=0;se<I;++se)ee+=l[ae+se]*m[ue+se];o[a*W+u*U+s*q+c*Y+z]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){Gl([e,t],"conv2dDerFilter");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,u="channelsLast"===n.dataFormat,s=Gn(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,f=this.bufferSync(e),p=this.bufferSync(t),d=0;d<i;++d)for(var h=Math.max(0,Math.ceil((l-d)/r)),v=Math.min(n.outHeight,(n.inHeight+l-d)/r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((c-m)/o)),y=Math.min(n.outWidth,(n.inWidth+c-m)/o),b=0;b<n.inChannels;++b)for(var x=0;x<n.outChannels;++x){for(var w=0,C=0;C<n.batchSize;++C)for(var E=h;E<v;++E)for(var k=d+E*r-l,_=g;_<y;++_){var S=m+_*o-c;w+=u?f.get(C,k,S,b)*p.get(C,E,_,x):f.get(C,b,k,S)*p.get(C,x,E,_)}s.set(w,d,m,b,x)}return s.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,a=n.filterDepth,u=n.filterHeight,s=n.filterWidth,c=Gn(n.filterShape,"float32"),l=c.values,f=c.strides,p=f[0],d=f[1],h=f[2],v=f[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],C=this.readSync(e.dataId),E=e.strides,k=E[0],_=E[1],S=E[2],O=E[3],T=n.padInfo.front,R=n.padInfo.left,I=n.padInfo.top,A=0;A<a;++A)for(var N=Math.max(0,Math.ceil((T-A)/r)),D=Math.min(n.outDepth,(n.inDepth+T-A)/r),P=A*p,M=0;M<u;++M)for(var F=Math.max(0,Math.ceil((I-M)/o)),B=Math.min(n.outHeight,(n.inHeight+I-M)/o),j=M*d+P,L=0;L<s;++L)for(var W=Math.max(0,Math.ceil((R-L)/i)),z=Math.min(n.outWidth,(n.inWidth+R-L)/i),U=L*h+j,V=0;V<n.inChannels;++V)for(var H=V*v+U,G=0;G<n.outChannels;++G){for(var q=0,K=0;K<n.batchSize;++K)for(var $=K*k,X=K*y,Y=N;Y<D;++Y)for(var Q=(A+Y*r-T)*_+$,J=Y*b+X,Z=F;Z<B;++Z)for(var ee=(M+Z*o-I)*S+Q,te=Z*x+J,ne=W;ne<z;++ne){var re=ne*w+te;q+=C[(L+ne*i-R)*O+ee+V]*m[re+G]}l[H+G]=q}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,i=e.activation,a=e.preluActivationWeights,u=this.depthwiseConv2D(t,n,r);return o&&(u=this.add(u,o)),i&&(u=ql(this,u,i,a)),u},t.prototype.depthwiseConv2D=function(e,t,n){Gl([e,t],"depthwiseConv2D");for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,u=n.padInfo.left,s=n.padInfo.top,c=n.outChannels/n.inChannels,l=Gn(n.outShape,e.dtype),f=this.readSync(e.dataId),p=this.readSync(t.dataId),d=l.values,h=0;h<n.batchSize;++h)for(var v=h*e.strides[0],m=h*l.strides[0],g=0;g<n.outHeight;++g)for(var y=m+g*l.strides[1],b=g*n.strideHeight-u,x=0;x<r;++x){var w=b+x*i;if(!(w<0||w>=n.inHeight))for(var C=x*t.strides[0],E=v+w*e.strides[1],k=0;k<n.outWidth;++k)for(var _=y+k*l.strides[2],S=k*n.strideWidth-s,O=0;O<o;++O){var T=S+O*a;if(!(T<0||T>=n.inWidth))for(var R=C+O*t.strides[1],I=E+T*n.inChannels,A=_,N=R,D=0;D<n.inChannels;++D){for(var P=f[I+D],M=0;M<c;++M)d[A+M]+=P*p[N+M];A+=c,N+=c}}}return l.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){Gl([e,t],"depthwiseConv2DDerInput");for(var r=Gn(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],u=i[1],s=i[2],c=this.readSync(e.dataId),l=e.strides,f=l[0],p=l[1],d=l[2],h=this.readSync(t.dataId),v=t.strides,m=v[0],g=v[1],y=v[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,C=n.inChannels,E=n.inHeight,k=n.inWidth,_=n.outChannels,S=n.outHeight,O=n.outWidth,T=n.strideHeight,R=n.strideWidth,I=x-1-n.padInfo.top,A=w-1-n.padInfo.left,N=_/C,D=0;D<b;++D)for(var P=0;P<C;++P)for(var M=0;M<E;++M)for(var F=M-I,B=Math.max(0,Math.ceil(F/T)),j=Math.min(S,(x+F)/T),L=0;L<k;++L){for(var W=L-A,z=Math.max(0,Math.ceil(W/R)),U=Math.min(O,(w+W)/R),V=0,H=B;H<j;++H)for(var G=H*T-F,q=z;q<U;++q)for(var K=f*D+p*H+d*q,$=m*(x-1-G)+g*(w-1-(q*R-W))+y*P,X=0;X<N;++X)V+=c[K+(P*N+X)]*h[$+X];o[a*D+u*M+s*L+P]=V}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){Gl([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,u=Gn(n.filterShape,"float32"),s=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,f=this.bufferSync(e),p=this.bufferSync(t),d=0;d<i;++d)for(var h=Math.max(0,Math.ceil((c-d)/r)),v=Math.min(n.outHeight,(n.inHeight+c-d)/r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((s-m)/o)),y=Math.min(n.outWidth,(n.inWidth+s-m)/o),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/l),w=b%l,C=0,E=0;E<n.batchSize;++E)for(var k=h;k<v;++k)for(var _=d+k*r-c,S=g;S<y;++S){var O=m+S*o-s;C+=f.get(E,_,O,x)*p.get(E,k,S,b)}u.set(C,d,m,x,w)}return u.toTensor()},t.prototype.tile=function(e,t){return Gl(e,"tile"),xo(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){Gl(e,"pad");var r=t.map(function(t,n){return t[0]+e.shape[n]+t[1]}),o=t.map(function(e){return e[0]}),i=this.bufferSync(e),a=Gn(r,e.dtype);0!==n&&a.values.fill(n);for(var u=0;u<e.size;u++){var s=i.indexToLoc(u),c=s.map(function(e,t){return e+o[t]});a.set.apply(a,[i.get.apply(i,s)].concat(c))}return a.toTensor()},t.prototype.transpose=function(e,t){Gl(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var o=this.readSync(e.dataId),i=Gn(n,e.dtype),a=this.bufferSync(e);for(r=0;r<e.size;++r){for(var u=a.indexToLoc(r),s=new Array(u.length),c=0;c<s.length;c++)s[c]=u[t[c]];var l=i.locToIndex(s);i.values[l]=o[r]}return i.toTensor()},t.prototype.gather=function(e,t,n){Gl([e,t],"gather");var r=e.shape.slice(),o=this.readSync(t.dataId);r[n]=o.length;for(var i=Gn(r,e.dtype),a=this.bufferSync(e),u=0;u<i.size;++u){var s=i.indexToLoc(u),c=s.slice();c[n]=o[s[n]];var l=a.locToIndex(c);i.values[u]=a.values[l]}return i.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){Gl([e],"batchToSpaceND");var r=t.reduce(function(e,t){return e*t}),o=yr(e.shape,t,r),i=br(o.length,t.length),a=xr(e.shape,t,r),u=wr(n,t.length),s=Cr(a,n,t.length);return e.reshape(o).transpose(i).reshape(a).slice(u,s)},t.prototype.spaceToBatchND=function(e,t,n){Gl([e],"spaceToBatchND");var r=t.reduce(function(e,t){return e*t}),o=[[0,0]];o.push.apply(o,n);for(var i=1+t.length;i<e.shape.length;++i)o.push([0,0]);var a=e.pad(o),u=yr(a.shape,t,r,!1),s=br(u.length,t.length,!1),c=xr(a.shape,t,r,!1);return a.reshape(u).transpose(s).reshape(c)},t.prototype.pool=function(e,t,n){Gl(e,"pool");for(var r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,s=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,f="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(e.dataId),d=Gn(t.outShape,e.dtype),h=d.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3],m=t.outShape[2]*t.outShape[3],g=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*v,x=y*e.strides[0],w=0;w<t.inChannels;++w)for(var C=0;C<t.outHeight;++C)for(var E=C*r-c,k=Math.max(0,E),_=Math.min(t.inHeight,u+E),S=b+C*m,O=0;O<t.outWidth;++O){for(var T=O*o-l,R=Math.max(0,T),I=Math.min(t.inWidth,s+T),A=f,N=0,D=0,P=k;P<_;P+=i){for(var M=x+P*e.strides[1],F=R;F<I;F+=a){var B=p[M+F*e.strides[2]+w];"max"===n&&B>A?A=B:"avg"===n&&(N+=B,D++)}if(isNaN(A))break}h[S+O*g+w]="avg"===n?N/D:A}return d.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=Gn(t.outShape,"int32"),r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,s=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,f=this.bufferSync(e),p=0;p<t.batchSize;++p)for(var d=0;d<t.inChannels;++d)for(var h=0;h<t.outHeight;++h){for(var v=h*r-c,m=v;m<0;)m+=i;for(var g=Math.min(t.inHeight,u+v),y=0;y<t.outWidth;++y){for(var b=y*o-l,x=b;x<0;)x+=a;for(var w=Math.min(t.inWidth,s+b),C=Number.NEGATIVE_INFINITY,E=-1,k=m;k<g;k+=i)for(var _=k-v,S=x;S<w;S+=a){var O=S-b,T=f.get(p,k,S,d);T>C&&(C=T,E=_*s+O)}n.set(E,p,h,y,d)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){Gl([t,n],"maxPoolBackprop");for(var o=this.maxPoolPositions(t,r),i=r.strideHeight,a=r.strideWidth,u=r.dilationHeight,s=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=l-1-r.padInfo.left,p=c-1-r.padInfo.top,d=Gn(t.shape,"float32"),h=this.bufferSync(o),v=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-p,w=b-f,C=0,E=0;E<c;E+=u){var k=(x+E)/i;if(!(k<0||k>=r.outHeight||Math.floor(k)!==k))for(var _=0;_<l;_+=s){var S=(w+_)/a;if(!(S<0||S>=r.outWidth||Math.floor(S)!==S)){var O=c*l-1-h.get(m,k,S,g)===E*l+_?1:0;0!==O&&(C+=v.get(m,k,S,g)*O)}}}d.set(C,m,y,b,g)}return d.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){Gl([e,t],"avgPoolBackprop");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,u=n.dilationHeight,s=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,f=l-1-n.padInfo.left,p=c-1-n.padInfo.top,d=Gn(t.shape,"float32"),h=1/(i*a),v=this.bufferSync(e),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-p,w=b-f,C=0,E=0;E<c;E+=u){var k=(x+E)/r;if(!(k<0||k>=n.outHeight||Math.floor(k)!==k))for(var _=0;_<l;_+=s){var S=(w+_)/o;S<0||S>=n.outWidth||Math.floor(S)!==S||(C+=v.get(m,k,S,g))}}d.set(C*h,m,y,b,g)}return d.toTensor()},t.prototype.pool3d=function(e,t,n){Gl(e,"pool3d");for(var r=t.strideDepth,o=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.front,d=t.padInfo.top,h=t.padInfo.left,v="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(e.dataId),g=Gn(t.outShape,e.dtype),y=g.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],C=t.outShape[4],E=0;E<t.batchSize;++E)for(var k=E*b,_=E*e.strides[0],S=0;S<t.inChannels;++S)for(var O=0;O<t.outDepth;++O){for(var T=O*r-p,R=T;R<0;)R+=a;for(var I=Math.min(t.inDepth,c+T),A=k+O*x,N=0;N<t.outHeight;++N){for(var D=N*o-d,P=D;P<0;)P+=u;for(var M=Math.min(t.inHeight,l+D),F=A+N*w,B=0;B<t.outWidth;++B){for(var j=B*i-h,L=j;L<0;)L+=s;for(var W=Math.min(t.inWidth,f+j),z=F+B*C,U=v,V=0,H=0,G=R;G<I;G+=a){for(var q=_+G*e.strides[1],K=P;K<M;K+=u){for(var $=q+K*e.strides[2],X=L;X<W;X+=s){var Y=m[$+X*e.strides[3]+S];if("max"===n&&Y>U?U=Y:"avg"===n&&(V+=Y,H++),isNaN(U))break}if(isNaN(U))break}if(isNaN(U))break}y[z+S]="avg"===n?V/H:U}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return Gl(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){Gl([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,a=n.filterDepth,u=n.filterHeight,s=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,f=n.dilationWidth,p=n.effectiveFilterDepth,d=n.effectiveFilterHeight,h=n.effectiveFilterWidth,v=p-1-n.padInfo.front,m=h-1-n.padInfo.left,g=d-1-n.padInfo.top,y=Gn(t.shape,"float32"),b=1/(a*u*s),x=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var C=0;C<n.inChannels;++C)for(var E=0;E<n.inDepth;++E)for(var k=0;k<n.inHeight;++k)for(var _=0;_<n.inWidth;++_){for(var S=E-v,O=k-g,T=_-m,R=0,I=0;I<p;I+=c){var A=(S+I)/r;if(!(A<0||A>=n.outDepth||Math.floor(A)!==A))for(var N=0;N<d;N+=l){var D=(O+N)/o;if(!(D<0||D>=n.outHeight||Math.floor(D)!==D))for(var P=0;P<h;P+=f){var M=(T+P)/i;M<0||M>=n.outWidth||Math.floor(M)!==M||(R+=x.get(w,A,D,M,C))}}}y.set(R*b,w,E,k,_,C)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return Gl(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=Gn(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.front,d=t.padInfo.top,h=t.padInfo.left,v=this.bufferSync(e),m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var b=y*r-p,x=b;x<0;)x+=a;for(var w=Math.min(t.inDepth,c+b),C=0;C<t.outHeight;++C){for(var E=C*o-d,k=E;k<0;)k+=u;for(var _=Math.min(t.inHeight,l+E),S=0;S<t.outWidth;++S){for(var O=S*i-h,T=O;T<0;)T+=s;for(var R=Math.min(t.inWidth,f+O),I=Number.NEGATIVE_INFINITY,A=-1,N=x;N<w;N+=a)for(var D=N-b,P=k;P<_;P+=u)for(var M=P-E,F=T;F<R;F+=s){var B=F-O,j=v.get(m,N,P,F,g);j>=I&&(I=j,A=D*l*f+M*l+B)}n.set(A,m,y,C,S,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){Gl([t,n],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(t,r),i=r.strideDepth,a=r.strideHeight,u=r.strideWidth,s=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,p=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=f-1-r.padInfo.front,v=d-1-r.padInfo.left,m=p-1-r.padInfo.top,g=Gn(t.shape,"float32"),y=this.bufferSync(o),b=this.bufferSync(e),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var C=0;C<r.inDepth;++C)for(var E=0;E<r.inHeight;++E)for(var k=0;k<r.inWidth;++k){for(var _=C-h,S=E-m,O=k-v,T=0,R=0;R<f;R+=s){var I=(_+R)/i;if(!(I<0||I>=r.outDepth||Math.floor(I)!==I))for(var A=0;A<p;A+=c){var N=(S+A)/a;if(!(N<0||N>=r.outHeight||Math.floor(N)!==N))for(var D=0;D<d;D+=l){var P=(O+D)/u;if(!(P<0||P>=r.outWidth||Math.floor(P)!==P)){var M=f*p*d-1-y.get(x,I,N,P,w)===R*p*d+A*d+D?1:0;0!==M&&(T+=b.get(x,I,N,P,w)*M)}}}}g.set(T,x,C,E,k,w)}return g.toTensor()},t.prototype.cast=function(e,t){return ro(e,t,this)},t.prototype.reshape=function(e,t){return oo(e,t)},t.prototype.avgPool=function(e,t){return Gl(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){Gl(e,"resizeBilinear");for(var o=e.shape,i=o[0],a=o[1],u=o[2],s=o[3],c=this.readSync(e.dataId),l=new Float32Array(T([i,t,n,s])),f=[r&&t>1?a-1:a,r&&n>1?u-1:u],p=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=0,h=f[0]/p[0],v=f[1]/p[1],m=0;m<i;m++)for(var g=0;g<t;g++)for(var y=h*g,b=Math.floor(y),x=y-b,w=Math.min(a-1,Math.ceil(y)),C=m*e.strides[0]+b*e.strides[1],E=m*e.strides[0]+w*e.strides[1],k=0;k<n;k++)for(var _=v*k,S=Math.floor(_),O=_-S,R=Math.min(u-1,Math.ceil(_)),I=C+S*e.strides[2],A=E+S*e.strides[2],N=C+R*e.strides[2],D=E+R*e.strides[2],P=0;P<s;P++){var M=c[I+P],F=c[A+P],B=M+(c[N+P]-M)*O,j=B+(F+(c[D+P]-F)*O-B)*x;l[d++]=j}return hn(l,[i,t,n,s])},t.prototype.resizeBilinearBackprop=function(e,t,n){Gl([e,t],"resizeBilinearBackprop");for(var r=t.shape,o=r[0],i=r[1],a=r[2],u=r[3],s=e.shape,c=s[1],l=s[2],f=new Float32Array(o*i*a*u),p=[n&&c>1?i-1:i,n&&l>1?a-1:a],d=[n&&c>1?c-1:c,n&&l>1?l-1:l],h=p[0]/d[0],v=p[1]/d[1],m=this.readSync(e.dataId),g=0,y=0;y<o;y++)for(var b=y*t.strides[0],x=0;x<c;x++)for(var w=x*h,C=Math.floor(w),E=Math.min(Math.ceil(w),i-1),k=b+C*t.strides[1],_=b+E*t.strides[1],S=w-C,O=1-S,T=0;T<l;T++)for(var R=T*v,I=Math.floor(R),A=Math.min(Math.ceil(R),a-1),N=R-I,D=1-N,P=k+I*t.strides[2],M=k+A*t.strides[2],F=_+I*t.strides[2],B=_+A*t.strides[2],j=O*D,L=O*N,W=S*D,z=S*N,U=0;U<u;U++){var V=m[g++];f[P+U]+=V*j,f[M+U]+=V*L,f[F+U]+=V*W,f[B+U]+=V*z}return xn(f,[o,a,i,u],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){Gl(e,"resizeNearestNeighbor");for(var o=e.shape,i=o[0],a=o[1],u=o[2],s=o[3],c=this.readSync(e.dataId),l=new Float32Array(i*t*n*s),f=[r&&t>1?a-1:a,r&&n>1?u-1:u],p=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=f[0]/p[0],h=f[1]/p[1],v=0,m=0;m<i;m++)for(var g=m*e.strides[0],y=0;y<t;y++)for(var b=d*y,x=g+Math.min(a-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var C=h*w,E=x+Math.min(u-1,r?Math.round(C):Math.floor(C))*e.strides[2],k=0;k<s;k++){var _=c[E+k];l[v++]=_}return hn(l,[i,t,n,s],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){Gl([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,o=r[0],i=r[1],a=r[2],u=r[3],s=e.shape,c=s[1],l=s[2],f=new Float32Array(o*i*a*u),p=this.readSync(e.dataId),d=[n&&c>1?i-1:i,n&&l>1?a-1:a],h=[n&&c>1?c-1:c,n&&l>1?l-1:l],v=d[0]/h[0],m=d[1]/h[1],g=1/v,y=1/m,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2,w=0;w<o;w++)for(var C=w*t.strides[0],E=0;E<i;E++)for(var k=C+E*t.strides[1],_=Math.floor(E*g),S=Math.floor(_-b/2),O=0;O<a;O++)for(var T=k+O*t.strides[2],R=Math.floor(O*y),I=Math.floor(R-x/2),A=0;A<u;A++){for(var N=0,D=0;D<b;D++){var P=D+S;if(!(P<0||P>=c)){var M=C+P*e.strides[1],F=P*v;if(E===Math.min(i-1,n?Math.round(F):Math.floor(F)))for(var B=0;B<x;B++){var j=B+I;if(!(j<0||j>=l)){var L=M+j*e.strides[2],W=j*m;O===Math.min(a-1,n?Math.round(W):Math.floor(W))&&(N+=p[L+A])}}}}f[T+A]=N}return xn(f,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,i){Gl([e,t,n,o,i],"batchNorm");for(var a=this.readSync(e.dataId),u=this.readSync(t.dataId),s=this.readSync(n.dataId),c=o?this.readSync(o.dataId):new Float32Array([1]),l=i?this.readSync(i.dataId):new Float32Array([0]),f=new Float32Array(a.length),p=l.length,d=c.length,h=s.length,v=u.length,m=0,g=0,y=0,b=0,x=0;x<a.length;++x)f[x]=l[m++]+(a[x]-u[g++])*c[y++]/Math.sqrt(s[b++]+r),m>=p&&(m=0),g>=v&&(g=0),y>=d&&(y=0),b>=h&&(b=0);return xn(f,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){Gl(e,"localResponseNormalization4D");var i=e.shape[3],a=i-1,u=this.readSync(e.dataId),s=e.size,c=new Float32Array(s);function l(e){for(var n=e%i,r=e-n+Math.max(0,n-t),o=e-n+Math.min(n+t,a),s=0;r<=o;r++){var c=u[r];s+=c*c}return s}for(var f=0;f<s;f++){var p=l(f),d=u[f]*Math.pow(n+r*p,-o);c[f]=d}return xn(c,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,o,i,a){Gl(e,"LRNGrad");for(var u=e.shape[3],s=this.readSync(e.dataId),c=this.readSync(t.dataId),l=this.readSync(n.dataId),f=new Float32Array(e.size),p=e.size,d=0;d<p;d++){for(var h=d%u,v=d-h+Math.max(0,h-r),m=d-h+Math.min(u,h+r+1),g=0,y=v;y<m;y++)g+=Math.pow(c[y],2);for(g=i*g+o,y=v;y<m;y++){var b=-2*i*a*c[y]*l[d]/g;d===y&&(b+=Math.pow(g,-a)),b*=s[d],f[y]+=b}}return xn(f,e.shape)},t.prototype.multinomial=function(e,t,n,r){Gl(e,"multinomial");for(var o=t?e:Br(e),i=o.shape[0],a=o.shape[1],u=Cn([i,n],"int32"),s=this.readSync(u.dataId),c=this.readSync(o.dataId),l=0;l<i;++l){var f=l*a,p=new Float32Array(a-1);p[0]=c[f];for(var d=1;d<p.length;++d)p[d]=p[d-1]+c[f+d];for(var h=zn(r.toString()),v=l*n,m=0;m<n;++m){var g=h();s[v+m]=p.length;for(var y=0;y<p.length;y++)if(g<p[y]){s[v+m]=y;break}}}return u},t.prototype.oneHot=function(e,t,n,r){Gl(e,"oneHot");var o=new Float32Array(e.size*t);o.fill(r);for(var i=this.readSync(e.dataId),a=0;a<e.size;++a)i[a]>=0&&i[a]<t&&(o[a*t+i[a]]=n);return yn(o,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return Gl(e,"nonMaxSuppression"),po(this.readSync(e.dataId),this.readSync(t.dataId),n,r,o)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],o=Gn(e.shape,"float32"),i=Gn(e.shape,"float32"),a=pn(e).as2D(n,r),u=dn(e).as2D(n,r),s=0;s<n;s++)for(var c=a.slice([s,0],[1,r]),l=u.slice([s,0],[1,r]),f=fn(c,l),p=this.readSync(this.fftImpl(f,t).dataId),d=0;d<r;d++){var h=uo(p,d);o.values[s*r+d]=h.real,i.values[s*r+d]=h.imag}return fn(o.toTensor(),i.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(o=fn(pn(o).div(mn(r)),dn(o).div(mn(r)))),o}var i=this.readSync(e.dataId),a=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(i,r,t));return fn(a.real,a.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),o=t/2,i=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),a=fn(i.real,i.imag).as1D(),u=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),s=fn(u.real,u.imag).as1D();a=this.fftRadix2(a,o,n),s=this.fftRadix2(s,o,n);var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),o=0;o<Math.ceil(e/2);o++){var i=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}(t,n),l=fn(c.real,c.imag).mul(s),f=a.add(l),p=a.sub(l),d=pn(f).concat(pn(p)),h=dn(f).concat(dn(p));return fn(d,h).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),o=0;o<t;o++){for(var i=0,a=0,u=0;u<t;u++){var s=co(o*u,t,n),c=uo(e,u);i+=c.real*s.real-c.imag*s.imag,a+=c.real*s.imag+c.imag*s.real}n&&(i/=t,a/=t),so(r,i,a,o)}return r},t.prototype.depthToSpace=function(e,t,n){k("NHWC"===n,function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n}),k(t>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+t});for(var r=e.shape[0],o=e.shape[1],i=e.shape[2],a=e.shape[3],u=o*t,s=i*t,c=a/(t*t),l=this.readSync(e.dataId),f=new Float32Array(r*u*s*c),p=0,d=0;d<r;++d)for(var h=0;h<u;++h)for(var v=Math.floor(h/t),m=h%t,g=0;g<s;++g)for(var y=Math.floor(g/t),b=(m*t+g%t)*c,x=0;x<c;++x){var w=x+b+a*(y+i*(v+o*d));f[p++]=l[w]}return xn(f,[r,u,s,c])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var o=Hr(e.shape,t.shape),i=Gn(o,n),a=this.readSync(e.dataId),u=this.readSync(t.dataId),s=Ur(e.shape,o),c=Ur(t.shape,o),l=i.values;if(s.length+c.length===0)for(var f=0;f<l.length;++f)l[f]=r(a[f%a.length],u[f%u.length]);else{var p=this.bufferSync(e),d=this.bufferSync(t),h=function(n){var o=i.indexToLoc(n),f=o.slice(-e.rank);s.forEach(function(e){return f[e]=0});var h=p.locToIndex(f),v=o.slice(-t.rank);c.forEach(function(e){return v[e]=0});var m=d.locToIndex(v);l[n]=r(a[h],u[m])};for(f=0;f<l.length;++f)h(f)}return i.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=Hr(e.shape,t.shape),o=Gn(r,"float32"),i=Gn(r,"float32"),a=this.readSync(e.dataId),u=this.readSync(t.dataId),s=Ur(e.shape,r),c=Ur(t.shape,r),l=o.values,f=i.values;if(s.length+c.length===0)for(var p=0;p<l.length;p++){var d=p%a.length,h=p%u.length,v=n(a[2*d],a[2*d+1],u[2*h],u[2*h+1]);l[p]=v.real,f[p]=v.imag}else{var m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var i=o.indexToLoc(r),p=i.slice(-e.rank);s.forEach(function(e){return p[e]=0});var d=m.locToIndex(p),h=i.slice(-t.rank);c.forEach(function(e){return h[e]=0});var v=g.locToIndex(h),y=n(a[2*d],a[2*d+1],u[2*v],u[2*v+1]);l[r]=y.real,f[r]=y.imag};for(p=0;p<l.length;p++)y(p)}return this.complex(o.toTensor(),i.toTensor())},t.prototype.split=function(e,t,n){return bo(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,o,i){for(var a=e.shape,u=a[0],s=a[1],c=a[2],l=a[3],f=t.shape[0],p=r[0],d=r[1],h=Gn([f,p,d,l],"float32"),v=this.readSync(t.dataId),m=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=h.strides,x=0;x<f;x++){var w=4*x,C=v[w],E=v[w+1],k=v[w+2],_=v[w+3],S=m[x];if(!(S>=u))for(var O=p>1?(k-C)*(s-1)/(p-1):0,T=d>1?(_-E)*(c-1)/(d-1):0,R=0;R<p;R++){var I=p>1?C*(s-1)+R*O:.5*(C+k)*(s-1);if(I<0||I>s-1)for(var A=0;A<d;A++)for(var N=0;N<l;N++){var D=N+A*b[2]+R*b[1]+x*b[0];h.values[D]=i}else if("bilinear"===o){var P=Math.floor(I),M=Math.ceil(I),F=I-P;for(A=0;A<d;A++)if((G=d>1?E*(c-1)+A*T:.5*(E+_)*(c-1))<0||G>c-1)for(N=0;N<l;N++)D=N+A*b[2]+R*b[1]+x*b[0],h.values[D]=i;else{var B=Math.floor(G),j=Math.ceil(G),L=G-B;for(N=0;N<l;N++){var W=g[D=N+B*y[2]+P*y[1]+S*y[0]],z=g[D=N+j*y[2]+P*y[1]+S*y[0]],U=g[D=N+B*y[2]+M*y[1]+S*y[0]],V=W+(z-W)*L,H=U+(g[D=N+j*y[2]+M*y[1]+S*y[0]]-U)*L;D=N+A*b[2]+R*b[1]+x*b[0],h.values[D]=V+(H-V)*F}}}else for(A=0;A<d;++A){var G;if((G=d>1?E*(c-1)+A*T:.5*(E+_)*(c-1))<0||G>c-1)for(N=0;N<l;N++)D=N+A*b[2]+R*b[1]+x*b[0],h.values[D]=i;else{var q=Math.round(G),K=Math.round(I);for(N=0;N<l;N++){var $=N+q*y[2]+K*y[1]+S*y[0],X=N+A*b[2]+R*b[1]+x*b[0];h.values[X]=g[$]}}}}}return h.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var o=Tr(0,e,n),i=o.sliceRank,a=o.numUpdates,u=o.sliceSize,s=o.strides,c=o.outputSize;return this.scatter(e,t,n,c,u,a,i,s,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=Er(e,t),i=o[0],a=o[1],u=o[2],s=o[3];if(0===a)return hn([],i,e.dtype);for(var c=new ge([a,u],e.dtype),l=this.readSync(t.dataId),f=this.readSync(e.dataId),p=0;p<a;p++){for(var d=[],h=0,v=0;v<r;v++){var m=l[p*r+v];h+=m*s[v],d.push(m)}if(h<0||h>=e.size/u)throw new Error("Invalid indices: "+d+" does not index into "+e.shape);for(var g=0;g<u;g++)c.values[p*u+g]=f[h*u+g]}return c.toTensor().reshape(i)},t.prototype.scatterND=function(e,t,n){var r=Tr(0,e,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,u=r.strides,s=r.outputSize,c=mn(0);return this.scatter(e,t,n,s,a,i,o,u,c,!0)},t.prototype.fill=function(e,t,n){var r=L(n=n||X(t),T(e));return r.fill(t),je.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=L(e.dtype,T(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return io(e,t,n)},t.prototype.scatter=function(e,t,n,r,o,i,a,u,s,c){var l=[r/o,o],f=this.readSync(e.dataId),p=this.readSync(t.dataId);if(0===r)return hn([],n,t.dtype);var d=new ge(l,t.dtype);d.values.fill(this.readSync(s.dataId)[0]);for(var h=0;h<i;h++){for(var v=[],m=0,g=0;g<a;g++){var y=f[h*a+g];v.push(y),m+=y*u[g]}if(m<0||m>=r/o)throw new Error("Invalid indices: "+v+" does not index into "+n);for(var b=0;b<o;b++)c?d.values[m*o+b]+=p[h*o+b]:d.values[m*o+b]=0===t.rank?p[0]:p[h*o+b]}return d.toTensor().reshape(n)},t}(Wr);je.registerBackend("cpu",function(){return new Kl},1);for(var $l=0,Xl=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t,i=o.boxes,a=o.scores,u=r,s=u.maxOutputSize,c=u.iouThreshold,l=u.scoreThreshold,f=u.softNmsSigma,p=n;Gl(i,"NonMaxSuppressionWithScore");var d=ho(p.data.get(i.dataId).values,p.data.get(a.dataId).values,s,c,l,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n;Gl(r,"square");for(var i=o.data.get(r.dataId).values,a=new Float32Array(i.length),u=0;u<i.length;++u){var s=i[u];a[u]=s*s}return{dataId:o.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:au,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n;Gl([o,i],au);var u=a.data.get(o.dataId).values,s=a.data.get(i.dataId).values,c=function(e,t,n,r,o,i){var a=Hr(e,t),u=a.length,s=J(a),c=j(o,T(a)),l=e.length,f=t.length,p=J(e),d=J(t),h=Ur(e,a),v=Ur(t,a);if(h.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=i(n[m%n.length],r[m%r.length]);else{var g=function(e){var t=se(e,u,s),o=t.slice(-l);h.forEach(function(e){return o[e]=0});var a=ue(o,l,p),m=t.slice(-f);v.forEach(function(e){return m[e]=0});var g=ue(m,f,d);c[e]=i(n[a],r[g])};for(m=0;m<c.length;++m)g(m)}return[c,a]}(o.shape,i.shape,u,s,o.dtype,function(e,t){var n=e-t;return n*n}),l=c[0],f=c[1];return{dataId:a.write(l,f,o.dtype),shape:f,dtype:o.dtype}}}];$l<Xl.length;$l++)g(Xl[$l]);for(var Yl,Ql=function(e){this.variableNames=["A"];var t=To(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},Jl=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=To(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},Zl=0,ef=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,i=r.numChannels,a="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,u="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,s=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=s[0],l=s[1],p=[l,c],d=[l,c,i];(u||a)&&(null==Yl&&(Yl=document.createElement("canvas").getContext("2d")),Yl.canvas.width=c,Yl.canvas.height=l,Yl.drawImage(o,0,0,c,l),o=Yl.canvas);var h=n.makeTensorInfo(p,"int32");n.texData.get(h.dataId).usage=Ue.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);var v=f().getBool("WEBGL_PACK")?new Jl(d):new Ql(d),m=n.runWebGLProgram(v,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;$t("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=t,i=o.boxes,a=o.scores,u=r,s=u.maxOutputSize,c=u.iouThreshold,l=u.scoreThreshold,f=u.softNmsSigma,p=n,d=ho(p.readSync(i.dataId),p.readSync(a.dataId),s,c,l,f);return[d.selectedIndices,d.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n,i=new Fa(r.shape,"return x * x;");return o.runWebGLProgram(i,[r],r.dtype)}},{kernelName:au,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n,u=f().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ei("return (a - b) * (a - b);",o.shape,i.shape):new Jo("return (a - b) * (a - b);",o.shape,i.shape);return a.compileAndRun(u,[o,i])}}];Zl<ef.length;Zl++)g(ef[Zl]);for(var tf=0,nf=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:au,gradFunc:function(e,t){var n=t[0],r=t[1],o=mn(2);return{a:function(){return Cs(e,Cs(o,Os(n,r)))},b:function(){return Cs(e,Cs(o,Os(r,n)))}}}}];tf<nf.length;tf++)y(nf[tf]);var rf=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();f().get("IS_BROWSER")&&f().setPlatform("browser",new rf);var of,af=function(){function e(){this.util=n(87),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=f().global.fetch?f().global.fetch(e,t):(null==of&&(of=n(86)),of(e,t))},e.prototype.now=function(){var e=r.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();f().get("IS_NODE")&&f().setPlatform("node",new af);var uf={float32:4,int32:4,uint16:2,uint8:1,bool:1},sf=4;function cf(e,t){for(var n={},r=0,o=function(t){var o=t.name,i=t.dtype,a=t.shape,u=T(a),s=void 0;if("quantization"in t){var c=t.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var l=uf[c.dtype],f=e.slice(r,r+u*l),p="uint8"===c.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===i)s=Float32Array.from(p,function(e){return e*c.scale+c.min});else{if("int32"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);s=Int32Array.from(p,function(e){return Math.round(e*c.scale+c.min)})}r+=u*l}else if("string"===i){var d=T(t.shape);s=[];for(var h=0;h<d;h++){var v=new Uint32Array(e.slice(r,r+sf))[0];r+=sf;var m=new Uint8Array(e.slice(r,r+v));s.push(m),r+=v}}else{var g=uf[i];if(f=e.slice(r,r+u*g),"float32"===i)s=new Float32Array(f);else if("int32"===i)s=new Int32Array(f);else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);s=new Uint8Array(f)}r+=u*g}n[o]=hn(s,a,i)},i=0,a=t;i<a.length;i++)o(a[i]);return n}function lf(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});var r=new Uint8Array(t),o=0;return n.forEach(function(e){r.set(new Uint8Array(e.buffer),o),o+=e.byteLength}),r.buffer}var ff="undefined"!=typeof o&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function pf(e){return ff?o.byteLength(e):new Blob([e]).size}function df(e){var t=0;e.forEach(function(e){t+=e.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function hf(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function vf(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:pf(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:pf(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var mf=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(e){var n=e(t,r);null!==n&&o.push(n)}),o},e}(),gf="://",yf=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){k(null!=t,function(){return"scheme must not be undefined or null."}),t.endsWith(gf)&&(t=t.slice(0,t.indexOf(gf))),k(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();k(null==r.managers[t],function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function bf(e){if(-1===e.indexOf(gf))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+yf.getSchemes().join(","));return{scheme:e.split(gf)[0],path:e.split(gf)[1]}}function xf(e,t,n){return void 0===n&&(n=!1),s(this,void 0,void 0,function(){var r,o,i,a,u,s,l,f,p;return c(this,function(c){switch(c.label){case 0:return k(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),k((r=mf.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),k(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),o=r[0],k((i=mf.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),k(i.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),a=i[0],u=bf(e).scheme,s=bf(e).path,l=u===bf(e).scheme,[4,o.load()];case 1:return f=c.sent(),n&&l?[4,yf.getManager(u).removeModel(s)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[4,a.save(f)];case 4:return p=c.sent(),!n||l?[3,6]:[4,yf.getManager(u).removeModel(s)];case 5:c.sent(),c.label=6;case 6:return[2,p.modelArtifactsInfo]}})})}var wf="models_store",Cf="model_info_store";function Ef(){if(!f().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function kf(e){var t=e.result;t.createObjectStore(wf,{keyPath:"modelPath"}),t.createObjectStore(Cf,{keyPath:"modelPath"})}var _f=function(){function e(e){if(this.indexedDB=Ef(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},e.prototype.load=function(){return s(this,void 0,void 0,function(){return c(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(e,t){var n=this;return new Promise(function(e,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return kf(o)},o.onsuccess=function(){var i=o.result;if(null==t){var a=i.transaction(wf,"readonly"),u=a.objectStore(wf).get(n.modelPath);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(u.result.modelArtifacts)},u.onerror=function(e){return i.close(),r(u.error)},a.oncomplete=function(){return i.close()}}else{var s,c=vf(t),l=i.transaction(Cf,"readwrite"),f=l.objectStore(Cf),p=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});p.onsuccess=function(){var o=(s=i.transaction(wf,"readwrite")).objectStore(wf).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});o.onsuccess=function(){return e({modelArtifactsInfo:c})},o.onerror=function(e){var t=(f=l.objectStore(Cf)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(o.error)},t.onerror=function(e){return i.close(),r(o.error)}}},p.onerror=function(e){return i.close(),r(p.error)},l.oncomplete=function(){null==s?i.close():s.oncomplete=function(){return i.close()}}}},o.onerror=function(e){return r(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),Sf=function(e){return f().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(_f.URL_SCHEME)?(t=e.slice(_f.URL_SCHEME.length),new _f(t)):null;var t};mf.registerSaveRouter(Sf),mf.registerLoadRouter(Sf);var Of=function(){function e(){this.indexedDB=Ef()}return e.prototype.listModels=function(){return s(this,void 0,void 0,function(){var e=this;return c(this,function(t){return[2,new Promise(function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return kf(r)},r.onsuccess=function(){var e=r.result,o=e.transaction(Cf,"readonly"),i=o.objectStore(Cf).getAll();i.onsuccess=function(){for(var e={},n=0,r=i.result;n<r.length;n++){var o=r[n];e[o.modelPath]=o.modelArtifactsInfo}t(e)},i.onerror=function(t){return e.close(),n(i.error)},o.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}})]})})},e.prototype.removeModel=function(e){return s(this,void 0,void 0,function(){var t=this;return c(this,function(n){var r;return e=(r=e).startsWith(_f.URL_SCHEME)?r.slice(_f.URL_SCHEME.length):r,[2,new Promise(function(n,r){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return kf(o)},o.onsuccess=function(){var t,i=o.result,a=i.transaction(Cf,"readwrite"),u=a.objectStore(Cf),s=u.get(e);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var o=u.delete(e),a=function(){var o=(t=i.transaction(wf,"readwrite")).objectStore(wf).delete(e);o.onsuccess=function(){return n(s.result.modelArtifactsInfo)},o.onerror=function(e){return r(s.error)}};o.onsuccess=a,o.onerror=function(e){return a(),i.close(),r(s.error)}},s.onerror=function(e){return i.close(),r(s.error)},a.oncomplete=function(){null==t?i.close():t.oncomplete=function(){return i.close()}}},o.onerror=function(e){return r(o.error)}})]})})},e}();if(f().getBool("IS_BROWSER"))try{yf.registerManager(_f.URL_SCHEME,new Of)}catch(Oe){}var Tf="/",Rf="tensorflowjs_models",If="info",Af="model_topology",Nf="weight_specs",Df="weight_data",Pf="model_metadata";function Mf(e){return{info:[Rf,e,If].join(Tf),topology:[Rf,e,Af].join(Tf),weightSpecs:[Rf,e,Nf].join(Tf),weightData:[Rf,e,Df].join(Tf),modelMetadata:[Rf,e,Pf].join(Tf)}}function Ff(e){var t=e.split(Tf);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Tf)}var Bf=function(){function e(e){if(!f().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Mf(this.modelPath)}return e.prototype.save=function(e){return s(this,void 0,void 0,function(){var t,n,r;return c(this,function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=vf(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(ff)return o.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,i=t.length;r<i;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return s(this,void 0,void 0,function(){var e,t,n,r,i,a,u;return c(this,function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(a=JSON.parse(i),t.format=a.format,t.generatedBy=a.generatedBy,t.convertedBy=a.convertedBy,t.userDefinedMetadata=a.userDefinedMetadata),null==(u=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(ff){var t=o.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i);return r.buffer}(u),[2,t]})})},e.URL_SCHEME="localstorage://",e}(),jf=function(e){return f().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Bf.URL_SCHEME)?(t=e.slice(Bf.URL_SCHEME.length),new Bf(t)):null;var t};mf.registerSaveRouter(jf),mf.registerLoadRouter(jf);var Lf=function(){function e(){k(f().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),k("undefined"==typeof window||void 0!==window.localStorage,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return s(this,void 0,void 0,function(){var e,t,n,r,o,i;return c(this,function(a){for(e={},t=Rf+Tf,n=Tf+If,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(t)&&o.endsWith(n)&&(i=Ff(o),e[i]=JSON.parse(this.LS.getItem(o)));return[2,e]})})},e.prototype.removeModel=function(e){return s(this,void 0,void 0,function(){var t,n;return c(this,function(r){var o;if(e=(o=e).startsWith(Bf.URL_SCHEME)?o.slice(Bf.URL_SCHEME.length):o,t=Mf(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]})})},e}();if(f().getBool("IS_BROWSER"))try{yf.registerManager(Bf.URL_SCHEME,new Lf)}catch(Oe){}var Wf="model",zf=".json",Uf=".weights.bin";function Vf(e){return new Promise(function(e){return setTimeout(e)}).then(e)}var Hf=function(){function e(t){if(!f().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t=Wf),this.modelTopologyFileName=t+zf,this.weightDataFileName=t+Uf}return e.prototype.save=function(e){return s(this,void 0,void 0,function(){var t,n,r,o,i,a;return c(this,function(u){switch(u.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=o,[4,Vf(function(){return i.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),null==e.weightData?[3,4]:((a=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=t,[4,Vf(function(){return a.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:vf(e)}]}})})},e.URL_SCHEME="downloads://",e}(),Gf=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return s(this,void 0,void 0,function(){var e,t,n=this;return c(this,function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(r,o){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result),u=a.modelTopology;if(null!=u){0===t.length&&r({modelTopology:u});var s=a.weightsManifest;if(null!=s){var c;try{c=n.checkManifestAndWeightFiles(s,t)}catch(e){return void o(e)}var l=[],f=[],p=[];s.forEach(function(e){e.paths.forEach(function(e){f.push(e),p.push(null)}),l.push.apply(l,e.weights)}),s.forEach(function(e){e.paths.forEach(function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,o=f.indexOf(e);p[o]=n,-1===p.indexOf(null)&&r({modelTopology:u,weightSpecs:l,weightData:df(p),format:a.format,generatedBy:a.generatedBy,convertedBy:a.convertedBy,userDefinedMetadata:a.userDefinedMetadata})},t.onerror=function(t){return o("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])})})}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},i.onerror=function(t){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(e)})]})})},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map(function(e){return hf(e.name)}),o={},i=0,a=e;i<a.length;i++)a[i].paths.forEach(function(e){var i=hf(e);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");o[e]=t[r.indexOf(i)]});if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return o},e}();function qf(e,t,n,r){!function(e){k(null!=e&&Array.isArray(e)&&e.length>0,function(){return"promises must be a none empty array"})}(e),function(e,t){k(e>=0&&e<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e}),k(t>=0&&t<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t}),k(t>=e,function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t})}(n=null==n?0:n,r=null==r?1:r);var o=0;return Promise.all(e.map(function(i){return i.then(function(i){var a=n+ ++o/e.length*(r-n);return t(a),i}),i}))}function Kf(e,t){return s(this,void 0,void 0,function(){var n,r,o,i,a,u,s,l,p;return c(this,function(c){switch(c.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?f().platform.fetch:t.fetchFunc,r=e.map(function(e){return n(e,t.requestInit,{isBinary:!0})}),o=0,i=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return a=c.sent(),[3,4];case 2:return[4,qf(r,t.onProgress,o,i)];case 3:a=c.sent(),c.label=4;case 4:return u=a.map(function(e){return e.arrayBuffer()}),s=.5,l=1,null!=t.onProgress?[3,6]:[4,Promise.all(u)];case 5:return p=c.sent(),[3,8];case 6:return[4,qf(u,t.onProgress,s,l)];case 7:p=c.sent(),c.label=8;case 8:return[2,p]}})})}function $f(e){var t=this;return function(n,r,o){return void 0===r&&(r=""),s(t,void 0,void 0,function(){var t,i,a,u,s,l,f,p,d,h;return c(this,function(c){switch(c.label){case 0:if(t=n.map(function(){return!1}),i={},a=null!=o?o.map(function(){return!1}):[],u=[],n.forEach(function(e,n){var r=0;e.weights.forEach(function(e){var s="quantization"in e?e.quantization.dtype:e.dtype,c=uf[s]*T(e.shape),l=function(){t[n]=!0,null==i[n]&&(i[n]=[]),i[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})};null!=o?o.forEach(function(t,n){t===e.name&&(l(),a[n]=!0)}):l(),u.push(e.name),r+=c})}),!a.every(function(e){return e}))throw s=o.filter(function(e,t){return!a[t]}),new Error("Could not find weights in manifest with names: "+s.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return l=t.reduce(function(e,t,n){return t&&e.push(n),e},[]),f=[],l.forEach(function(e){n[e].paths.forEach(function(e){var t=r+(r.endsWith("/")?"":"/")+e;f.push(t)})}),[4,e(f)];case 1:return p=c.sent(),d={},h=0,l.forEach(function(e){for(var t=n[e].paths.length,r=0,o=0;o<t;o++)r+=p[h+o].byteLength;for(var a=new ArrayBuffer(r),u=new Uint8Array(a),s=0,c=0;c<t;c++){var l=new Uint8Array(p[h+c]);u.set(l,s),s+=l.byteLength}i[e].forEach(function(e){var t=cf(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]}),h+=t}),[2,d]}})})}}mf.registerSaveRouter(function(e){return f().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Hf.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new Hf(e)}(e.slice(Hf.URL_SCHEME.length)):null});var Xf=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(k("function"==typeof t.fetchFunc,function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=t.fetchFunc):this.fetch=f().platform.fetch,k(null!=e&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&k(2===e.length,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return s(this,void 0,void 0,function(){var t,n,r,o;return c(this,function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((o=i.sent()).ok)return[2,{modelArtifactsInfo:vf(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},e.prototype.load=function(){return s(this,void 0,void 0,function(){var e,t,n,r,o,i,a,u,s,l,f,p;return c(this,function(c){switch(c.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=c.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");c.label=2;case 2:return c.trys.push([2,4,,5]),[4,e.json()];case 3:return t=c.sent(),[3,5];case 4:throw c.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,o=t.weightsManifest,i=t.generatedBy,a=t.convertedBy,u=t.format,s=t.userDefinedMetadata,null==r&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:p=c.sent(),l=p[0],f=p[1],c.label=7;case 7:return[2,{modelTopology:r,weightSpecs:l,weightData:f,userDefinedMetadata:s,generatedBy:i,convertedBy:a,format:u}]}})})},e.prototype.loadWeights=function(e){return s(this,void 0,void 0,function(){var t,n,r,o,i,a,u,s,l,f,p;return c(this,function(c){switch(c.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],o=n[1],i=this.weightPathPrefix||r,a=[],u=0,s=e;u<s.length;u++)l=s[u],a.push.apply(a,l.weights);return f=[],e.forEach(function(e){e.paths.forEach(function(e){f.push(i+e+o)})}),[4,Kf(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return p=c.sent(),[2,[a,df(p)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Yf(e){return null!=e.match(Xf.URL_SCHEME_REGEX)}var Qf=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every(function(e){return Yf(e)}):Yf(e))?Jf(e,{onProgress:t}):null};function Jf(e,t){return new Xf(e,t)}mf.registerSaveRouter(Qf),mf.registerLoadRouter(Qf);var Zf,ep=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return s(this,void 0,void 0,function(){return c(this,function(e){return[2,this.modelArtifacts]})})},e}(),tp=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){return[2,this.saveHandler(e)]})})},e}(),np=Object.freeze({browserFiles:function(e){return new Gf(e)},browserHTTPRequest:function(e,t){return Jf(e,t)},concatenateArrayBuffers:df,decodeWeights:cf,encodeWeights:function(e,t){return s(this,void 0,void 0,function(){var n,r,o,i,a,u=this;return c(this,function(l){switch(l.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e),i=function(i){var a=o[i],l=Array.isArray(e)?e[i].tensor:e[a];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+a+"': "+l.dtype);var f={name:a,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var p=new Promise(function(e){return s(u,void 0,void 0,function(){var t,n,r,o,i,a,u;return c(this,function(s){switch(s.label){case 0:return[4,l.bytes()];case 1:for(t=s.sent(),n=t.reduce(function(e,t){return e+t.length},0)+sf*t.length,r=new Uint8Array(n),o=0,i=0;i<t.length;i++)a=t[i],u=new Uint8Array(new Uint32Array([a.length]).buffer),r.set(u,o),o+=sf,r.set(a,o),o+=a.length;return e(r),[2]}})})});r.push(p)}else r.push(l.data());null!=t&&(f.group=t),n.push(f)},a=0;a<o.length;++a)i(a);return[4,Promise.all(r)];case 1:return[2,{data:lf(l.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new ep(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ep({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ep({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return mf.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:vf,getSaveHandlers:function(e){return mf.getSaveHandlers(e)},http:Jf,isHTTPScheme:Yf,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),s(this,void 0,void 0,function(){return c(this,function(o){return[2,$f(function(e){return Kf(e,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return mf.registerLoadRouter(e)},registerSaveRouter:function(e){return mf.registerSaveRouter(e)},weightsLoaderFactory:$f,withSaveHandler:function(e){return new tp(e)},copyModel:function(e,t){return s(this,void 0,void 0,function(){return c(this,function(n){return[2,xf(e,t,!1)]})})},listModels:function(){return s(this,void 0,void 0,function(){var e,t,n,r,o,i,a;return c(this,function(u){switch(u.label){case 0:e=yf.getSchemes(),t={},n=0,r=e,u.label=1;case 1:return n<r.length?(o=r[n],[4,yf.getManager(o).listModels()]):[3,4];case 2:for(a in i=u.sent())t[o+gf+a]=i[a];u.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return s(this,void 0,void 0,function(){return c(this,function(n){return[2,xf(e,t,!0)]})})},removeModel:function(e){return s(this,void 0,void 0,function(){var t;return c(this,function(n){return t=bf(e),[2,yf.getManager(t.scheme).removeModel(t.path)]})})}}),rp=ln({confusionMatrix_:function(e,t,n){var r=Qt(e,"labels","confusionMatrix"),o=Qt(t,"predictions","confusionMatrix");k(null==n||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),k(1===r.rank,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),k(1===o.rank,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),k(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),k(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var i=tr(r.asType("int32"),n),a=tr(o.asType("int32"),n);return i.transpose().matMul(a).asType("int32")}}),op=(Object.freeze({confusionMatrix:rp}),ln({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,i=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);a=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=v("FromPixels",je.backendName))return je.runKernel("FromPixels",{pixels:e},{numChannels:t});var u,s,c=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=c[0],f=c[1];if(a?u=e.getContext("2d").getImageData(0,0,l,f).data:r||n?u=e.data:(i||o)&&(null==Zf&&(Zf=document.createElement("canvas").getContext("2d")),Zf.canvas.width=l,Zf.canvas.height=f,Zf.drawImage(e,0,0,l,f),u=Zf.getImageData(0,0,l,f).data),4===t)s=new Int32Array(u);else{var p=l*f;s=new Int32Array(p*t);for(var d=0;d<p;d++)for(var h=0;h<t;++h)s[d*t+h]=u[4*d+h]}return bn(s,[f,l,t],"int32")}})),ip=Object.freeze({toPixels:function(e,t){return s(this,void 0,void 0,function(){var n,r,o,i,a,u,s,l,f,p,d,h,v,m,g,y,b,x,w,C,E,k,_;return c(this,function(c){switch(c.label){case 0:if(n=Qt(e,"img","toPixels"),e instanceof we||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return u=c.sent(),s=n.min(),l=n.max(),[4,Promise.all([s.data(),l.data()])];case 2:if(f=c.sent(),p=f[0],d=f[1],h=p[0],v=d[0],s.dispose(),l.dispose(),"float32"===n.dtype){if(h<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+v+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+v+"].")}for(m="float32"===n.dtype?255:1,g=new Uint8ClampedArray(i*o*4),y=0;y<o*i;++y)b=void 0,x=void 0,w=void 0,C=void 0,1===a?(b=u[y]*m,x=u[y]*m,w=u[y]*m,C=255):3===a?(b=u[3*y]*m,x=u[3*y+1]*m,w=u[3*y+2]*m,C=255):4===a&&(b=u[4*y]*m,x=u[4*y+1]*m,w=u[4*y+2]*m,C=u[4*y+3]*m),g[0+(E=4*y)]=Math.round(b),g[E+1]=Math.round(x),g[E+2]=Math.round(w),g[E+3]=Math.round(C);return null!=t&&(t.width=i,t.height=o,k=t.getContext("2d"),_=new ImageData(g,i,o),k.putImageData(_,0,0)),n!==e&&n.dispose(),[2,g]}})})},fromPixels:op}),ap=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),up=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function sp(e){k(null!=e.className,function(){return"Class being registered does not have the static className property defined."}),k("string"==typeof e.className,function(){return"className is required to be a string, but got type "+typeof e.className}),k(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),up.register(e)}Object.freeze({Serializable:ap,SerializationMap:up,registerClass:sp});var cp=.001,lp=.1;function fp(){return 32===je.backend.floatPrecision()?cp:lp}function pp(e,t,n){var r=!0;if((V(e)||V(t))&&(r=!1),V(e)&&V(t)&&(r=!0),r){var o=e.constructor.name,i=t.constructor.name;if(o!==i)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+i)}if(Array.isArray(e)&&Array.isArray(t)){var a=Xt(e),u=Xt(t);if(!R(a,u))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+u+"]")}var s=V(e)?e:O(e),c=V(t)?t:O(t);if(s.length!==c.length)throw new Error("Arrays have different lengths actual: "+s.length+" vs expected: "+c.length+".\nActual:   "+s+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var f=s[l],p=c[l];if(!n(f,p))throw new Error("Arrays differ: actual["+l+"] = "+f+", expected["+l+"] = "+p+".\nActual:   "+s+".\nExpected: "+c+".")}}function dp(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:lp,expectArraysClose:function(e,t,n){return null==n&&(n=fp()),pp(e,t,function(e,t){return dp(e,t,n)})},testEpsilon:fp,expectPromiseToFail:function(e,t){e().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return q(e)||q(e[0])||q(t)||q(t[0])?pp(e,n,function(e,t){return e==t}):pp(e,t,function(e,t){return dp(e,t,0)})},expectNumbersClose:function(e,t,n){if(null==n&&(n=fp()),!dp(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:Xi,webgl_util:Vt,forceHalfFloat:function(){f().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:ou,setWebGLContext:qe,GPGPUContext:Yi});var hp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),o=r.value,i=r.grads;if(null!=n){var a=n.map(function(e){return{name:e.name,tensor:i[e.name]}});this.applyGradients(a)}else this.applyGradients(i);return Kt(i),t?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){k(Y(e),function(){return"The f passed in variableGrads(f) must be a function"}),k(null==t||Array.isArray(t)&&t.every(function(e){return e instanceof Te}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=null!=t;if(!n)for(var r in t=[],je.registeredVariables)t.push(je.registeredVariables[r]);var o=n?t.filter(function(e){return!e.trainable}):null,i=t.length;k((t=t.filter(function(e){return e.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var a=je.gradients(e,t,null,!0),u=a.value,s=a.grads;k(s.some(function(e){return null!=e}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),k(0===u.rank,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+u.rank+" tensor"});var c={};return t.forEach(function(e,t){null!=s[t]&&(c[e.name]=s[t])}),null!=o&&o.forEach(function(e){return c[e.name]=null}),{value:u,grads:c}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&Kt(this.iterations_)},t.prototype.saveIterations=function(){return s(this,void 0,void 0,function(){return c(this,function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:mn(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return s(this,void 0,void 0,function(){return c(this,function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(e){return s(this,void 0,void 0,function(){return c(this,function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(e){return s(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}})})},t}(ap);Object.defineProperty(hp,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var vp=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this)||this;return o.learningRate=t,o.rho=n,o.epsilon=r,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==r&&(o.epsilon=je.backend.epsilon()),o}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var o=je.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:qt(function(){return Sn(o).variable(!1)})}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:qt(function(){return Sn(o).variable(!1)})});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=t.accumulatedGrads[r].variable,u=t.accumulatedUpdates[r].variable;qt(function(){var e=a.mul(t.rho).add(i.square().mul(1-t.rho)),n=u.add(t.epsilon).sqrt().div(a.add(t.epsilon).sqrt()).mul(i),r=u.mul(t.rho).add(n.square().mul(1-t.rho));a.assign(e),u.assign(r);var s=n.mul(-t.learningRate).add(o);o.assign(s)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(Kt(this.accumulatedGrads.map(function(e){return e.variable})),Kt(this.accumulatedUpdates.map(function(e){return e.variable})))},t.prototype.getWeights=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return s(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedUpdates=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(hp);sp(vp);var mp=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var o=je.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:qt(function(){return En(o.shape,t.initialAccumulatorValue).variable(!1)})});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=t.accumulatedGrads[r].variable;qt(function(){var e=a.add(i.square());a.assign(e);var n=i.div(e.add(je.backend.epsilon()).sqrt()).mul(-t.learningRate).add(o);o.assign(n)})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&Kt(this.accumulatedGrads.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(hp);sp(mp);var gp=function(e){function t(t,n,r,o){void 0===o&&(o=null);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],qt(function(){i.accBeta1=mn(n).variable(),i.accBeta2=mn(r).variable()}),null==o&&(i.epsilon=je.backend.epsilon()),i}return u(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e);qt(function(){var r=Os(1,t.accBeta1),o=Os(1,t.accBeta2);n.forEach(function(n,i){var a=je.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:qt(function(){return Sn(a).variable(!1)})}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:n+"/v",variable:qt(function(){return Sn(a).variable(!1)})});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=s.mul(t.beta1).add(u.mul(1-t.beta1)),f=c.mul(t.beta2).add(u.square().mul(1-t.beta2)),p=l.div(r),d=f.div(o);s.assign(l),c.assign(f);var h=p.div(d.sqrt().add(t.epsilon)).mul(-t.learningRate).add(a);a.assign(h)}}),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Kt(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedSecondMoment&&Kt(this.accumulatedSecondMoment.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return s(this,void 0,void 0,function(){var t,n=this;return c(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),qt(function(){n.accBeta1.assign(ks(n.beta1,n.iterations_+1)),n.accBeta2.assign(ks(n.beta2,n.iterations_+1))}),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedSecondMoment=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(hp);sp(gp);var yp=function(e){function t(t,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=0);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=o,a.decay=i,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],qt(function(){a.iteration=mn(0).variable(),a.accBeta1=mn(n).variable()}),null==o&&(a.epsilon=je.backend.epsilon()),a}return u(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e);qt(function(){var r=Os(1,t.accBeta1),o=ps(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach(function(n,i){var a=je.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:Sn(a).variable(!1)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:n+"/v",variable:Sn(a).variable(!1)});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=s.mul(t.beta1).add(u.mul(1-t.beta1)),f=c.mul(t.beta2),p=u.abs(),d=f.maximum(p);s.assign(l),c.assign(d);var h=o.div(r).mul(l.div(d.add(t.epsilon))).add(a);a.assign(h)}}),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Kt(this.accumulatedFirstMoment.map(function(e){return e.variable})),null!=this.accumulatedWeightedInfNorm&&Kt(this.accumulatedWeightedInfNorm.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return s(this,void 0,void 0,function(){return c(this,function(e){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(e){return s(this,void 0,void 0,function(){return c(this,function(e){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(hp);sp(yp);var bp=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=je.registeredVariables[n];qt(function(){var e=t.c.mul(o).add(i);i.assign(e)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return je.keep(e)}(mn(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}})})},t.prototype.setWeights=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(hp);sp(bp);var xp=function(e){function t(t,n,r){void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.learningRate=t,o.momentum=n,o.useNesterov=r,o.accumulations=[],o.m=mn(o.momentum),o}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var o=je.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:qt(function(){return Sn(o).variable(!1)})});var i=t.accumulations[r].variable,a=Array.isArray(e)?e[r].tensor:e[n];null!=a&&qt(function(){var e,n=t.m.mul(i).add(a);e=t.useNesterov?t.c.mul(a.add(n.mul(t.m))).add(o):t.c.mul(n).add(o),i.assign(n),o.assign(e)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&Kt(this.accumulations.map(function(e){return e.variable}))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return s(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return s(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(bp);sp(xp);var wp=function(e){function t(t,n,r,o,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===i&&(i=!1);var a=e.call(this)||this;if(a.learningRate=t,a.decay=n,a.momentum=r,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=i,null==o&&(a.epsilon=je.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return u(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map(function(e){return e.name}):Object.keys(e)).forEach(function(n,r){var o=je.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:qt(function(){return Sn(o).variable(!1)})}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:qt(function(){return Sn(o).variable(!1)})}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:qt(function(){return Sn(o).variable(!1)})});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;qt(function(){var e=a.mul(t.decay).add(i.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,s=n.mul(t.decay).add(i.mul(1-t.decay)),c=u.mul(t.momentum).add(i.mul(t.learningRate).div(e.sub(s.square().add(t.epsilon)).sqrt()));a.assign(e),n.assign(s),u.assign(c);var l=o.sub(c);o.assign(l)}else{var f=a.mul(t.decay).add(i.square().mul(1-t.decay));c=u.mul(t.momentum).add(i.mul(t.learningRate).div(f.add(t.epsilon).sqrt())),a.assign(f),u.assign(c),l=o.sub(c),o.assign(l)}})}}),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&Kt(this.accumulatedMeanSquares.map(function(e){return e.variable})),null!=this.accumulatedMeanGrads&&this.centered&&Kt(this.accumulatedMeanGrads.map(function(e){return e.variable})),null!=this.accumulatedMoments&&Kt(this.accumulatedMoments.map(function(e){return e.variable}))},t.prototype.getWeights=function(){return s(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map(function(e){return{name:e.originalName,tensor:e.variable}}))]}})})},t.prototype.setWeights=function(e){return s(this,void 0,void 0,function(){var t;return c(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.accumulatedMoments=e.slice(t,2*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(hp);sp(wp);var Cp=function(){function e(){}return e.sgd=function(e){return new bp(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new xp(e,t,n)},e.rmsprop=function(e,t,n,r,o){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new wp(e,t,n,r,o)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new gp(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new vp(e,t,n)},e.adamax=function(e,t,n,r,o){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new yp(e,t,n,r,o)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new mp(e,t)},e}();Cp.sgd,Cp.momentum,Cp.adadelta,Cp.adagrad,Cp.rmsprop,Cp.adamax,Cp.adam,"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame;we.prototype.squaredDifference=function(e){return uu(this,e)},be=Hl}).call(this,n(26),n(35),n(79).Buffer,n(83).setImmediate)},function(e,t,n){"use strict";n.d(t,"c",function(){return o}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return s});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function u(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,u)}s((r=r.apply(e,t||[])).next())})}function u(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(u){i=[6,u],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function s(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}},function(e,t,n){"use strict";e.exports=n(73)},function(e,t,n){"use strict";n.d(t,"b",function(){return a});var r=n(6),o=n(66),i=n(12);function a(e,t){return t&&"string"===typeof t?t.split(".").reduce(function(e,t){return e&&e[t]?e[t]:null},e):null}function u(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||o:a(e,n)||o,t&&(r=t(r)),r}t.a=function(e){var t=e.prop,n=e.cssProperty,s=void 0===n?e.prop:n,c=e.themeKey,l=e.transform,f=function(e){if(null==e[t])return null;var n=e[t],f=a(e.theme,c)||{};return Object(i.b)(e,n,function(e){var n=u(f,l,e);return e===n&&"string"===typeof e&&(n=u(f,l,"".concat(t).concat("default"===e?"":Object(o.a)(e)),e)),!1===s?n:Object(r.a)({},s,n)})};return f.propTypes={},f.filterProps=[t],f}},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(36);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";e.exports=n(89)},function(e,t,n){"use strict";function r(e){var t,n,o="";if("string"===typeof e||"number"===typeof e)o+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}t.a=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}},,function(e,t,n){"use strict";var r=n(2),o=n(50);n(33),n(48);var i=n(17),a=n(24);n.d(t,"a",function(){return m}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return c});var u={}.hasOwnProperty,s=Object(r.createContext)("undefined"!==typeof HTMLElement?Object(o.a)({key:"css"}):null);s.Provider;var c=function(e){return Object(r.forwardRef)(function(t,n){var o=Object(r.useContext)(s);return e(t,o,n)})},l=Object(r.createContext)({});var f=r.useInsertionEffect?r.useInsertionEffect:function(e){e()};function p(e){f(e)}var d="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",h=function(e,t){var n={};for(var r in t)u.call(t,r)&&(n[r]=t[r]);return n[d]=e,n},v=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;Object(i.c)(t,n,r);p(function(){return Object(i.b)(t,n,r)});return null},m=c(function(e,t,n){var o=e.css;"string"===typeof o&&void 0!==t.registered[o]&&(o=t.registered[o]);var s=e[d],c=[o],f="";"string"===typeof e.className?f=Object(i.a)(t.registered,c,e.className):null!=e.className&&(f=e.className+" ");var p=Object(a.a)(c,void 0,Object(r.useContext)(l));f+=t.key+"-"+p.name;var h={};for(var m in e)u.call(e,m)&&"css"!==m&&m!==d&&(h[m]=e[m]);return h.ref=n,h.className=f,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v,{cache:t,serialized:p,isStringTag:"string"===typeof s}),Object(r.createElement)(s,h))})},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return u});n(14),n(4),n(55),n(22);var r={xs:0,sm:600,md:900,lg:1200,xl:1536},o={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function i(e,t,n){var i=e.theme||{};if(Array.isArray(t)){var a=i.breakpoints||o;return t.reduce(function(e,r,o){return e[a.up(a.keys[o])]=n(t[o]),e},{})}if("object"===typeof t){var u=i.breakpoints||o;return Object.keys(t).reduce(function(e,o){if(-1!==Object.keys(u.values||r).indexOf(o)){e[u.up(o)]=n(t[o],o)}else{var i=o;e[i]=t[i]}return e},{})}return n(t)}function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null==t?void 0:null==(e=t.keys)?void 0:e.reduce(function(e,n){return e[t.up(n)]={},e},{}))||{}}function u(e,t){return e.reduce(function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e},t)}},function(e,t,n){"use strict";var r=n(66);t.a=r.a},function(e,t,n){"use strict";var r=n(34);var o=n(36);function i(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var r=n(7),o=n(12),i=n(3),a=n(22);n.d(t,"b",function(){return h}),n.d(t,"a",function(){return v}),n.d(t,"d",function(){return m});var u={m:"margin",p:"padding"},s={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}(function(e){if(e.length>2){if(!c[e])return[e];e=c[e]}var t=e.split(""),n=Object(r.a)(t,2),o=n[0],i=n[1],a=u[o],l=s[i]||"";return Array.isArray(l)?l.map(function(e){return a+e}):[a+l]}),f=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],p=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[].concat(f,p);function h(e,t,n,r){var o=Object(i.b)(e,t)||n;return"number"===typeof o?function(e){return"string"===typeof e?e:o*e}:Array.isArray(o)?function(e){return"string"===typeof e?e:o[e]}:"function"===typeof o?o:function(){}}function v(e){return h(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce(function(e,r){return e[r]=m(t,n),e},{})}}(l(n),r),a=e[n];return Object(o.b)(e,a,i)}function y(e,t){var n=v(e.theme);return Object.keys(e).map(function(r){return g(e,t,r,n)}).reduce(a.a,{})}function b(e){return y(e,f)}function x(e){return y(e,p)}function w(e){return y(e,d)}b.propTypes={},b.filterProps=f,x.propTypes={},x.filterProps=p,w.propTypes={},w.filterProps=d;t.c=w},function(e,t,n){"use strict";var r=n(14),o=n(7),i=n(4),a=n(5),u=n(44),s=n(113),c=n(66),l=["variant"];function f(e){return 0===e.length}function p(e){var t=e.variant,n=Object(a.a)(e,l),r=t||"";return Object.keys(n).sort().forEach(function(t){r+="color"===t?f(r)?e[t]:Object(c.a)(e[t]):"".concat(f(r)?t:Object(c.a)(t)).concat(Object(c.a)(e[t].toString()))}),r}var d=n(108),h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],v=["theme"],m=["theme"];function g(e){return 0===Object.keys(e).length}var y=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},b=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach(function(e){var t=p(e.props);r[t]=e.style}),r},x=function(e,t,n,r){var o,i,a=e.ownerState,u=void 0===a?{}:a,s=[],c=null==n?void 0:null==(o=n.components)?void 0:null==(i=o[r])?void 0:i.variants;return c&&c.forEach(function(n){var r=!0;Object.keys(n.props).forEach(function(t){u[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)}),r&&s.push(t[p(n.props)])}),s};function w(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var C=Object(s.a)();var E=n(42);n.d(t,"b",function(){return k});var k=function(e){return w(e)&&"classes"!==e},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?C:t,s=e.rootShouldForwardProp,c=void 0===s?w:s,l=e.slotShouldForwardProp,f=void 0===l?w:l,p=e.styleFunctionSx,E=void 0===p?d.a:p;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.name,l=t.slot,p=t.skipVariantsResolver,d=t.skipSx,C=t.overridesResolver,k=Object(a.a)(t,h),_=void 0!==p?p:l&&"Root"!==l||!1,S=d||!1,O=w;"Root"===l?O=c:l&&(O=f);var T=Object(u.a)(e,Object(i.a)({shouldForwardProp:O,label:void 0},k)),R=function(e){for(var t=arguments.length,u=new Array(t>1?t-1:0),c=1;c<t;c++)u[c-1]=arguments[c];var l=u?u.map(function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,o=Object(a.a)(t,v);return e(Object(i.a)({theme:g(r)?n:r},o))}:e}):[],f=e;s&&C&&l.push(function(e){var t=g(e.theme)?n:e.theme,r=y(s,t);if(r){var i={};return Object.entries(r).forEach(function(t){var n=Object(o.a)(t,2),r=n[0],a=n[1];i[r]="function"===typeof a?a(e):a}),C(e,i)}return null}),s&&!_&&l.push(function(e){var t=g(e.theme)?n:e.theme;return x(e,b(s,t),t,s)}),S||l.push(function(e){var t=g(e.theme)?n:e.theme;return E(Object(i.a)({},e,{theme:t}))});var p=l.length-u.length;if(Array.isArray(e)&&p>0){var d=new Array(p).fill("");(f=[].concat(Object(r.a)(e),Object(r.a)(d))).raw=[].concat(Object(r.a)(e.raw),Object(r.a)(d))}else"function"===typeof e&&e.__emotion_real!==e&&(f=function(t){var r=t.theme,o=Object(a.a)(t,m);return e(Object(i.a)({theme:g(r)?n:r},o))});return T.apply(void 0,[f].concat(Object(r.a)(l)))};return T.withConfig&&(R.withConfig=T.withConfig),R}}({defaultTheme:E.a,rootShouldForwardProp:k});t.a=_},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o});function r(e,t,n){var r="";return n.split(" ").forEach(function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "}),r}var o=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},i=function(e,t,n){o(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0);i=i.next}while(void 0!==i)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(6);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},function(e,t,n){e.exports=n(78)},function(e,t,n){"use strict";var r=n(0);function o(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach(function(n,r){var o=n.x,i=n.y,a=t[r];e.moveTo(a.x,a.y),e.lineTo(o,i)}),n){var r=t[t.length-1],o=t[0];if(!r||!o)return;e.moveTo(r.x,r.y),e.lineTo(o.x,o.y)}e.stroke()}var i=n(1),a=function(){function e(e,t){if(!v(e)||!v(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function u(e,t){return e instanceof r.a&&e.shape.length===t}function s(e){return u(e,3)}function c(e){return u(e,4)}function l(e){return e%2===0}function f(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function p(e){return e&&e.width&&e.height}function d(e){return e.reduce(function(e,t){return e.add(t)},new g(0,0)).div(new g(e.length,e.length))}function h(e,t,n){return Array(e).fill(0).map(function(e,r){return t+r*n})}function v(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function m(e){return v(e)&&0<=e&&e<=1}var g=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),y=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},o=[r.left,r.top,r.right,r.bottom].every(v),i=[r.x,r.y,r.width,r.height].every(v);if(!i&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],u=a[0],s=a[1],c=a[2],l=a[3];e.assertIsValidBox({x:u,y:s,width:c,height:l},"Box.constructor",n),this._x=u,this._y=s,this._width=c,this._height=l}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(v)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new g(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new g(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new g(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new g(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.round(e)});return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(e){return Math.floor(e)});return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this.x,n=this.y,r=this.width,o=this.height,i=Math.abs(r-o);return r<o&&(t-=i/2,r+=i),o<r&&(n-=i/2,o+=i),new e({x:t,y:n,width:r,height:o})},e.prototype.rescale=function(t){var n=p(t)?t.width:t,r=p(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this.x,o=this.y,i=this.right,a=this.bottom,u=Math.max(r,0),s=Math.max(o,0),c=i-u,l=a-s;return new e({x:u,y:s,width:Math.min(c,t-u),height:Math.min(l,n-s)}).floor()},e.prototype.shift=function(t,n){var r=this.width,o=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:o})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,o=n,i=r,a=this.left,u=this.top,s=this.right,c=this.bottom;return s>t&&(o=-s+t+n,s=t),c>e&&(i=-c+e+r,c=e),a<1&&(i=2-a,a=1),u<1&&(i=2-u,u=1),{dy:1,edy:i,dx:1,edx:o,y:u,ey:c,x:a,ex:s,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),b=function(e){function t(t,n,r,o,i){return void 0===i&&(i=!1),e.call(this,{left:t,top:n,right:r,bottom:o},i)||this}return Object(i.c)(t,e),t}(y),x=function(){function e(e,t,n,r,o){this._imageDims=new a(o.width,o.height),this._score=e,this._classScore=t,this._className=n,this._box=new y(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new y(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),w=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return Object(i.c)(t,e),t.prototype.forSize=function(n,r){var o=e.prototype.forSize.call(this,n,r);return new t(o.score,o.relativeBox,o.imageDims)},t}(x);function C(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function E(e,t,n,r){void 0===r&&(r=!0);for(var o=t.map(function(e,t){return{score:e,boxIndex:t}}).sort(function(e,t){return e.score-t.score}).map(function(e){return e.boxIndex}),i=[],a=function(){var t=o.pop();i.push(t);for(var a=o,u=[],s=0;s<a.length;s++){var c=a[s],l=e[t],f=e[c];u.push(C(l,f,r))}o=o.filter(function(e,t){return u[t]<=n})};o.length>0;)a();return i}function k(e,t){return r.L(function(){var n=t[0],o=t[1],a=t[2],u=r.n(Object(i.e)(e.shape.slice(0,3),[1]),n),s=r.n(Object(i.e)(e.shape.slice(0,3),[1]),o),c=r.n(Object(i.e)(e.shape.slice(0,3),[1]),a),l=r.h([u,s,c],3);return r.F(e,l)})}function _(e){return 1/(1+Math.exp(-e))}var S=function(e){function t(t,n,r,o,i){return void 0===i&&(i=!1),e.call(this,{x:t,y:n,width:r,height:o},i)||this}return Object(i.c)(t,e),t}(y),O=function(){function e(e,t,n){void 0===n&&(n=new g(0,0));var r=t.width,o=t.height;this._imgDims=new a(r,o),this._shift=n,this._positions=e.map(function(e){return e.mul(new g(r,o)).add(n)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new g(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new g(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new g(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof w?e.box.floor():new y(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),o=r.useDlibAlignment,i=r.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],o=function(e){return r.sub(e).magnitude()},i=(o(t)+o(n))/2,a=Math.floor(i/.45),u=d(e),s=Math.floor(Math.max(0,u.x-.5*a)),c=Math.floor(Math.max(0,u.y-.43*a));return new S(s,c,Math.min(a,this.imageWidth+s),Math.min(a,this.imageHeight+c))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map(function(e){return e.x}),n=e.map(function(e){return e.y}),r=t.reduce(function(e,t){return t<e?t:e},1/0),o=n.reduce(function(e,t){return t<e?t:e},1/0),i=t.reduce(function(e,t){return e<t?t:e},0),a=n.reduce(function(e,t){return e<t?t:e},0);return new b(r,o,i,a)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],d([e[3],e[4]])]},t}(O),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(d)},t}(O),I=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+f(this.distance)+")":"")},e}(),A=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return Object(i.c)(t,e),t.assertIsValidLabeledBox=function(e,t){if(y.assertIsValidBox(e,t),!v(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(y),N=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(e){return!(e instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(e){return new Float32Array(e)});return new e(t.label,n)},e}();!function(e){function t(t,n,r,o){var i=e.call(this,t,n)||this;return i._score=r,i._classScore=o,i}Object(i.c)(t,e),t.assertIsValidPredictedBox=function(e,t){if(A.assertIsValidLabeledBox(e,t),!m(e.score)||!m(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(A);function D(e){return e.detection instanceof w}function P(e,t){var n={detection:t};return Object.assign({},e,n)}function M(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}var F=n(41),B=n(53);function j(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}var L,W=n(54);function z(e){L=e}function U(){j()&&z(M()),Object(W.a)()&&z(Object(B.a)())}var V,H={getEnv:function(){if(!L)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return L},setEnv:z,initialize:U,createBrowserEnv:M,createFileSystem:F.a,createNodejsEnv:B.a,monkeyPatch:function(e){if(L||U(),!L)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?L.Canvas:t,r=e.Image,o=void 0===r?L.Image:r;L.Canvas=n,L.Image=o,L.createCanvasElement=e.createCanvasElement||function(){return new n},L.createImageElement=e.createImageElement||function(){return new o},L.ImageData=e.ImageData||L.ImageData,L.Video=e.Video||L.Video,L.fetch=e.fetch||L.fetch,L.readFile=e.readFile||L.readFile},isBrowser:j,isNodejs:W.a};function G(e){return H.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function q(e){var t=H.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=G(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=r.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}U(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(V||(V={}));var K=function(){return function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,o=e.fontSize,i=e.fontStyle,a=e.padding;this.anchorPosition=t||V.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=i||"Georgia",this.padding=a||4}}(),$=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new K(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(t){return e.measureText(t).width}).reduce(function(e,t){return e<t?t:e},0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===V.BOTTOM_RIGHT||n===V.TOP_RIGHT,o=n===V.BOTTOM_LEFT||n===V.BOTTOM_RIGHT,i=this.measureWidth(e),a=this.measureHeight(),u=r?this.anchor.x-i:this.anchor.x,s=o?this.anchor.y-a:this.anchor.y;if(t){var c=t.width,l=t.height;return{x:Math.max(Math.min(u,c-i),0),y:Math.max(Math.min(s,l-a),0)}}return{x:u,y:s}},e.prototype.draw=function(e){var t=G(e),n=q(t),r=this.options,o=r.backgroundColor,i=r.fontColor,a=r.fontSize,u=r.fontStyle,s=r.padding;n.font=a+"px "+u;var c=this.measureWidth(n),l=this.measureHeight();n.fillStyle=o;var f=this.getUpperLeft(n,t);n.fillRect(f.x,f.y,c,l),n.fillStyle=i,this.text.forEach(function(e,t){var r=s+f.x,o=s+f.y+(t+1)*a;n.fillText(e,r,o)})},e}(),X=function(){return function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,o=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var i={anchorPosition:V.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new K(Object.assign({},i,o))}}();!function(){function e(e,t){void 0===t&&(t={}),this.box=new y(e),this.options=new X(t)}e.prototype.draw=function(e){var t=q(e),n=this.options,r=n.boxColor,o=n.lineWidth,i=this.box,a=i.x,u=i.y,s=i.width,c=i.height;t.strokeStyle=r,t.lineWidth=o,t.strokeRect(a,u,s,c);var l=this.options.label;l&&new $([l],{x:a-o/2,y:u},this.options.drawLabelOptions).draw(e)}}();function Y(e){var t=H.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function Q(e){var t=H.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new a(e.naturalWidth,e.naturalHeight):e instanceof r?new a(e.videoWidth,e.videoHeight):new a(e.width,e.height)}function J(e){var t=e.width,n=e.height,r=(0,H.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function Z(e,t){var n=H.getEnv().ImageData;if(!(e instanceof n)&&!Y(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||Q(e),o=r.width,i=r.height,a=J({width:o,height:i});return e instanceof n?q(a).putImageData(e,0,0):q(a).drawImage(e,0,0,o,i),a}function ee(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,o,a,u,s,l;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=t||H.getEnv().createCanvasElement(),o=e.shape.slice(c(e)?1:0),a=o[0],u=o[1],s=o[2],l=r.L(function(){return e.as3D(a,u,s).toInt()}),[4,r.f.toPixels(l,n)];case 1:return i.sent(),l.dispose(),[2,n]}})})}function te(e){var t=H.getEnv(),n=t.Image,r=t.Canvas,o=t.Video;return e instanceof n||e instanceof r||e instanceof o}var ne=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(e,t){if(s(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(c(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var o=e instanceof H.getEnv().Canvas?e:Z(e);n._canvases[t]=o,n._inputDimensions[t]=[o.height,o.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return h(this.batchSize,0,1).map(function(t,n){return e.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,o=t/Math.max(r,n);return new a(Math.round(n*o),Math.round(r*o))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,r.L(function(){var o=h(n.batchSize,0,1).map(function(o){var i=n.getInput(o);if(i instanceof r.a){var a=c(i)?i:i.expandDims();return(a=function(e,t){return void 0===t&&(t=!1),r.L(function(){var n=e.shape.slice(1),o=n[0],i=n[1];if(o===i)return e;var a=Math.abs(o-i),u=Math.round(a*(t?.5:1)),s=o>i?2:1,c=function(t){var n=e.shape.slice();return n[s]=t,r.n(n,0)},l=c(u),f=a-l.shape[s],p=[t&&f?c(f):null,e,l].filter(function(e){return!!e}).map(function(e){return e.toFloat()});return r.h(p,s)})}(a,t)).shape[1]===e&&a.shape[2]===e||(a=r.o.resizeBilinear(a,[e,e])),a.as3D(e,e,3)}if(i instanceof H.getEnv().Canvas)return r.f.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=H.getEnv(),o=r.Image,i=r.Canvas;if(!(e instanceof o||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=Q(e),u=t/Math.max(a.height,a.width),s=u*a.width,c=u*a.height,l=J({width:t,height:t}),f=e instanceof i?e:Z(e),p=Math.abs(s-c)/2,d=n&&s<c?p:0,h=n&&c<s?p:0;return q(l).drawImage(f,d,h,s,c),l}(i,e,t));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+i)});return r.E(o.map(function(e){return e.toFloat()})).as4D(n.batchSize,e,e,3)})},e}();function re(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,r;return Object(i.d)(this,function(o){switch(o.label){case 0:if(e instanceof ne)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(G)).forEach(function(e,r){if(!te(e)&&!s(e)&&!c(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(c(e)){var o=e.shape[0];if(1!==o)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+o+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(e){return te(e)&&(t=e,new Promise(function(e,n){if(t instanceof H.getEnv().Canvas||Y(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",o),e(t))}function o(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",o),n(e))}t.addEventListener("load",r),t.addEventListener("error",o)}));var t}))];case 1:return o.sent(),[2,new ne(r,Array.isArray(e))]}})})}function oe(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,a,u,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=H.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,re(e)];case 1:if((o=i.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(a=o.getInput(0))instanceof n?(u=a,[3,4]):[3,2];case 2:return[4,ee(a)];case 3:u=i.sent(),i.label=4;case 4:r=u,i.label=5;case 5:return s=q(r),[2,t.map(function(e){return e instanceof w?e.forSize(r.width,r.height).box.floor():e}).map(function(e){return e.clipAtImageBorders(r.width,r.height)}).map(function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=J({width:r,height:o});return q(i).putImageData(s.getImageData(t,n,r,o),0,0),i})]}})})}function ie(e,t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){if(!s(e)&&!c(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(c(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,r.L(function(){var n=e.shape.slice(c(e)?1:0),o=n[0],i=n[1],a=n[2];return t.map(function(e){return e instanceof w?e.forSize(i,o).box:e}).map(function(e){return e.clipAtImageBorders(i,o)}).map(function(t){var n=t.x,u=t.y,s=t.width,c=t.height;return r.C(e.as3D(o,i,a),[u,n,0],[c,s,a])})})]})})}function ae(e,t){return Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,(0,H.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}function ue(e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return[4,ae(e)];case 1:return[2,t.sent().json()]}})})}function se(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",o=(e=e.replace(r,"")).split("/").filter(function(e){return e}),i=e.endsWith(".json")?o[o.length-1]:n,a=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return{modelBaseUri:a=e.startsWith("/")?"/"+a:a,manifestUri:"/"===a?"/"+i:a+"/"+i}}function ce(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,o,a,u;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=se(e,t),o=n.manifestUri,a=n.modelBaseUri,[4,ue(o)];case 1:return u=i.sent(),[2,r.p.loadWeights(u,a)]}})})}function le(e,t,n){void 0===n&&(n=!1);var r=n?Q(t):t,o=r.width,i=r.height;return e.width=o,e.height=i,{width:o,height:i}}var fe=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,o=n.objProp;r[o].dispose(),r[o]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof r.b})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof r.b)})},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())})},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var n=t.path,o=t.tensor,i=r.G(o.dataSync());o.dispose(),e.reassignParamFromPath(n,i)})},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},e.prototype.load=function(e){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},e.prototype.loadFromUri=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,ce(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}})})},e.prototype.loadFromDisk=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,o,a,u,s,c,l,f,p;return Object(i.d)(this,function(i){switch(i.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=H.getEnv().readFile,n=se(e,this.getDefaultModelName()),o=n.manifestUri,a=n.modelBaseUri,u=function(e){return Promise.all(e.map(function(e){return t(e).then(function(e){return e.buffer})}))},s=r.p.weightsLoaderFactory(u),f=(l=JSON).parse,[4,t(o)];case 1:return c=f.apply(l,[i.sent().toString()]),[4,s(c,a)];case 2:return p=i.sent(),this.loadFromWeightMap(p),[2]}})})},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}},{nextObj:this.params}),n=t.obj,o=t.objProp;if(!n||!o||!(n[o]instanceof r.a))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:o}},e}();function pe(e,t,n){return r.L(function(){var o=r.z(e,t.depthwise_filter,t.pointwise_filter,n,"same");return o=r.c(o,t.bias)})}function de(e,t,n){return void 0===n&&(n=!1),r.L(function(){var o=r.w(n?r.c(r.i(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):pe(e,t.conv0,[2,2])),i=pe(o,t.conv1,[1,1]),a=pe(r.w(r.c(o,i)),t.conv2,[1,1]);return r.w(r.c(o,r.c(i,a)))})}function he(e,t,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!0),r.L(function(){var i=r.w(n?r.c(r.i(e,t.conv0.filters,o?[2,2]:[1,1],"same"),t.conv0.bias):pe(e,t.conv0,o?[2,2]:[1,1])),a=pe(i,t.conv1,[1,1]),u=pe(r.w(r.c(i,a)),t.conv2,[1,1]),s=pe(r.w(r.c(i,r.c(a,u))),t.conv3,[1,1]);return r.w(r.c(i,r.c(a,r.c(u,s))))})}function ve(e,t,n,o){return void 0===n&&(n="same"),void 0===o&&(o=!1),r.L(function(){var i=r.c(r.i(e,t.filters,[1,1],n),t.bias);return o?r.w(i):i})}function me(e,t){Object.keys(e).forEach(function(n){t.some(function(e){return e.originalPath===n})||e[n].dispose()})}function ge(e,t){return function(n,o,i,a){var u=r.K(e(n*o*i*i),[i,i,n,o]),s=r.H(e(o));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:u,bias:s}}}function ye(e,t){return function(n,o,i){var a=r.I(e(n*o),[n,o]),u=r.H(e(o));return t.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:a,bias:u}}}var be=function(){return function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}}();function xe(e,t){return function(n,o,i){var a=r.K(e(9*n),[3,3,n,1]),u=r.K(e(n*o),[1,1,n,o]),s=r.H(e(o));return t.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new be(a,u,s)}}function we(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new be(n,r,o)}}function Ce(e,t){return function(n,r,o){var i=e[n];if(!u(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:o||n}),i}}function Ee(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function ke(e,t){var n=ge(e,t),r=xe(e,t);function o(e,t,o,i){return void 0===i&&(i=!1),{conv0:i?n(e,t,3,o+"/conv0"):r(e,t,o+"/conv0"),conv1:r(t,t,o+"/conv1"),conv2:r(t,t,o+"/conv2")}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:function(e,t,n,i){void 0===i&&(i=!1);var a=o(e,t,n,i);return{conv0:a.conv0,conv1:a.conv1,conv2:a.conv2,conv3:r(t,t,n+"/conv3")}}}}function _e(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function Se(e,t){var n=Ce(e,t),r=_e(n),o=we(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2"),conv3:o(e+"/conv3")}}}}var Oe=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return Object(i.c)(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return r.L(function(){var n=he(k(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(r.y(255)),t.dense0,!0);return n=he(n,t.dense1),n=he(n,t.dense2),n=he(n,t.dense3),n=r.d(n,[7,7],[2,2],"valid")})},t.prototype.forward=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,re(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=Se(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return me(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=Ee(e),r=n.extractWeights,o=n.getRemainingWeights,i=ke(r,t).extractDenseBlock4Params,a=i(3,32,"dense0",!0),u=i(32,64,"dense1"),s=i(64,128,"dense2"),c=i(128,256,"dense3");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:u,dense2:s,dense3:c}}}(e)},t}(fe);function Te(e,t){return r.L(function(){return r.c(r.q(e,t.weights),t.bias)})}function Re(e){var t={},n={};return Object.keys(e).forEach(function(r){(r.startsWith("fc")?n:t)[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var Ie=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return r.L(function(){var r=e instanceof ne?t.faceFeatureExtractor.forwardInput(e):e;return Te(r.as2D(r.shape[0],-1),n.fc)})},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],o=Ee(e),i=o.extractWeights,a=o.getRemainingWeights,u=ye(i,r)(t,n,"fc");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:u}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=Re(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t,n=[],r=Ce(e,n),o={fc:(t="fc",{weights:r(t+"/weights",2),bias:r(t+"/bias",1)})};return me(e,n),{params:o,paramMappings:n}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,o=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},t}(fe),Ae=["neutral","happy","sad","angry","fearful","disgusted","surprised"],Ne=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);Ae.forEach(function(n,r){t[n]=e[r]})}return e.prototype.asSortedArray=function(){var e=this;return Ae.map(function(t){return{expression:t,probability:e[t]}}).sort(function(e,t){return t.probability-e.probability})},e}(),De=function(e){function t(t){return void 0===t&&(t=new Oe),e.call(this,"FaceExpressionNet",t)||this}return Object(i.c)(t,e),t.prototype.forwardInput=function(e){var t=this;return r.L(function(){return r.D(t.runNet(e))})},t.prototype.forward=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,re(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictExpressions=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,o,a,u=this;return Object(i.d)(this,function(s){switch(s.label){case 0:return[4,re(e)];case 1:return t=s.sent(),[4,this.forwardInput(t)];case 2:return n=s.sent(),[4,Promise.all(r.O(n).map(function(e){return Object(i.b)(u,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}})})}))];case 3:return o=s.sent(),n.dispose(),a=o.map(function(e){return new Ne(e)}),[2,t.isBatchInput?a:a[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(Ie);function Pe(e,t){var n={expressions:t};return Object.assign({},e,n)}function Me(e){return D(e)&&e.landmarks instanceof O&&e.unshiftedLandmarks instanceof O&&e.alignedRect instanceof w}function Fe(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),o=r.align(),i=e.detection.imageDims,a={landmarks:r,unshiftedLandmarks:t,alignedRect:new w(e.detection.score,o.rescale(i.reverse()),i)};return Object.assign({},e,a)}var Be=function(){return function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,o=void 0===r||r,i=e.lineWidth,a=e.lineColor,u=e.pointSize,s=e.pointColor;this.drawLines=n,this.drawPoints=o,this.lineWidth=i||1,this.pointSize=u||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"}}();!function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new Be(t)}e.prototype.draw=function(e){var t=q(e),n=this.options,r=n.drawLines,i=n.drawPoints,a=n.lineWidth,u=n.lineColor,s=n.pointSize,c=n.pointColor;if(r&&this.faceLandmarks instanceof R&&(t.strokeStyle=u,t.lineWidth=a,o(t,this.faceLandmarks.getJawOutline()),o(t,this.faceLandmarks.getLeftEyeBrow()),o(t,this.faceLandmarks.getRightEyeBrow()),o(t,this.faceLandmarks.getNose()),o(t,this.faceLandmarks.getLeftEye(),!0),o(t,this.faceLandmarks.getRightEye(),!0),o(t,this.faceLandmarks.getMouth(),!0)),i){t.strokeStyle=c,t.fillStyle=c;this.faceLandmarks.positions.forEach(function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()})}}}();function je(e,t){var n=[],r=Ee(e),o=r.extractWeights,i=r.getRemainingWeights,a=function(e,t){var n=ge(e,t),r=xe(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,o){return{separable_conv0:r(e,t,o+"/separable_conv0"),separable_conv1:r(t,t,o+"/separable_conv1"),expansion_conv:n(e,t,1,o+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(o,n),u=a.extractConvParams,s=a.extractSeparableConvParams,c=a.extractReductionBlockParams,l=a.extractMainBlockParams,f={conv_in:u(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},p={};h(t,0,1).forEach(function(e){p["main_block_"+e]=l(128,"middle_flow/main_block_"+e)});var d={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:s(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:f,middle_flow:p,exit_flow:d}}}function Le(e,t){var n=[],r=function(e,t){var n=Ce(e,t),r=_e(n),o=we(n);return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),separable_conv2:o(e+"/separable_conv2")}}}}(e,n),o=r.extractConvParams,i=r.extractSeparableConvParams,a=r.extractReductionBlockParams,u=r.extractMainBlockParams,s={conv_in:o("entry_flow/conv_in"),reduction_block_0:a("entry_flow/reduction_block_0"),reduction_block_1:a("entry_flow/reduction_block_1")},c={};h(t,0,1).forEach(function(e){c["main_block_"+e]=u("middle_flow/main_block_"+e)});var l={reduction_block:a("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return me(e,n),{params:{entry_flow:s,middle_flow:c,exit_flow:l},paramMappings:n}}function We(e,t,n){return r.c(r.i(e,t.filters,n,"same"),t.bias)}function ze(e,t,n){void 0===n&&(n=!0);var o=n?r.w(e):e;return o=pe(o,t.separable_conv0,[1,1]),o=pe(r.w(o),t.separable_conv1,[1,1]),o=r.s(o,[3,3],[2,2],"same"),o=r.c(o,We(e,t.expansion_conv,[2,2]))}var Ue,Ve=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return Object(i.c)(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return r.L(function(){var o=k(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(r.y(256)),i=r.w(We(o,n.entry_flow.conv_in,[2,2]));return i=ze(i,n.entry_flow.reduction_block_0,!1),i=ze(i,n.entry_flow.reduction_block_1),h(t._numMainBlocks,0,1).forEach(function(e){i=function(e,t){var n=pe(r.w(e),t.separable_conv0,[1,1]);return n=pe(r.w(n),t.separable_conv1,[1,1]),n=pe(r.w(n),t.separable_conv2,[1,1]),n=r.c(n,e)}(i,n.middle_flow["main_block_"+e])}),i=ze(i,n.exit_flow.reduction_block),i=r.w(pe(i,n.exit_flow.separable_conv,[1,1]))})},t.prototype.forward=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,re(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Le(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return je(e,this._numMainBlocks)},t}(fe);!function(e){e.FEMALE="female",e.MALE="male"}(Ue||(Ue={}));var He=function(e){function t(t){void 0===t&&(t=new Ve(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return r.L(function(){var o=e instanceof ne?t.faceFeatureExtractor.forwardInput(e):e,i=r.d(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1);return{age:Te(i,n.fc.age).as1D(),gender:Te(i,n.fc.gender)}})},t.prototype.forwardInput=function(e){var t=this;return r.L(function(){var n=t.runNet(e),o=n.age,i=n.gender;return{age:o,gender:r.D(i)}})},t.prototype.forward=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,re(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.predictAgeAndGender=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,o,a,u,s,c=this;return Object(i.d)(this,function(l){switch(l.label){case 0:return[4,re(e)];case 1:return t=l.sent(),[4,this.forwardInput(t)];case 2:return n=l.sent(),o=r.O(n.age),a=r.O(n.gender),u=o.map(function(e,t){return{ageTensor:e,genderTensor:a[t]}}),[4,Promise.all(u.map(function(e){var t=e.ageTensor,n=e.genderTensor;return Object(i.b)(c,void 0,void 0,function(){var e,r,o,a,u;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,t.data()];case 1:return e=i.sent()[0],[4,n.data()];case 2:return r=i.sent()[0],a=(o=r>.5)?Ue.MALE:Ue.FEMALE,u=o?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:a,genderProbability:u}]}})})}))];case 3:return s=l.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?s:s[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=Ee(e),r=n.extractWeights,o=n.getRemainingWeights,i=ye(r,t),a=i(512,1,"fc/age"),u=i(512,2,"fc/gender");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:a,gender:u}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=Re(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=Ce(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return me(e,t),{params:o,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(fe),Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.postProcess=function(e,t,n){var o=n.map(function(e){var n=e.width,r=e.height,o=t/Math.max(r,n);return{width:n*o,height:r*o}}),i=o.length;return r.L(function(){var n=function(e,t){return r.E([r.n([68],e),r.n([68],t)],1).as2D(1,136).as1D()},a=function(e,t){var n=o[e],r=n.width,i=n.height;return t(r,i)?Math.abs(r-i)/2:0};return e.mul(r.n([i,136],t)).sub(r.E(Array.from(Array(i),function(e,t){return n(function(e){return a(e,function(e,t){return e<t})}(t),function(e){return a(e,function(e,t){return t<e})}(t))}))).div(r.E(Array.from(Array(i),function(e,t){return n(o[t].width,o[t].height)})))})},t.prototype.forwardInput=function(e){var t=this;return r.L(function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map(function(e){return{height:e[0],width:e[1]}}))})},t.prototype.forward=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,re(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.detectLandmarks=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,o,a=this;return Object(i.d)(this,function(u){switch(u.label){case 0:return[4,re(e)];case 1:return t=u.sent(),n=r.L(function(){return r.O(a.forwardInput(t))}),[4,Promise.all(n.map(function(e,n){return Object(i.b)(a,void 0,void 0,function(){var r,o,a,u,s;return Object(i.d)(this,function(i){switch(i.label){case 0:return a=(o=Array).from,[4,e.data()];case 1:return r=a.apply(o,[i.sent()]),u=r.filter(function(e,t){return l(t)}),s=r.filter(function(e,t){return!l(t)}),[2,new R(Array(68).fill(0).map(function(e,t){return new g(u[t],s[t])}),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}})})}))];case 2:return o=u.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?o:o[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(Ie),qe=function(e){function t(t){return void 0===t&&(t=new Oe),e.call(this,"FaceLandmark68Net",t)||this}return Object(i.c)(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(Ge);var Ke=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return Object(i.c)(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return r.L(function(){var n=de(k(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(r.y(255)),t.dense0,!0);return n=de(n,t.dense1),n=de(n,t.dense2),n=r.d(n,[14,14],[2,2],"valid")})},t.prototype.forward=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,re(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=Se(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return me(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=Ee(e),r=n.extractWeights,o=n.getRemainingWeights,i=ke(r,t).extractDenseBlock3Params,a=i(3,32,"dense0",!0),u=i(32,64,"dense1"),s=i(64,128,"dense2");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:u,dense2:s}}}(e)},t}(fe),$e=function(e){function t(t){return void 0===t&&(t=new Ke),e.call(this,"FaceLandmark68TinyNet",t)||this}return Object(i.c)(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(Ge);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.c)(t,e)}(qe);function Xe(e,t,n,o,i){void 0===i&&(i="same");var a=t.conv,u=a.filters,s=a.bias,c=r.i(e,u,n,i);return c=function(e,t){return r.c(r.t(e,t.weights),t.biases)}(c=r.c(c,s),t.scale),o?r.w(c):c}function Ye(e,t){return Xe(e,t,[1,1],!1)}function Qe(e,t){return Xe(e,t,[2,2],!0,"valid")}function Je(e,t){function n(n,o,i,a){var u=function(t,n,o){var i=e(t),a=i.length/(n*o*o);if(a%1!==0)throw new Error("depth has to be an integer: "+a+", weights.length: "+i.length+", numFilters: "+n+", filterSize: "+o);return r.L(function(){return r.N(r.K(i,[n,a,o,o]),[2,3,1,0])})}(n,o,i),s=r.H(e(o));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:u,bias:s}}function o(o,i,a,u){return{conv:n(o,i,a,u+"/conv"),scale:function(n,o){var i=r.H(e(n)),a=r.H(e(n));return t.push({paramPath:o+"/weights"},{paramPath:o+"/biases"}),{weights:i,biases:a}}(i,u+"/scale")}}return{extractConvLayerParams:o,extractResidualLayerParams:function(e,t,n,r,i){return void 0===i&&(i=!1),{conv1:o((i?.5:1)*e,t,n,r+"/conv1"),conv2:o(e,t,n,r+"/conv2")}}}}function Ze(e,t){var n=Ce(e,t);function r(e){return{conv:{filters:n(e+"/conv/filters",4),bias:n(e+"/conv/bias",1)},scale:function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e)}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function et(e){var t=[],n=Ze(e,t),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,i=r("conv32_down"),a=o("conv32_1"),s=o("conv32_2"),c=o("conv32_3"),l=o("conv64_down"),f=o("conv64_1"),p=o("conv64_2"),d=o("conv64_3"),h=o("conv128_down"),v=o("conv128_1"),m=o("conv128_2"),g=o("conv256_down"),y=o("conv256_1"),b=o("conv256_2"),x=o("conv256_down_out"),w=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!u(w,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var C={conv32_down:i,conv32_1:a,conv32_2:s,conv32_3:c,conv64_down:l,conv64_1:f,conv64_2:p,conv64_3:d,conv128_down:h,conv128_1:v,conv128_2:m,conv256_down:g,conv256_1:y,conv256_2:b,conv256_down_out:x,fc:w};return me(e,t),{params:C,paramMappings:t}}function tt(e,t){var n=function(e,t){return Xe(e,t,[1,1],!0)}(e,t.conv1);return n=Ye(n,t.conv2),n=r.c(n,e),n=r.w(n)}function nt(e,t){var n=Qe(e,t.conv1);n=Ye(n,t.conv2);var o=r.d(e,2,2,"valid"),a=r.P(o.shape),u=o.shape[3]!==n.shape[3];if(o.shape[1]!==n.shape[1]||o.shape[2]!==n.shape[2]){var s=Object(i.e)(n.shape);s[1]=1;var c=r.P(s);n=r.h([n,c],1);var l=Object(i.e)(n.shape);l[2]=1;var f=r.P(l);n=r.h([n,f],2)}return o=u?r.h([o,a],3):o,n=r.c(o,n),n=r.w(n)}var rt=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return Object(i.c)(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return r.L(function(){var n=Qe(k(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(r.y(256)),t.conv32_down);n=tt(n=r.s(n,3,2,"valid"),t.conv32_1),n=tt(n,t.conv32_2),n=tt(n,t.conv32_3),n=tt(n=nt(n,t.conv64_down),t.conv64_1),n=tt(n,t.conv64_2),n=tt(n,t.conv64_3),n=tt(n=nt(n,t.conv128_down),t.conv128_1),n=tt(n,t.conv128_2),n=tt(n=nt(n,t.conv256_down),t.conv256_1);var o=(n=nt(n=tt(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return r.q(o,t.fc)})},t.prototype.forward=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,re(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.computeFaceDescriptor=function(e){return Object(i.b)(this,void 0,void 0,function(){var t,n,o,a=this;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,re(e)];case 1:return t=i.sent(),n=r.L(function(){return r.O(a.forwardInput(t))}),[4,Promise.all(n.map(function(e){return e.data()}))];case 2:return o=i.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return et(e)},t.prototype.extractParams=function(e){return function(e){var t=Ee(e),n=t.extractWeights,o=t.getRemainingWeights,i=[],a=Je(n,i),u=a.extractConvLayerParams,s=a.extractResidualLayerParams,c=u(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),f=s(9216,32,3,"conv32_2"),p=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),v=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),y=s(147456,128,3,"conv128_1"),b=s(147456,128,3,"conv128_2"),x=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),C=s(589824,256,3,"conv256_2"),E=s(589824,256,3,"conv256_down_out"),k=r.L(function(){return r.N(r.I(n(32768),[128,256]),[1,0])});if(i.push({paramPath:"fc"}),0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:{conv32_down:c,conv32_1:l,conv32_2:f,conv32_3:p,conv64_down:d,conv64_1:h,conv64_2:v,conv64_3:m,conv128_down:g,conv128_1:y,conv128_2:b,conv256_down:x,conv256_1:w,conv256_2:C,conv256_down_out:E,fc:k},paramMappings:i}}(e)},t}(fe);function ot(e,t){var n={descriptor:t};return Object.assign({},e,n)}function it(e,t){var n={age:t};return Object.assign({},e,n)}function at(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var ut=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,o=t.maxNumScales,i=t.scoreThresholds,a=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=o||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=a,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(e){return"number"!==typeof e}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function st(e,t){function n(n,o,i,a,u){var s=r.K(e(n*o*i*i),[i,i,n,o]),c=r.H(e(o));return t.push({paramPath:a+"/filters"},{paramPath:a+"/"+(u?"batch_norm_offset":"bias")}),{filters:s,bias:c}}function o(e,t,r,o){var i=n(e,t,r,o,!0);return{filters:i.filters,batch_norm_offset:i.bias}}function i(n,i,a){return{depthwise_conv:function(n,o){var i=r.K(e(9*n),[3,3,n,1]),a=r.H(e(n)),u=r.H(e(n)),s=r.H(e(n)),c=r.H(e(n));return t.push({paramPath:o+"/filters"},{paramPath:o+"/batch_norm_scale"},{paramPath:o+"/batch_norm_offset"},{paramPath:o+"/batch_norm_mean"},{paramPath:o+"/batch_norm_variance"}),{filters:i,batch_norm_scale:a,batch_norm_offset:u,batch_norm_mean:s,batch_norm_variance:c}}(n,a+"/depthwise_conv"),pointwise_conv:o(n,i,1,a+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:o(3,32,3,"mobilenetv1/conv_0"),conv_1:i(32,64,"mobilenetv1/conv_1"),conv_2:i(64,128,"mobilenetv1/conv_2"),conv_3:i(128,128,"mobilenetv1/conv_3"),conv_4:i(128,256,"mobilenetv1/conv_4"),conv_5:i(256,256,"mobilenetv1/conv_5"),conv_6:i(256,512,"mobilenetv1/conv_6"),conv_7:i(512,512,"mobilenetv1/conv_7"),conv_8:i(512,512,"mobilenetv1/conv_8"),conv_9:i(512,512,"mobilenetv1/conv_9"),conv_10:i(512,512,"mobilenetv1/conv_10"),conv_11:i(512,512,"mobilenetv1/conv_11"),conv_12:i(512,1024,"mobilenetv1/conv_12"),conv_13:i(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:o(1024,256,1,"prediction_layer/conv_0"),conv_1:o(256,512,3,"prediction_layer/conv_1"),conv_2:o(512,128,1,"prediction_layer/conv_2"),conv_3:o(128,256,3,"prediction_layer/conv_3"),conv_4:o(256,128,1,"prediction_layer/conv_4"),conv_5:o(128,256,3,"prediction_layer/conv_5"),conv_6:o(256,64,1,"prediction_layer/conv_6"),conv_7:o(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function ct(e){var t=[],n=function(e,t){var n=Ce(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function o(e){var t="mobilenetv1/conv_"+e,o="MobilenetV1/Conv2d_"+e+"_depthwise",i=t+"/depthwise_conv",a=t+"/pointwise_conv";return{depthwise_conv:{filters:n(o+"/depthwise_weights",4,i+"/filters"),batch_norm_scale:n(o+"/BatchNorm/gamma",1,i+"/batch_norm_scale"),batch_norm_offset:n(o+"/BatchNorm/beta",1,i+"/batch_norm_offset"),batch_norm_mean:n(o+"/BatchNorm/moving_mean",1,i+"/batch_norm_mean"),batch_norm_variance:n(o+"/BatchNorm/moving_variance",1,i+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,a)}}function i(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function a(e){return{box_encoding_predictor:i("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:i("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}}}(e,t),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!s(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var a={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:i}};return me(e,t),{params:a,paramMappings:t}}function lt(e,t,n){return r.L(function(){var o=r.i(e,t.filters,n,"same");return o=r.c(o,t.batch_norm_offset),r.g(o,0,6)})}var ft=.0010000000474974513;function pt(e,t){return r.L(function(){var n=null,o=lt(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach(function(e,t){var i,a,u,s=t+1,c=function(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}(s);i=o,a=e.depthwise_conv,u=c,o=lt(o=r.L(function(){var e=r.j(i,a.filters,u,"same");return e=r.e(e,a.batch_norm_mean,a.batch_norm_variance,a.batch_norm_offset,a.batch_norm_scale,ft),r.g(e,0,6)}),e.pointwise_conv,[1,1]),11===s&&(n=o)}),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:o,conv11:n}})}function dt(e,t,n){var r=e.arraySync(),o=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),a=Math.max(r[t][0],r[t][2]),u=Math.max(r[t][1],r[t][3]),s=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),p=(a-o)*(u-i),d=(l-s)*(f-c);if(p<=0||d<=0)return 0;var h=Math.max(o,s),v=Math.max(i,c),m=Math.min(a,l),g=Math.min(u,f),y=Math.max(m-h,0)*Math.max(g-v,0);return y/(p+d-y)}function ht(e,t){var n=function(e){var t=r.O(r.N(e,[1,0])),n=[r.F(t[2],t[0]),r.F(t[3],t[1])];return{sizes:n,centers:[r.c(t[0],r.k(n[0],r.y(2))),r.c(t[1],r.k(n[1],r.y(2)))]}}(e),o=n.sizes,i=n.centers,a=r.O(r.N(t,[1,0])),u=r.k(r.t(r.l(r.k(a[2],r.y(5))),o[0]),r.y(2)),s=r.c(r.t(r.k(a[0],r.y(10)),o[0]),i[0]),c=r.k(r.t(r.l(r.k(a[3],r.y(5))),o[1]),r.y(2)),l=r.c(r.t(r.k(a[1],r.y(10)),o[1]),i[1]);return r.N(r.E([r.F(s,u),r.F(l,c),r.c(s,u),r.c(l,c)]),[1,0])}function vt(e,t){return r.L(function(){var n=e.shape[0];return{boxPredictionEncoding:r.x(ve(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:r.x(ve(e,t.class_predictor),[n,-1,3])}})}var mt=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),gt=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return Object(i.c)(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return r.L(function(){var n=e.toBatchTensor(512,!1).toFloat(),o=pt(r.F(r.t(n,r.y(.007843137718737125)),r.y(1)),t.mobilenetv1),i=function(e,t,n){return r.L(function(){var o=lt(e,n.conv_0,[1,1]),i=lt(o,n.conv_1,[2,2]),a=lt(i,n.conv_2,[1,1]),u=lt(a,n.conv_3,[2,2]),s=lt(u,n.conv_4,[1,1]),c=lt(s,n.conv_5,[2,2]),l=lt(c,n.conv_6,[1,1]),f=lt(l,n.conv_7,[2,2]),p=vt(t,n.box_predictor_0),d=vt(e,n.box_predictor_1),h=vt(i,n.box_predictor_2),v=vt(u,n.box_predictor_3),m=vt(c,n.box_predictor_4),g=vt(f,n.box_predictor_5);return{boxPredictions:r.h([p.boxPredictionEncoding,d.boxPredictionEncoding,h.boxPredictionEncoding,v.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:r.h([p.classPrediction,d.classPrediction,h.classPrediction,v.classPrediction,m.classPrediction,g.classPrediction],1)}})}(o.out,o.conv11,t.prediction_layer);return function(e,t,n){return r.L(function(){var o=e.shape[0],i=ht(r.x(r.M(n.extra_dim,[o,1,1]),[-1,4]),r.x(e,[-1,4]));i=r.x(i,[o,i.shape[0]/o,4]);var a=r.A(r.B(t,[0,0,1],[-1,-1,-1])),u=r.B(a,[0,0,0],[-1,-1,1]);return u=r.x(u,[o,u.shape[1]]),{boxes:r.O(i),scores:r.O(u)}})}(i.boxPredictions,i.classPredictions,t.output_layer)})},t.prototype.forward=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,re(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),Object(i.b)(this,void 0,void 0,function(){var n,r,o,a,u,s,c,l,f,p,d,h,v,m,g,y,b,x,C,E;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=new mt(t),r=n.maxResults,o=n.minConfidence,[4,re(e)];case 1:for(a=i.sent(),u=this.forwardInput(a),s=u.boxes,c=u.scores,l=s[0],f=c[0],p=1;p<s.length;p++)s[p].dispose(),c[p].dispose();return v=(h=Array).from,[4,f.data()];case 2:return d=v.apply(h,[i.sent()]),.5,m=function(e,t,n,r,o){var i=e.shape[0],a=Math.min(n,i),u=t.map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>o}).sort(function(e,t){return t.score-e.score}),s=[];return u.forEach(function(t){if(!(s.length>=a)){for(var n=t.score,i=s.length-1;i>=0;--i){var u=dt(e,t.boxIndex,s[i]);if(0!==u&&(t.score*=u<=r?1:0,t.score<=o))break}n===t.score&&s.push(t.boxIndex)}}),s}(l,d,r,.5,o),g=a.getReshapedInputDimensions(0),y=a.inputSize,b=y/g.width,x=y/g.height,C=l.arraySync(),E=m.map(function(e){var t=[Math.max(0,C[e][0]),Math.min(1,C[e][2])].map(function(e){return e*x}),n=t[0],r=t[1],o=[Math.max(0,C[e][1]),Math.min(1,C[e][3])].map(function(e){return e*b}),i=o[0],u=o[1];return new w(d[e],new S(i,n,u-i,r-n),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),l.dispose(),f.dispose(),[2,E]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return ct(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=Ee(e),o=n.extractWeights,i=n.getRemainingWeights,a=st(o,t),u=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,c=u(),l=s(),f={extra_dim:r.J(o(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{params:{mobilenetv1:c,prediction_layer:l,output_layer:f},paramMappings:t}}(e)},t}(fe);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.c)(t,e)}(gt);var yt,bt=.4,xt=[new g(.738768,.874946),new g(2.42204,2.65704),new g(4.30971,7.04493),new g(10.246,4.59428),new g(12.6868,11.8741)],wt=[new g(1.603231,2.094468),new g(6.041143,7.080126),new g(2.882459,3.518061),new g(4.266906,5.178857),new g(9.041765,10.66308)],Ct=[117.001,114.697,97.404],Et=function(e){return"number"===typeof e};function kt(e){return r.L(function(){var t=r.t(e,r.y(.10000000149011612));return r.c(r.w(r.F(e,t)),t)})}function _t(e,t){return r.L(function(){var n=r.v(e,[[0,0],[1,1],[1,1],[0,0]]);return n=r.i(n,t.conv.filters,[1,1],"valid"),n=r.F(n,t.bn.sub),n=r.t(n,t.bn.truediv),kt(n=r.c(n,t.conv.bias))})}function St(e,t){return r.L(function(){var n=r.v(e,[[0,0],[1,1],[1,1],[0,0]]);return n=r.z(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),kt(n=r.c(n,t.bias))})}function Ot(e,t){var n=ge(e,t);var o=xe(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(o,i,a){return{conv:n(o,i,3,a+"/conv"),bn:function(n,o){var i=r.H(e(n)),a=r.H(e(n));return t.push({paramPath:o+"/sub"},{paramPath:o+"/truediv"}),{sub:i,truediv:a}}(i,a+"/bn")}},extractSeparableConvParams:o}}function Tt(e,t){var n=Ce(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){return{conv:r(e+"/conv"),bn:function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn")}},extractSeparableConvParams:we(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(yt||(yt={}));var Rt=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),It=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!Et(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(e){return"string"===typeof e}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(e){return e||{}}).every(function(e){return Et(e.x)&&Et(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(Et)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=_t(e,t.conv0);return n=_t(n=r.s(n,[2,2],[2,2],"same"),t.conv1),n=_t(n=r.s(n,[2,2],[2,2],"same"),t.conv2),n=_t(n=r.s(n,[2,2],[2,2],"same"),t.conv3),n=_t(n=r.s(n,[2,2],[2,2],"same"),t.conv4),n=_t(n=r.s(n,[2,2],[2,2],"same"),t.conv5),n=_t(n=r.s(n,[2,2],[1,1],"same"),t.conv6),ve(n=_t(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?kt(ve(e,t.conv0,"valid",!1)):St(e,t.conv0);return n=St(n=r.s(n,[2,2],[2,2],"same"),t.conv1),n=St(n=r.s(n,[2,2],[2,2],"same"),t.conv2),n=St(n=r.s(n,[2,2],[2,2],"same"),t.conv3),n=St(n=r.s(n,[2,2],[2,2],"same"),t.conv4),n=St(n=r.s(n,[2,2],[2,2],"same"),t.conv5),n=r.s(n,[2,2],[1,1],"same"),n=t.conv6?St(n,t.conv6):n,ve(n=t.conv7?St(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return r.L(function(){var i=e.toBatchTensor(t,!1).toFloat();return i=(i=n.config.meanRgb?k(i,n.config.meanRgb):i).div(r.y(256)),n.config.withSeparableConvs?n.runMobilenet(i,o):n.runTinyYolov2(i,o)})},t.prototype.forward=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,re(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}})})},t.prototype.detect=function(e,t){return void 0===t&&(t={}),Object(i.b)(this,void 0,void 0,function(){var n,o,a,u,s,c,l,f,p,d,h,v,m,g=this;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=new Rt(t),o=n.inputSize,a=n.scoreThreshold,[4,re(e)];case 1:return u=i.sent(),[4,this.forwardInput(u,o)];case 2:return s=i.sent(),c=r.L(function(){return r.O(s)[0].expandDims()}),l={width:u.getInputWidth(0),height:u.getInputHeight(0)},[4,this.extractBoxes(c,u.getReshapedInputDimensions(0),a)];case 3:return f=i.sent(),s.dispose(),c.dispose(),p=f.map(function(e){return e.box}),d=f.map(function(e){return e.score}),h=f.map(function(e){return e.classScore}),v=f.map(function(e){return g.config.classes[e.label]}),m=E(p.map(function(e){return e.rescale(o)}),d,this.config.iouThreshold,!0),[2,m.map(function(e){return new x(d[e],h[e],v[e],p[e],l)})]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],o=Tt(e,r),i=o.extractConvParams,a=o.extractConvWithBatchNormParams,u=o.extractSeparableConvParams;if(t.withSeparableConvs){var s=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?i("conv0"):u("conv0"),conv1:u("conv1"),conv2:u("conv2"),conv3:u("conv3"),conv4:u("conv4"),conv5:u("conv5"),conv6:s>7?u("conv6"):void 0,conv7:s>8?u("conv7"):void 0,conv8:i("conv8")}}else n={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:i("conv8")};return me(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var o,i=Ee(e),a=i.extractWeights,u=i.getRemainingWeights,s=[],c=Ot(a,s),l=c.extractConvParams,f=c.extractConvWithBatchNormParams,p=c.extractSeparableConvParams;if(t.withSeparableConvs){var d=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],x=r[7],w=r[8];o={conv0:t.isFirstLayerConv2d?l(d,h,3,"conv0"):p(d,h,"conv0"),conv1:p(h,v,"conv1"),conv2:p(v,m,"conv2"),conv3:p(m,g,"conv3"),conv4:p(g,y,"conv4"),conv5:p(y,b,"conv5"),conv6:x?p(b,x,"conv6"):void 0,conv7:w?p(x,w,"conv7"):void 0,conv8:l(w||x||b,5*n,1,"conv8")}}else d=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],x=r[7],w=r[8],o={conv0:f(d,h,"conv0"),conv1:f(h,v,"conv1"),conv2:f(v,m,"conv2"),conv3:f(m,g,"conv3"),conv4:f(g,y,"conv4"),conv5:f(y,b,"conv5"),conv6:f(b,x,"conv6"),conv7:f(x,w,"conv7"),conv8:l(w,5*n,1,"conv8")};if(0!==u().length)throw new Error("weights remaing after extract: "+u().length);return{params:o,paramMappings:s}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return Object(i.b)(this,void 0,void 0,function(){var o,a,u,s,c,l,f,p,d,h,v,m,g,y,x,w,C,E,k,S,O,T,R,I,A,N,D,P,M,F=this;return Object(i.d)(this,function(B){switch(B.label){case 0:return o=t.width,a=t.height,u=Math.max(o,a),s=u/o,c=u/a,l=e.shape[1],f=this.config.anchors.length,p=r.L(function(){var t=e.reshape([l,l,f,F.boxEncodingSize]);return[t.slice([0,0,0,0],[l,l,f,4]),t.slice([0,0,0,4],[l,l,f,1]),F.withClassScores?r.D(t.slice([0,0,0,5],[l,l,f,F.config.classes.length]),3):r.y(0)]}),d=p[0],h=p[1],v=p[2],m=[],[4,h.array()];case 1:return g=B.sent(),[4,d.array()];case 2:y=B.sent(),x=0,B.label=3;case 3:if(!(x<l))return[3,12];w=0,B.label=4;case 4:if(!(w<l))return[3,11];C=0,B.label=5;case 5:return C<f?(E=_(g[x][w][C][0]),!n||E>n?(k=(w+_(y[x][w][C][0]))/l*s,S=(x+_(y[x][w][C][1]))/l*c,O=Math.exp(y[x][w][C][2])*this.config.anchors[C].x/l*s,T=Math.exp(y[x][w][C][3])*this.config.anchors[C].y/l*c,R=k-O/2,I=S-T/2,A={row:x,col:w,anchor:C},this.withClassScores?[4,this.extractPredictedClass(v,A)]:[3,7]):[3,9]):[3,10];case 6:return M=B.sent(),[3,8];case 7:M={classScore:1,label:0},B.label=8;case 8:D=(N=M).classScore,P=N.label,m.push(Object(i.a)({box:new b(R,I,R+O,I+T),score:E,classScore:E*D,label:P},A)),B.label=9;case 9:return C++,[3,5];case 10:return w++,[3,4];case 11:return x++,[3,3];case 12:return d.dispose(),h.dispose(),v.dispose(),[2,m]}})})},t.prototype.extractPredictedClass=function(e,t){return Object(i.b)(this,void 0,void 0,function(){var n,r,o,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return n=t.row,r=t.col,o=t.anchor,[4,e.array()];case 1:return a=i.sent(),[2,Array(this.config.classes.length).fill(0).map(function(e,t){return a[n][r][o][t]}).map(function(e,t){return{classScore:e,label:t}}).reduce(function(e,t){return e.classScore>t.classScore?e:t})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(fe),At=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:bt,classes:["face"]},t?{anchors:wt,meanRgb:Ct}:{anchors:xt,withClassScores:!0});return e.call(this,n)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new w(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(It);var Nt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return Object(i.c)(t,e),t}(Rt),Dt=function(){function e(){}return e.prototype.then=function(e){return Object(i.b)(this,void 0,void 0,function(){var t;return Object(i.d)(this,function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}})})},e.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},e}();function Pt(e,t,n,o,a){return void 0===a&&(a=function(e){return e.alignedRect}),Object(i.b)(this,void 0,void 0,function(){var u,s,c,l,f;return Object(i.d)(this,function(i){switch(i.label){case 0:return u=e.map(function(e){return Me(e)?a(e):e.detection}),(c=o)?[3,5]:t instanceof r.a?[4,ie(t,u)]:[3,2];case 1:return l=i.sent(),[3,4];case 2:return[4,oe(t,u)];case 3:l=i.sent(),i.label=4;case 4:c=l,i.label=5;case 5:return[4,n(s=c)];case 6:return f=i.sent(),s.forEach(function(e){return e instanceof r.a&&e.dispose()}),[2,f]}})})}function Mt(e,t,n,r,o){return Object(i.b)(this,void 0,void 0,function(){var a=this;return Object(i.d)(this,function(u){return[2,Pt([e],t,function(e){return Object(i.b)(a,void 0,void 0,function(){return Object(i.d)(this,function(t){return[2,n(e[0])]})})},r,o)]})})}var Ft=2,Bt=12;function jt(e){var t=Ee(e),n=t.extractWeights,o=t.getRemainingWeights,a=[],u=function(e,t){var n=ge(e,t),o=ye(e,t);function a(n,o){var i=r.H(e(n));return t.push({paramPath:o}),i}function u(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:a(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:a(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:a(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=u([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return Object(i.a)(Object(i.a)({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=u([3,28,48,64],"rnet",!0),t=o(576,128,"rnet/fc1"),n=a(128,"rnet/prelu4_alpha"),r=o(128,2,"rnet/fc2_1"),s=o(128,4,"rnet/fc2_2");return Object(i.a)(Object(i.a)({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=u([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),r=a(128,"onet/prelu4_alpha"),s=o(1152,256,"onet/fc1"),c=a(256,"onet/prelu5_alpha"),l=o(256,2,"onet/fc2_1"),f=o(256,4,"onet/fc2_2"),p=o(256,10,"onet/fc2_3");return Object(i.a)(Object(i.a)({},e),{conv4:t,prelu4_alpha:r,fc1:s,prelu5_alpha:c,fc2_1:l,fc2_2:f,fc2_3:p})}}}(n,a),s=u.extractPNetParams,c=u.extractRNetParams,l=u.extractONetParams,f=s(),p=c(),d=l();if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:{pnet:f,rnet:p,onet:d},paramMappings:a}}function Lt(e){var t=[],n=function(e,t){var n=Ce(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function o(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function a(e){return n(e,1)}function u(e){return{conv1:r(e+"/conv1"),prelu1_alpha:a(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:a(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:a(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=u("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return Object(i.a)(Object(i.a)({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=u("rnet"),t=o("rnet/fc1"),n=a("rnet/prelu4_alpha"),r=o("rnet/fc2_1"),s=o("rnet/fc2_2");return Object(i.a)(Object(i.a)({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})},extractONetParams:function(){var e=u("onet"),t=r("onet/conv4"),n=a("onet/prelu4_alpha"),s=o("onet/fc1"),c=a("onet/prelu5_alpha"),l=o("onet/fc2_1"),f=o("onet/fc2_2"),p=o("onet/fc2_3");return Object(i.a)(Object(i.a)({},e),{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:c,fc2_1:l,fc2_2:f,fc2_3:p})}}}(e,t),r=n.extractPNetParams,o=n.extractRNetParams,a=n.extractONetParams,u=r(),s=o(),c=a();return me(e,t),{params:{pnet:u,rnet:s,onet:c},paramMappings:t}}function Wt(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var zt=function(e){function t(t,n,r,o){return e.call(this,{left:t,top:n,right:r,bottom:o},!0)||this}return Object(i.c)(t,e),t}(y);function Ut(e){return r.L(function(){return r.t(r.F(e,r.y(127.5)),r.y(.0078125))})}function Vt(e,t){return r.L(function(){return r.c(r.w(e),r.t(t,r.u(r.w(r.u(e)))))})}function Ht(e,t,n){return void 0===n&&(n=!1),r.L(function(){var o=ve(e,t.conv1,"valid");return o=Vt(o,t.prelu1_alpha),o=Vt(o=ve(o=r.s(o,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),o=Vt(o=ve(o=n?o:r.s(o,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)})}function Gt(e,t,n,o,i){i.stage1=[];var a=t.map(function(t){return r.L(function(){var n={scale:t},i=function(e,t){return r.L(function(){var n=Wt(t,e.shape.slice(1)),o=n.height,i=n.width,a=Ut(r.o.resizeBilinear(e,[o,i]));return r.N(a,[0,2,1,3])})}(e,t),a=Date.now(),u=function(e,t){return r.L(function(){var n=Ht(e,t,!0),o=ve(n,t.conv4_1,"valid"),i=r.m(r.r(o,3),3);return{prob:r.D(r.F(o,i),3),regions:ve(n,t.conv4_2,"valid")}})}(i,o),s=u.prob,c=u.regions;return n.pnet=Date.now()-a,{scoresTensor:r.O(r.O(s,3)[1])[0],regionsTensor:r.O(c)[0],scale:t,statsForScale:n}})}).map(function(e){var t=e.scoresTensor,r=e.regionsTensor,o=e.scale,a=e.statsForScale,u=function(e,t,n,r){for(var o=[],i=e.arraySync(),a=0;a<e.shape[0];a++)for(var u=0;u<e.shape[1];u++)i[a][u]>=r&&o.push(new g(u,a));return o.map(function(e){var r=new b(Math.round((e.y*Ft+1)/n),Math.round((e.x*Ft+1)/n),Math.round((e.y*Ft+Bt)/n),Math.round((e.x*Ft+Bt)/n)),o=i[e.y][e.x],a=t.arraySync();return{cell:r,score:o,region:new zt(a[e.y][e.x][0],a[e.y][e.x][1],a[e.y][e.x][2],a[e.y][e.x][3])}})}(t,r,o,n);if(t.dispose(),r.dispose(),!u.length)return i.stage1.push(a),[];var s=Date.now(),c=E(u.map(function(e){return e.cell}),u.map(function(e){return e.score}),.5);return a.nms=Date.now()-s,a.numBoxes=c.length,i.stage1.push(a),c.map(function(e){return u[e]})}).reduce(function(e,t){return e.concat(t)},[]),u=[],s=[];if(a.length>0){var c=Date.now(),l=E(a.map(function(e){return e.cell}),a.map(function(e){return e.score}),.7);i.stage1_nms=Date.now()-c,s=l.map(function(e){return a[e].score}),u=l.map(function(e){return a[e]}).map(function(e){var t=e.cell,n=e.region;return new b(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()})}return{boxes:u,scores:s}}function qt(e,t,n){var o=n.width,a=n.height;return Object(i.b)(this,void 0,void 0,function(){var n,u,s,c=this;return Object(i.d)(this,function(l){switch(l.label){case 0:return n=q(e),[4,Promise.all(t.map(function(t){return Object(i.b)(c,void 0,void 0,function(){var r,o,a,u,s,c,l,f;return Object(i.d)(this,function(i){return r=t.padAtBorders(e.height,e.width),o=r.y,a=r.ey,u=r.x,s=r.ex,c=u-1,l=o-1,f=n.getImageData(c,l,s-c,a-l),[2,H.isNodejs()?Z(f):createImageBitmap(f)]})})}))];case 1:return u=l.sent(),s=[],u.forEach(function(e){var t=q(J({width:o,height:a}));t.drawImage(e,0,0,o,a);for(var n=t.getImageData(0,0,o,a).data,r=[],i=0;i<n.length;i+=4)r.push(n[i+2]),r.push(n[i+1]),r.push(n[i]);s.push(r)}),[2,s.map(function(e){return r.L(function(){return Ut(r.N(r.K(e,[1,o,a,3]),[0,2,1,3]).toFloat())})})]}})})}function Kt(e,t,n,o,a){return Object(i.b)(this,void 0,void 0,function(){var u,s,c,l,f,p,d,h,v,m,g,y,b,x;return Object(i.d)(this,function(i){switch(i.label){case 0:return u=Date.now(),[4,qt(e,t,{width:24,height:24})];case 1:return s=i.sent(),a.stage2_extractImagePatches=Date.now()-u,u=Date.now(),c=s.map(function(e){var t=function(e,t){return r.L(function(){var n=Ht(e,t),o=Vt(Te(r.x(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),i=Te(o,t.fc2_1),a=r.m(r.r(i,1),1),u=r.D(r.F(i,a),1),s=Te(o,t.fc2_2);return{scores:r.O(u,1)[1],regions:s}})}(e,o);return e.dispose(),t}),a.stage2_rnet=Date.now()-u,l=c.length>1?r.h(c.map(function(e){return e.scores})):c[0].scores,d=(p=Array).from,[4,l.data()];case 2:return f=d.apply(p,[i.sent()]),l.dispose(),h=f.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),v=h.map(function(e){return t[e]}),m=h.map(function(e){return f[e]}),g=[],y=[],v.length>0&&(u=Date.now(),b=E(v,m,.7),a.stage2_nms=Date.now()-u,x=b.map(function(e){var t=c[h[e]].regions.arraySync();return new zt(t[0][0],t[0][1],t[0][2],t[0][3])}),y=b.map(function(e){return m[e]}),g=b.map(function(e,t){return v[e].calibrate(x[t])})),c.forEach(function(e){e.regions.dispose(),e.scores.dispose()}),[2,{boxes:g,scores:y}]}})})}function $t(e,t,n,o,a){return Object(i.b)(this,void 0,void 0,function(){var u,s,c,l,f,p,d,h,v,m,y,b,x,w,C;return Object(i.d)(this,function(i){switch(i.label){case 0:return u=Date.now(),[4,qt(e,t,{width:48,height:48})];case 1:return s=i.sent(),a.stage3_extractImagePatches=Date.now()-u,u=Date.now(),c=s.map(function(e){var t=function(e,t){return r.L(function(){var n=Ht(e,t);n=Vt(n=ve(n=r.s(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var o=Vt(Te(r.x(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),i=Te(o,t.fc2_1),a=r.m(r.r(i,1),1),u=r.D(r.F(i,a),1),s=Te(o,t.fc2_2),c=Te(o,t.fc2_3);return{scores:r.O(u,1)[1],regions:s,points:c}})}(e,o);return e.dispose(),t}),a.stage3_onet=Date.now()-u,l=c.length>1?r.h(c.map(function(e){return e.scores})):c[0].scores,d=(p=Array).from,[4,l.data()];case 2:return f=d.apply(p,[i.sent()]),l.dispose(),h=f.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx}),v=h.map(function(e){var t=c[e].regions.arraySync();return new zt(t[0][0],t[0][1],t[0][2],t[0][3])}),m=h.map(function(e,n){return t[e].calibrate(v[n])}),y=h.map(function(e){return f[e]}),b=[],x=[],w=[],m.length>0&&(u=Date.now(),C=E(m,y,.7,!1),a.stage3_nms=Date.now()-u,b=C.map(function(e){return m[e]}),x=C.map(function(e){return y[e]}),w=C.map(function(e,t){return Array(5).fill(0).map(function(n,r){var o=c[e].points.arraySync();return new g(o[0][r]*(b[t].width+1)+b[t].left,o[0][r+5]*(b[t].height+1)+b[t].top)})})),c.forEach(function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()}),[2,{boxes:b,scores:x,points:w}]}})})}var Xt=function(e){function t(){return e.call(this,"Mtcnn")||this}return Object(i.c)(t,e),t.prototype.load=function(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]})})},t.prototype.loadFromDisk=function(t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]})})},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),Object(i.b)(this,void 0,void 0,function(){var n,o,a,u,s,c,l,f,p,d,h,v,m,y,b,x,C,E,k,_,O;return Object(i.d)(this,function(i){switch(i.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(o=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return a={},u=Date.now(),s=r.L(function(){return e=r.m(r.f.fromPixels(o)).toFloat(),r.L(function(){return r.E(r.O(e,3).reverse(),3)});var e}),c=function(e){return s.dispose(),a.total=Date.now()-u,e},l=s.shape.slice(1),f=l[0],p=l[1],d=new ut(t),h=d.minFaceSize,v=d.scaleFactor,m=d.maxNumScales,y=d.scoreThresholds,b=d.scaleSteps,x=(b||function(e,t,n){for(var r=n[0],o=n[1],i=Bt/e,a=[],u=Math.min(r,o)*i,s=0;u>=12;)a.push(i*Math.pow(t,s)),u*=t,s+=1;return a}(h,v,[f,p])).filter(function(e){var t=Wt(e,[f,p]);return Math.min(t.width,t.height)>Bt}).slice(0,m),a.scales=x,a.pyramid=x.map(function(e){return Wt(e,[f,p])}),C=Date.now(),[4,Gt(s,x,y[0],n.pnet,a)];case 1:return E=i.sent(),a.total_stage1=Date.now()-C,E.boxes.length?(a.stage2_numInputBoxes=E.boxes.length,C=Date.now(),[4,Kt(o,E.boxes,y[1],n.rnet,a)]):[2,c({results:[],stats:a})];case 2:return k=i.sent(),a.total_stage2=Date.now()-C,k.boxes.length?(a.stage3_numInputBoxes=k.boxes.length,C=Date.now(),[4,$t(o,k.boxes,y[2],n.onet,a)]):[2,c({results:[],stats:a})];case 3:return _=i.sent(),a.total_stage3=Date.now()-C,O=_.boxes.map(function(e,t){return Fe(P({},new w(_.scores[t],new S(e.left/p,e.top/f,e.width/p,e.height/f),{height:f,width:p})),new T(_.points[t].map(function(t){return t.sub(new g(e.left,e.top)).div(new g(e.width,e.height))}),{width:e.width,height:e.height}))}),[2,c({results:O,stats:a})]}})})},t.prototype.forward=function(e,t){return void 0===t&&(t={}),Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,re(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}})})},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),Object(i.b)(this,void 0,void 0,function(){var n;return Object(i.d)(this,function(r){switch(r.label){case 0:return n=this.forwardInput,[4,re(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Lt(e)},t.prototype.extractParams=function(e){return jt(e)},t}(fe),Yt=.4,Qt=[new g(1.603231,2.094468),new g(6.041143,7.080126),new g(2.882459,3.518061),new g(4.266906,5.178857),new g(9.041765,10.66308)],Jt=[117.001,114.697,97.404],Zt=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:Yt,classes:["face"],anchors:Qt,meanRgb:Jt,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Object(i.b)(this,void 0,void 0,function(){return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new w(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(It),en={ssdMobilenetv1:new gt,tinyFaceDetector:new Zt,tinyYolov2:new At,mtcnn:new Xt,faceLandmark68Net:new qe,faceLandmark68TinyNet:new $e,faceRecognitionNet:new rt,faceExpressionNet:new De,ageGenderNet:new He},tn=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return Object(i.c)(t,e),t}(Dt),nn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n=this;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,Pt(e=r.sent(),this.input,function(e){return Object(i.b)(n,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return en.faceExpressionNet.predictExpressions(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=r.sent(),[2,e.map(function(e,n){return Pe(e,t[n])})]}})})},t.prototype.withAgeAndGender=function(){return new sn(this,this.input)},t}(tn),rn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,Mt(e,this.input,function(e){return en.faceExpressionNet.predictExpressions(e)},this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,Pe(e,t)]}})})},t.prototype.withAgeAndGender=function(){return new cn(this,this.input)},t}(tn),on=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.withAgeAndGender=function(){return new ln(this,this.input)},t.prototype.withFaceDescriptors=function(){return new dn(this,this.input)},t}(nn),an=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.withAgeAndGender=function(){return new fn(this,this.input)},t.prototype.withFaceDescriptor=function(){return new hn(this,this.input)},t}(rn),un=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return Object(i.c)(t,e),t}(Dt),sn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n=this;return Object(i.d)(this,function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,Pt(e=r.sent(),this.input,function(e){return Object(i.b)(n,void 0,void 0,function(){return Object(i.d)(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return en.ageGenderNet.predictAgeAndGender(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=r.sent(),[2,e.map(function(e,n){var r=t[n],o=r.age;return it(at(e,r.gender,r.genderProbability),o)})]}})})},t.prototype.withFaceExpressions=function(){return new nn(this,this.input)},t}(un),cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,r,o;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,Mt(e,this.input,function(e){return en.ageGenderNet.predictAgeAndGender(e)},this.extractedFaces)]:[2];case 2:return t=i.sent(),n=t.age,r=t.gender,o=t.genderProbability,[2,it(at(e,r,o),n)]}})})},t.prototype.withFaceExpressions=function(){return new rn(this,this.input)},t}(un),ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.withFaceExpressions=function(){return new on(this,this.input)},t.prototype.withFaceDescriptors=function(){return new dn(this,this.input)},t}(sn),fn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.withFaceExpressions=function(){return new an(this,this.input)},t.prototype.withFaceDescriptor=function(){return new hn(this,this.input)},t}(cn),pn=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return Object(i.c)(t,e),t}(Dt),dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e;return Object(i.d)(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,Pt(e=t.sent(),this.input,function(e){return Promise.all(e.map(function(e){return en.faceRecognitionNet.computeFaceDescriptor(e)}))},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,t.sent().map(function(t,n){return ot(e[n],t)})]}})})},t.prototype.withFaceExpressions=function(){return new on(this,this.input)},t.prototype.withAgeAndGender=function(){return new ln(this,this.input)},t}(pn),hn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,Mt(e,this.input,function(e){return en.faceRecognitionNet.computeFaceDescriptor(e)},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return t=n.sent(),[2,ot(e,t)]}})})},t.prototype.withFaceExpressions=function(){return new an(this,this.input)},t.prototype.withAgeAndGender=function(){return new fn(this,this.input)},t}(pn),vn=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.useTinyLandmarkNet=r,o}return Object(i.c)(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?en.faceLandmark68TinyNet:en.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(Dt),mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,o,a,u=this;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),t=e.map(function(e){return e.detection}),this.input instanceof r.a?[4,ie(this.input,t)]:[3,3];case 2:return o=i.sent(),[3,5];case 3:return[4,oe(this.input,t)];case 4:o=i.sent(),i.label=5;case 5:return n=o,[4,Promise.all(n.map(function(e){return u.landmarkNet.detectLandmarks(e)}))];case 6:return a=i.sent(),n.forEach(function(e){return e instanceof r.a&&e.dispose()}),[2,e.map(function(e,t){return Fe(e,a[t])})]}})})},t.prototype.withFaceExpressions=function(){return new on(this,this.input)},t.prototype.withAgeAndGender=function(){return new ln(this,this.input)},t.prototype.withFaceDescriptors=function(){return new dn(this,this.input)},t}(vn),gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,o,a;return Object(i.d)(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?(t=e.detection,this.input instanceof r.a?[4,ie(this.input,[t])]:[3,3]):[2];case 2:return o=i.sent(),[3,5];case 3:return[4,oe(this.input,[t])];case 4:o=i.sent(),i.label=5;case 5:return n=o,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return a=i.sent(),n.forEach(function(e){return e instanceof r.a&&e.dispose()}),[2,Fe(e,a)]}})})},t.prototype.withFaceExpressions=function(){return new an(this,this.input)},t.prototype.withAgeAndGender=function(){return new fn(this,this.input)},t.prototype.withFaceDescriptor=function(){return new hn(this,this.input)},t}(vn),yn=function(e){function t(t,n){void 0===n&&(n=new mt);var r=e.call(this)||this;return r.input=t,r.options=n,r}return Object(i.c)(t,e),t}(Dt),bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t,n,r;return Object(i.d)(this,function(o){switch(o.label){case 0:return t=(e=this).input,(n=e.options)instanceof ut?[4,en.mtcnn.forward(t,n)]:[3,2];case 1:return[2,o.sent().map(function(e){return e.detection})];case 2:if(!(r=n instanceof Nt?function(e){return en.tinyFaceDetector.locateFaces(e,n)}:n instanceof mt?function(e){return en.ssdMobilenetv1.locateFaces(e,n)}:n instanceof Rt?function(e){return en.tinyYolov2.locateFaces(e,n)}:null))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(t){return Object(i.b)(e,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map(function(e){return P({},e)}))]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new mn(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new nn(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new sn(this.runAndExtendWithFaceDetections(),this.input)},t}(yn);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(i.c)(t,e),t.prototype.run=function(){return Object(i.b)(this,void 0,void 0,function(){var e,t;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,new bn(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach(function(e){e.score>t.score&&(t=e)}),[2,t]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(t){return Object(i.b)(e,void 0,void 0,function(){var e;return Object(i.d)(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?P({},e):void 0)]}})})})},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new gn(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new rn(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new cn(this.runAndExtendWithFaceDetection(),this.input)}}(yn);function xn(e,t){return void 0===t&&(t=new mt),new bn(e,t)}!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,o=function(){return"person "+r++};this._labeledDescriptors=n.map(function(e){if(e instanceof N)return e;if(e instanceof Float32Array)return new N(o(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new N(o(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map(function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(e,t){return e-r[t]}).reduce(function(e,t){return e+Math.pow(t,2)},0))}(t,e)}).reduce(function(e,t){return e+t},0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(n){var r=n.descriptors,o=n.label;return new I(o,t.computeMeanDistance(e,r))}).reduce(function(e,t){return e.distance<t.distance?e:t})},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new I("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},e.fromJSON=function(t){return new e(t.labeledDescriptors.map(function(e){return N.fromJSON(e)}),t.distanceThreshold)}}();function wn(e,t){var n=new a(t.width,t.height),r=n.width,o=n.height;if(r<=0||o<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:o}));if(Array.isArray(e))return e.map(function(e){return wn(e,{width:r,height:o})});if(Me(e)){var i=e.detection.forSize(r,o),u=e.unshiftedLandmarks.forSize(i.box.width,i.box.height);return Fe(P(e,i),u)}return D(e)?P(e,e.detection.forSize(r,o)):e instanceof O||e instanceof w?e.forSize(r,o):e}n.d(t,"a",function(){return Z}),n.d(t,"c",function(){return le}),n.d(t,"b",function(){return xn}),n.d(t,"d",function(){return en}),n.d(t,"e",function(){return wn})},function(e,t,n){"use strict";var r=n(110);var o=n(45);function i(e){var t=e.props,n=e.name,i=e.defaultTheme;return function(e){var t=e.theme,n=e.name,o=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?Object(r.a)(t.components[n].defaultProps,o):o}({theme:Object(o.a)(i),name:n,props:t})}var a=n(42);function u(e){return i({props:e.props,name:e.name,defaultTheme:a.a})}n.d(t,"a",function(){return u})},function(e,t,n){"use strict";var r=n(55);t.a=function(e,t){return t?Object(r.a)(e,t,{clone:!1}):e}},,function(e,t,n){"use strict";var r=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},o=n(37),i=n(29);n.d(t,"a",function(){return v});var a=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,s=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},l=Object(i.a)(function(e){return s(e)?e:e.replace(a,"-$&").toLowerCase()}),f=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(u,function(e,t,n){return d={name:t,styles:n,next:d},t})}return 1===o.a[e]||s(e)||"number"!==typeof t||0===t?t:t+"px"};function p(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return d={name:n.name,styles:n.styles,next:d},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)d={name:r.name,styles:r.styles,next:d},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=p(e,t,n[o])+";";else for(var i in n){var a=n[i];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":c(a)&&(r+=l(i)+":"+f(i,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var u=p(e,t,a);switch(i){case"animation":case"animationName":r+=l(i)+":"+u+";";break;default:r+=i+"{"+u+"}"}}else for(var s=0;s<a.length;s++)c(a[s])&&(r+=l(i)+":"+f(i,a[s])+";")}return r}(e,t,n);case"function":if(void 0!==e){var o=d,i=n(e);return d=o,p(e,t,i)}break;case"string":}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var d,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var v=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var o=!0,i="";d=void 0;var a=e[0];null==a||void 0===a.raw?(o=!1,i+=p(n,t,a)):i+=a[0];for(var u=1;u<e.length;u++)i+=p(n,t,e[u]),o&&(i+=a[u]);h.lastIndex=0;for(var s,c="";null!==(s=h.exec(i));)c+="-"+s[1];return{name:r(i)+c,styles:i,next:d}}},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var a=e.apply(t,n);function u(e){r(a,o,i,u,s,"next",e)}function s(e){r(a,o,i,u,s,"throw",e)}u(void 0)})}}n.d(t,"a",function(){return o})},,function(e,t,n){"use strict";t.a=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},function(e,t,n){"use strict";function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(2),o=(n(50),n(11),n(93),n(33),n(49),n(17),n(24));r.useInsertionEffect?r.useInsertionEffect:r.useLayoutEffect;var i=function(){var e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(o.a)(t)}.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}},function(e,t,n){"use strict";function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t){return Object.keys(t).forEach(function(n){return e[n]=t[n]})}),e}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d});var o={position:"relative",overflow:"hidden"},i={position:"absolute",top:"0",right:"0",bottom:"0",left:"0"},a={display:"block",maxWidth:"100%",touchAction:"none"},u={position:"absolute",cursor:"move",transform:"translate(-50%, -50%)"},s={onChange:function(){},retina:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPGNpcmNsZSBpZD0iYSIgY3g9IjEwIiBjeT0iMTAiIHI9IjEwIiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4zIiAvPgogICAgPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iOSIgc3Ryb2tlPSIjRkZGIiBzdHJva2Utb3BhY2l0eT0iLjgiIHN0cm9rZS13aWR0aD0iMiIvPgogIDwvZz4KPC9zdmc+"},c=function(){function e(e,t){void 0===t&&(t={});var n=this;this.startDragging=function(e){e.preventDefault(),n.isDragging=!0,e instanceof MouseEvent?n.updateCoordinates(e.clientX,e.clientY):n.updateCoordinates(e.touches[0].clientX,e.touches[0].clientY)},this.handleMove=function(e){if(e.preventDefault(),e instanceof MouseEvent)n.updateCoordinates(e.clientX,e.clientY);else{var t=e.touches[0],r=document.elementFromPoint(t.pageX,t.pageY);r!==n.retina&&r!==n.img?n.stopDragging():n.updateCoordinates(t.clientX,t.clientY)}},this.stopDragging=function(){n.isDragging=!1},this.updateRetinaPositionFromFocus=function(){n.updateRetinaPosition(n.calculateOffsetFromFocus())},this.updateRetinaPosition=function(e){n.retina.style.top=e.offsetY+"px",n.retina.style.left=e.offsetX+"px"},this.options=r(s,t),this.img=e,this.container=e.parentElement,this.retina=document.createElement("img"),this.retina.src=this.options.retina,this.retina.draggable=!1,this.container.appendChild(this.retina),this.container.addEventListener("mousedown",this.startDragging),this.container.addEventListener("mousemove",this.handleMove),this.container.addEventListener("mouseup",this.stopDragging),this.container.addEventListener("mouseleave",this.stopDragging),this.container.addEventListener("touchend",this.stopDragging),this.container.addEventListener("touchstart",this.startDragging,{passive:!0}),this.container.addEventListener("touchmove",this.handleMove,{passive:!0}),this.img.draggable=!1,this.img.addEventListener("load",this.updateRetinaPositionFromFocus),r(this.img.style,a),r(this.retina.style,u),r(this.container.style,o),this.focus=this.options.focus?this.options.focus:{x:parseFloat(this.img.getAttribute("data-focus-x"))||0,y:parseFloat(this.img.getAttribute("data-focus-y"))||0},this.setFocus(this.focus)}return e.prototype.setFocus=function(e){this.focus=e,this.img.setAttribute("data-focus-x",e.x.toString()),this.img.setAttribute("data-focus-y",e.y.toString()),this.updateRetinaPositionFromFocus(),this.options.onChange(e)},e.prototype.calculateOffsetFromFocus=function(){var e=this.img.getBoundingClientRect(),t=e.width,n=e.height;return{offsetX:t*(this.focus.x/2+.5),offsetY:n*(this.focus.y/-2+.5)}},e.prototype.updateCoordinates=function(e,t){if(this.isDragging){var n=this.img.getBoundingClientRect(),r=n.width,o=n.height,i=2*((e-n.left)/r-.5),a=-2*((t-n.top)/o-.5);this.setFocus({x:i,y:a})}},e}(),l={minHeight:"100%",minWidth:"100%"},f={height:"100%",width:"100%",border:"none",opacity:0,zIndex:-1,pointerEvents:"none"},p={debounceTime:17,updateOnWindowResize:!0,updateOnContainerResize:!1,containerPosition:"relative"},d=function(){function e(e,t){void 0===t&&(t={});var n=this;this.imageNode=e,this.listening=!1,this.setFocus=function(e){n.focus=e,n.img.setAttribute("data-focus-x",e.x.toString()),n.img.setAttribute("data-focus-y",e.y.toString()),n.applyShift()},this.applyShift=function(){var e=n.img,t=e.naturalWidth,r=e.naturalHeight,o=n.container.getBoundingClientRect(),i=o.width,a=o.height,u="0",s="0";if(!(i>0&&a>0&&t>0&&r>0))return!1;var c=t/i,l=r/a;n.img.style.maxHeight=null,n.img.style.maxWidth=null,t>i&&r>a&&(n.img.style[c>l?"maxHeight":"maxWidth"]="100%"),c>l?u=n.calcShift(l,i,t,n.focus.x)+"%":c<l&&(s=n.calcShift(c,a,r,n.focus.y,!0)+"%"),n.img.style.top=s,n.img.style.left=u},this.options=r(p,t),this.img=e,this.container=e.parentElement,this.img.__focused_image_instance__&&(this.img.__focused_image_instance__.stopListening(),this.img.removeEventListener("load",this.applyShift)),this.img.__focused_image_instance__=this,this.img.addEventListener("load",this.applyShift),r(this.container.style,o),this.container.style.position=this.options.containerPosition,r(this.img.style,l,i),this.debounceApplyShift=function(e,t){var n;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];clearTimeout(n),n=setTimeout(function(){return e.apply(void 0,r)},t)}}(this.applyShift,this.options.debounceTime),this.focus=this.options.focus?this.options.focus:{x:parseFloat(this.img.getAttribute("data-focus-x"))||0,y:parseFloat(this.img.getAttribute("data-focus-y"))||0},this.startListening(),this.setFocus(this.focus)}return e.prototype.startListening=function(){var e=this;if(!this.listening&&(this.listening=!0,this.options.updateOnWindowResize&&window.addEventListener("resize",this.debounceApplyShift),this.options.updateOnContainerResize)){var t=document.createElement("object");r(t.style,f,i),t.addEventListener("load",function(n){return t.contentDocument.defaultView.addEventListener("resize",function(){return e.debounceApplyShift()})}),t.type="text/html",t.setAttribute("aria-hidden","true"),t.tabIndex=-1,this.container.appendChild(t),t.data="about:blank",this.resizeListenerObject=t}},e.prototype.stopListening=function(){this.listening&&(this.listening=!1,window.removeEventListener("resize",this.debounceApplyShift),this.resizeListenerObject&&(this.resizeListenerObject.contentDocument.defaultView.removeEventListener("resize",this.debounceApplyShift),this.container.removeChild(this.resizeListenerObject),this.resizeListenerObject=null))},e.prototype.calcShift=function(e,t,n,r,o){var i=Math.floor(t/2),a=(r+1)/2,u=Math.floor(n/e),s=Math.floor(a*u);o&&(s=u-s);var c=s-i,l=u-s,f=t-i;return l<f&&(c-=f-l),c<0&&(c=0),-100*c/t},e}()},function(e,t,n){"use strict";t.a=function(e){var t=new WeakMap;return function(n){if(t.has(n))return t.get(n);var r=e(n);return t.set(n,r),r}}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",function(){return r})},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,c=[],l=!1,f=-1;function p(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var e=u(p);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||l||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(34);function o(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){"use strict";e.exports=n(77)},function(e,t,n){(function(t){var n="Expected a function",r=NaN,o="[object Symbol]",i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,l="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,p=l||f||Function("return this")(),d=Object.prototype.toString,h=Math.max,v=Math.min,m=function(){return p.Date.now()};function g(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==o}(e))return r;if(g(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=g(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=u.test(e);return n||s.test(e)?c(e.slice(2),n?2:8):a.test(e)?r:+e}e.exports=function(e,t,r){var o,i,a,u,s,c,l=0,f=!1,p=!1,d=!0;if("function"!=typeof e)throw new TypeError(n);function b(t){var n=o,r=i;return o=i=void 0,l=t,u=e.apply(r,n)}function x(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-l>=a}function w(){var e=m();if(x(e))return C(e);s=setTimeout(w,function(e){var n=t-(e-c);return p?v(n,a-(e-l)):n}(e))}function C(e){return s=void 0,d&&o?b(e):(o=i=void 0,u)}function E(){var e=m(),n=x(e);if(o=arguments,i=this,c=e,n){if(void 0===s)return function(e){return l=e,s=setTimeout(w,t),f?b(e):u}(c);if(p)return s=setTimeout(w,t),b(c)}return void 0===s&&(s=setTimeout(w,t)),u}return t=y(t)||0,g(r)&&(f=!!r.leading,a=(p="maxWait"in r)?h(y(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d),E.cancel=function(){void 0!==s&&clearTimeout(s),l=0,o=c=i=s=void 0},E.flush=function(){return void 0===s?u:C(m())},E}}).call(this,n(26))},function(e,t,n){var r;!function(){"use strict";var o={};function i(e,t,n){for(var r=n.data,o=n.width,i=~~e.x,a=~~(e.x+e.width),u=~~e.y,s=~~(e.y+e.height),c=255*e.weight,l=u;l<s;l++)for(var f=i;f<a;f++){r[4*(l*o+f)+3]+=c}}function a(e,t,n){for(var r={detail:0,saturation:0,skin:0,boost:0,total:0},o=t.data,i=e.scoreDownSample,a=1/i,s=t.height*i,c=t.width*i,l=t.width,f=0;f<s;f+=i)for(var p=0;p<c;p+=i){var d=4*(~~(f*a)*l+~~(p*a)),h=u(e,n,p,f),v=o[d+1]/255;r.skin+=o[d]/255*(v+e.skinBias)*h,r.detail+=v*h,r.saturation+=o[d+2]/255*(v+e.saturationBias)*h,r.boost+=o[d+3]/255*h}return r.total=(r.detail*e.detailWeight+r.skin*e.skinWeight+r.saturation*e.saturationWeight+r.boost*e.boostWeight)/(n.width*n.height),r}function u(e,t,n,r){if(t.x>n||n>=t.x+t.width||t.y>r||r>=t.y+t.height)return e.outsideImportance;n=(n-t.x)/t.width,r=(r-t.y)/t.height;var o=2*v(.5-n),i=2*v(.5-r),a=Math.max(o-1+e.edgeRadius,0),u=Math.max(i-1+e.edgeRadius,0),s=(a*a+u*u)*e.edgeWeight,c=1.41-m(o*o+i*i);return e.ruleOfThirds&&(c+=1.2*Math.max(0,c+s+.5)*(y(o)+y(i))),c+s}function s(e,t,n,r){var o=m(t*t+n*n+r*r),i=t/o-e.skinColor[0],a=n/o-e.skinColor[1],u=r/o-e.skinColor[2];return 1-m(i*i+a*a+u*u)}function c(e,t,n){this.width=e,this.height=t,this.data=n?new Uint8ClampedArray(n):new Uint8ClampedArray(e*t*4)}function l(e,t){for(var n=e.data,r=e.width,o=Math.floor(e.width/t),i=Math.floor(e.height/t),a=new c(o,i),u=a.data,s=1/(t*t),l=0;l<i;l++)for(var f=0;f<o;f++){for(var p=4*(l*o+f),d=0,h=0,v=0,m=0,g=0,y=0,b=0;b<t;b++)for(var x=0;x<t;x++){var w=4*((l*t+b)*r+(f*t+x));d+=n[w],h+=n[w+1],v+=n[w+2],m+=n[w+3],g=Math.max(g,n[w]),y=Math.max(y,n[w+1])}u[p]=d*s*.5+.5*g,u[p+1]=h*s*.7+.3*y,u[p+2]=v*s,u[p+3]=m*s}return a}function f(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}function p(e){return{open:function(t){var n=t.naturalWidth||t.width,r=t.naturalHeight||t.height,i=e(n,r),a=i.getContext("2d");return!t.naturalWidth||t.naturalWidth==t.width&&t.naturalHeight==t.height?(i.width=t.width,i.height=t.height):(i.width=t.naturalWidth,i.height=t.naturalHeight),a.drawImage(t,0,0),o.Promise.resolve(i)},resample:function(t,n,r){return Promise.resolve(t).then(function(t){var i=e(~~n,~~r);return i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,i.width,i.height),o.Promise.resolve(i)})},getData:function(e){return Promise.resolve(e).then(function(e){var t=e.getContext("2d").getImageData(0,0,e.width,e.height);return new c(e.width,e.height,t.data)})}}}o.Promise="undefined"!==typeof Promise?Promise:function(){throw new Error("No native promises and smartcrop.Promise not set.")},o.DEFAULTS={width:0,height:0,aspect:0,cropWidth:0,cropHeight:0,detailWeight:.2,skinColor:[.78,.57,.44],skinBias:.01,skinBrightnessMin:.2,skinBrightnessMax:1,skinThreshold:.8,skinWeight:1.8,saturationBrightnessMin:.05,saturationBrightnessMax:.9,saturationThreshold:.4,saturationBias:.2,saturationWeight:.1,scoreDownSample:8,step:8,scaleStep:.1,minScale:1,maxScale:1,edgeRadius:.4,edgeWeight:-20,outsideImportance:-.5,boostWeight:100,ruleOfThirds:!0,prescale:!0,imageOperations:null,canvasFactory:f,debug:!1},o.crop=function(e,t,n){var r=g({},o.DEFAULTS,t);r.aspect&&(r.width=r.aspect,r.height=1),null===r.imageOperations&&(r.imageOperations=p(r.canvasFactory));var u=r.imageOperations,f=1,v=1;return u.open(e,r.input).then(function(e){return r.width&&r.height&&(f=d(e.width/r.width,e.height/r.height),r.cropWidth=~~(r.width*f),r.cropHeight=~~(r.height*f),r.minScale=d(r.maxScale,h(1/f,r.minScale)),!1!==r.prescale&&((v=d(h(256/e.width,256/e.height),1))<1?(e=u.resample(e,e.width*v,e.height*v),r.cropWidth=~~(r.cropWidth*v),r.cropHeight=~~(r.cropHeight*v),r.boost&&(r.boost=r.boost.map(function(e){return{x:~~(e.x*v),y:~~(e.y*v),width:~~(e.width*v),height:~~(e.height*v),weight:e.weight}}))):v=1)),e}).then(function(e){return u.getData(e).then(function(e){for(var t=function(e,t){var n={},r=new c(t.width,t.height);(function(e,t){for(var n=e.data,r=t.data,o=e.width,i=e.height,a=0;a<i;a++)for(var u=0;u<o;u++){var s,c=4*(a*o+u);s=0===u||u>=o-1||0===a||a>=i-1?x(n,c):4*x(n,c)-x(n,c-4*o)-x(n,c-4)-x(n,c+4)-x(n,c+4*o),r[c+1]=s}})(t,r),function(e,t,n){for(var r=t.data,o=n.data,i=t.width,a=t.height,u=0;u<a;u++)for(var c=0;c<i;c++){var l=4*(u*i+c),f=b(r[l],r[l+1],r[l+2])/255,p=s(e,r[l],r[l+1],r[l+2]),d=p>e.skinThreshold,h=f>=e.skinBrightnessMin&&f<=e.skinBrightnessMax;o[l]=d&&h?(p-e.skinThreshold)*(255/(1-e.skinThreshold)):0}}(e,t,r),function(e,t,n){for(var r=t.data,o=n.data,i=t.width,a=t.height,u=0;u<a;u++)for(var s=0;s<i;s++){var c=4*(u*i+s),l=b(r[c],r[c+1],r[c+2])/255,f=w(r[c],r[c+1],r[c+2]),p=f>e.saturationThreshold,d=l>=e.saturationBrightnessMin&&l<=e.saturationBrightnessMax;o[c+2]=d&&p?(f-e.saturationThreshold)*(255/(1-e.saturationThreshold)):0}}(e,t,r),function(e,t){if(!e.boost)return;for(var n=t.data,r=0;r<t.width;r+=4)n[r+3]=0;for(r=0;r<e.boost.length;r++)i(e.boost[r],e,t)}(e,r);for(var o=l(r,e.scoreDownSample),u=-1/0,f=null,p=function(e,t,n){for(var r=[],o=d(t,n),i=e.cropWidth||o,a=e.cropHeight||o,u=e.maxScale;u>=e.minScale;u-=e.scaleStep)for(var s=0;s+a*u<=n;s+=e.step)for(var c=0;c+i*u<=t;c+=e.step)r.push({x:c,y:s,width:i*u,height:a*u});return r}(e,t.width,t.height),h=0,v=p.length;h<v;h++){var m=p[h];m.score=a(e,o,m),m.score.total>u&&(f=m,u=m.score.total)}n.topCrop=f,e.debug&&f&&(n.crops=p,n.debugOutput=r,n.debugOptions=e,n.debugTopCrop=g({},n.topCrop));return n}(r,e),o=t.crops||[t.topCrop],u=0,f=o.length;u<f;u++){var p=o[u];p.x=~~(p.x/v),p.y=~~(p.y/v),p.width=~~(p.width/v),p.height=~~(p.height/v)}return n&&n(t),t})})},o.isAvailable=function(e){if(!o.Promise)return!1;if((e?e.canvasFactory:f)===f&&!document.createElement("canvas").getContext("2d"))return!1;return!0},o.importance=u,o.ImgData=c,o._downSample=l,o._canvasImageOperations=p;var d=Math.min,h=Math.max,v=Math.abs,m=Math.sqrt;function g(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];if(r)for(var o in r)e[o]=r[o]}return e}function y(e){return e=16*((e-1/3+1)%2*.5-.5),Math.max(1-e*e,0)}function b(e,t,n){return.5126*n+.7152*t+.0722*e}function x(e,t){return b(e[t],e[t+1],e[t+2])}function w(e,t,n){var r=h(e/255,t/255,n/255),o=d(e/255,t/255,n/255);if(r===o)return 0;var i=r-o;return(r+o)/2>.5?i/(2-r-o):i/(r+o)}void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r),t.smartcrop=o,e.exports=o}()},function(e,t,n){"use strict";function r(e){var t="";if(!e)try{e=n(88)}catch(r){t=r.toString()}return{readFile:e?function(t){return new Promise(function(n,r){e.readFile(t,function(e,t){return e?r(e):n(t)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(64),o=Object(r.a)();t.a=o},function(e,t,n){"use strict";n(6);var r=n(3),o=n(22);var i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce(function(e,t){return t.filterProps.forEach(function(n){e[n]=t}),e},{}),i=function(e){return Object.keys(e).reduce(function(t,n){return r[n]?Object(o.a)(t,r[n](e)):t},{})};return i.propTypes={},i.filterProps=t.reduce(function(e,t){return e.concat(t.filterProps)},[]),i},a=n(15),u=n(12);function s(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var c=Object(r.a)({prop:"border",themeKey:"borders",transform:s}),l=Object(r.a)({prop:"borderTop",themeKey:"borders",transform:s}),f=Object(r.a)({prop:"borderRight",themeKey:"borders",transform:s}),p=Object(r.a)({prop:"borderBottom",themeKey:"borders",transform:s}),d=Object(r.a)({prop:"borderLeft",themeKey:"borders",transform:s}),h=Object(r.a)({prop:"borderColor",themeKey:"palette"}),v=Object(r.a)({prop:"borderTopColor",themeKey:"palette"}),m=Object(r.a)({prop:"borderRightColor",themeKey:"palette"}),g=Object(r.a)({prop:"borderBottomColor",themeKey:"palette"}),y=Object(r.a)({prop:"borderLeftColor",themeKey:"palette"}),b=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=Object(a.b)(e.theme,"shape.borderRadius",4,"borderRadius");return Object(u.b)(e,e.borderRadius,function(e){return{borderRadius:Object(a.d)(t,e)}})}return null};b.propTypes={},b.filterProps=["borderRadius"];var x=i(c,l,f,p,d,h,v,m,g,y,b),w=i(Object(r.a)({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),Object(r.a)({prop:"display"}),Object(r.a)({prop:"overflow"}),Object(r.a)({prop:"textOverflow"}),Object(r.a)({prop:"visibility"}),Object(r.a)({prop:"whiteSpace"})),C=i(Object(r.a)({prop:"flexBasis"}),Object(r.a)({prop:"flexDirection"}),Object(r.a)({prop:"flexWrap"}),Object(r.a)({prop:"justifyContent"}),Object(r.a)({prop:"alignItems"}),Object(r.a)({prop:"alignContent"}),Object(r.a)({prop:"order"}),Object(r.a)({prop:"flex"}),Object(r.a)({prop:"flexGrow"}),Object(r.a)({prop:"flexShrink"}),Object(r.a)({prop:"alignSelf"}),Object(r.a)({prop:"justifyItems"}),Object(r.a)({prop:"justifySelf"})),E=function(e){if(void 0!==e.gap&&null!==e.gap){var t=Object(a.b)(e.theme,"spacing",8,"gap");return Object(u.b)(e,e.gap,function(e){return{gap:Object(a.d)(t,e)}})}return null};E.propTypes={},E.filterProps=["gap"];var k=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=Object(a.b)(e.theme,"spacing",8,"columnGap");return Object(u.b)(e,e.columnGap,function(e){return{columnGap:Object(a.d)(t,e)}})}return null};k.propTypes={},k.filterProps=["columnGap"];var _=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=Object(a.b)(e.theme,"spacing",8,"rowGap");return Object(u.b)(e,e.rowGap,function(e){return{rowGap:Object(a.d)(t,e)}})}return null};_.propTypes={},_.filterProps=["rowGap"];var S=i(E,k,_,Object(r.a)({prop:"gridColumn"}),Object(r.a)({prop:"gridRow"}),Object(r.a)({prop:"gridAutoFlow"}),Object(r.a)({prop:"gridAutoColumns"}),Object(r.a)({prop:"gridAutoRows"}),Object(r.a)({prop:"gridTemplateColumns"}),Object(r.a)({prop:"gridTemplateRows"}),Object(r.a)({prop:"gridTemplateAreas"}),Object(r.a)({prop:"gridArea"})),O=i(Object(r.a)({prop:"position"}),Object(r.a)({prop:"zIndex",themeKey:"zIndex"}),Object(r.a)({prop:"top"}),Object(r.a)({prop:"right"}),Object(r.a)({prop:"bottom"}),Object(r.a)({prop:"left"})),T=i(Object(r.a)({prop:"color",themeKey:"palette"}),Object(r.a)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),Object(r.a)({prop:"backgroundColor",themeKey:"palette"})),R=Object(r.a)({prop:"boxShadow",themeKey:"shadows"});function I(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var A=Object(r.a)({prop:"width",transform:I}),N=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return Object(u.b)(e,e.maxWidth,function(t){var n,r,o;return{maxWidth:(null==(n=e.theme)?void 0:null==(r=n.breakpoints)?void 0:null==(o=r.values)?void 0:o[t])||u.d[t]||I(t)}})}return null};N.filterProps=["maxWidth"];var D=Object(r.a)({prop:"minWidth",transform:I}),P=Object(r.a)({prop:"height",transform:I}),M=Object(r.a)({prop:"maxHeight",transform:I}),F=Object(r.a)({prop:"minHeight",transform:I}),B=(Object(r.a)({prop:"size",cssProperty:"width",transform:I}),Object(r.a)({prop:"size",cssProperty:"height",transform:I}),i(A,N,D,P,M,F,Object(r.a)({prop:"boxSizing"}))),j=Object(r.a)({prop:"fontFamily",themeKey:"typography"}),L=Object(r.a)({prop:"fontSize",themeKey:"typography"}),W=Object(r.a)({prop:"fontStyle",themeKey:"typography"}),z=Object(r.a)({prop:"fontWeight",themeKey:"typography"}),U=Object(r.a)({prop:"letterSpacing"}),V=Object(r.a)({prop:"textTransform"}),H=Object(r.a)({prop:"lineHeight"}),G=Object(r.a)({prop:"textAlign"}),q=i(Object(r.a)({prop:"typography",cssProperty:!1,themeKey:"typography"}),j,L,W,z,U,H,G,V);n.d(t,"b",function(){return $}),n.d(t,"a",function(){return X});var K={borders:x.filterProps,display:w.filterProps,flexbox:C.filterProps,grid:S.filterProps,positions:O.filterProps,palette:T.filterProps,shadows:R.filterProps,sizing:B.filterProps,spacing:a.c.filterProps,typography:q.filterProps},$={borders:x,display:w,flexbox:C,grid:S,positions:O,palette:T,shadows:R,sizing:B,spacing:a.c,typography:q},X=Object.keys(K).reduce(function(e,t){return K[t].forEach(function(n){e[n]=$[t]}),e},{})},function(e,t,n){"use strict";n(92);var r=n(2),o=n(29),i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=Object(o.a)(function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91});function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=n(11),c=n(17),l=n(24),f=a,p=function(e){return"theme"!==e},d=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?f:p},h=function(e,t,n){var r;if(t){var o=t.shouldForwardProp;r=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},v=r.useInsertionEffect?r.useInsertionEffect:function(e){e()};var m=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;Object(c.c)(t,n,r);v(function(){return Object(c.b)(t,n,r)});return null},g=function e(t,n){var o,i,a=t.__emotion_real===t,f=a&&t.__emotion_base||t;void 0!==n&&(o=n.label,i=n.target);var p=h(t,n,a),v=p||d(f),g=!v("as");return function(){var y=arguments,b=a&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==o&&b.push("label:"+o+";"),null==y[0]||void 0===y[0].raw)b.push.apply(b,y);else{b.push(y[0][0]);for(var x=y.length,w=1;w<x;w++)b.push(y[w],y[0][w])}var C=Object(s.f)(function(e,t,n){var o=g&&e.as||f,a="",u=[],h=e;if(null==e.theme){for(var y in h={},e)h[y]=e[y];h.theme=Object(r.useContext)(s.b)}"string"===typeof e.className?a=Object(c.a)(t.registered,u,e.className):null!=e.className&&(a=e.className+" ");var x=Object(l.a)(b.concat(u),t.registered,h);a+=t.key+"-"+x.name,void 0!==i&&(a+=" "+i);var w=g&&void 0===p?d(o):v,C={};for(var E in e)g&&"as"===E||w(E)&&(C[E]=e[E]);return C.className=a,C.ref=n,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m,{cache:t,serialized:x,isStringTag:"string"===typeof o}),Object(r.createElement)(o,C))});return C.displayName=void 0!==o?o:"Styled("+("string"===typeof f?f:f.displayName||f.name||"Component")+")",C.defaultProps=t.defaultProps,C.__emotion_real=C,C.__emotion_base=f,C.__emotion_styles=b,C.__emotion_forwardProp=p,Object.defineProperty(C,"toString",{value:function(){return"."+i}}),C.withComponent=function(t,r){return e(t,u({},n,r,{shouldForwardProp:h(C,r,!0)})).apply(void 0,b)},C}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){g[e]=g(e)});var y=g;function b(e,t){return y(e,t)}n.d(t,"a",function(){return b})},function(e,t,n){"use strict";var r=n(113),o=n(2);var i=o.createContext(null);var a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=o.useContext(i);return n&&(e=n,0!==Object.keys(e).length)?n:t},u=Object(r.a)();t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return a(e)}},function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,"a",function(){return r})},,function(e,t,n){"use strict";var r=n(49),o=n.n(r);t.a=function(e,t){return o()(e,t)}},function(e,t,n){"use strict";var r=n(38),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?a:u[e.$$typeof]||o}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var o=d(n);o&&o!==h&&e(t,o,r)}var a=l(n);f&&(a=a.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<a.length;++m){var g=a[m];if(!i[g]&&(!r||!r[g])&&(!v||!v[g])&&(!u||!u[g])){var y=p(n,g);try{c(t,g,y)}catch(b){}}}}return t}},function(e,t,n){"use strict";var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(o){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),this.tags=[],this.ctr=0},e}(),o="-ms-",i="-moz-",a="-webkit-",u="comm",s="rule",c="decl",l="@import",f="@keyframes",p=Math.abs,d=String.fromCharCode,h=Object.assign;function v(e){return e.trim()}function m(e,t,n){return e.replace(t,n)}function g(e,t){return e.indexOf(t)}function y(e,t){return 0|e.charCodeAt(t)}function b(e,t,n){return e.slice(t,n)}function x(e){return e.length}function w(e){return e.length}function C(e,t){return t.push(e),e}function E(e,t){return e.map(t).join("")}var k=1,_=1,S=0,O=0,T=0,R="";function I(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:k,column:_,length:a,return:""}}function A(e,t){return h(I("",null,null,"",null,null,0),e,{length:-e.length},t)}function N(){return T=O>0?y(R,--O):0,_--,10===T&&(_=1,k--),T}function D(){return T=O<S?y(R,O++):0,_++,10===T&&(_=1,k++),T}function P(){return y(R,O)}function M(){return O}function F(e,t){return b(R,e,t)}function B(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function j(e){return k=_=1,S=x(R=e),O=0,[]}function L(e){return R="",e}function W(e){return v(F(O-1,function e(t){for(;D();)switch(T){case t:return O;case 34:case 39:34!==t&&39!==t&&e(T);break;case 40:41===t&&e(t);break;case 92:D()}return O}(91===e?e+2:40===e?e+1:e)))}function z(e){for(;(T=P())&&T<33;)D();return B(e)>2||B(T)>3?"":" "}function U(e,t){for(;--t&&D()&&!(T<48||T>102||T>57&&T<65||T>70&&T<97););return F(e,M()+(t<6&&32==P()&&32==D()))}function V(e,t){for(;D()&&e+T!==57&&(e+T!==84||47!==P()););return"/*"+F(t,O-1)+"*"+d(47===e?e:D())}function H(e){for(;!B(P());)D();return F(e,O)}function G(e){return L(function e(t,n,r,o,i,a,u,s,c){var l=0;var f=0;var p=u;var h=0;var v=0;var y=0;var b=1;var w=1;var E=1;var k=0;var _="";var S=i;var O=a;var T=o;var R=_;for(;w;)switch(y=k,k=D()){case 40:if(108!=y&&58==R.charCodeAt(p-1)){-1!=g(R+=m(W(k),"&","&\f"),"&\f")&&(E=-1);break}case 34:case 39:case 91:R+=W(k);break;case 9:case 10:case 13:case 32:R+=z(y);break;case 92:R+=U(M()-1,7);continue;case 47:switch(P()){case 42:case 47:C(K(V(D(),M()),n,r),c);break;default:R+="/"}break;case 123*b:s[l++]=x(R)*E;case 125*b:case 59:case 0:switch(k){case 0:case 125:w=0;case 59+f:v>0&&x(R)-p&&C(v>32?$(R+";",o,r,p-1):$(m(R," ","")+";",o,r,p-2),c);break;case 59:R+=";";default:if(C(T=q(R,n,r,l,f,i,s,_,S=[],O=[],p),a),123===k)if(0===f)e(R,n,T,T,S,a,p,s,O);else switch(h){case 100:case 109:case 115:e(t,T,T,o&&C(q(t,T,T,0,0,i,s,_,i,S=[],p),O),i,O,p,s,o?S:O);break;default:e(R,T,T,T,[""],O,0,s,O)}}l=f=v=0,b=E=1,_=R="",p=u;break;case 58:p=1+x(R),v=y;default:if(b<1)if(123==k)--b;else if(125==k&&0==b++&&125==N())continue;switch(R+=d(k),k*b){case 38:E=f>0?1:(R+="\f",-1);break;case 44:s[l++]=(x(R)-1)*E,E=1;break;case 64:45===P()&&(R+=W(D())),h=P(),f=p=x(_=R+=H(M())),k++;break;case 45:45===y&&2==x(R)&&(b=0)}}return a}("",null,null,null,[""],e=j(e),0,[0],e))}function q(e,t,n,r,o,i,a,u,c,l,f){for(var d=o-1,h=0===o?i:[""],g=w(h),y=0,x=0,C=0;y<r;++y)for(var E=0,k=b(e,d+1,d=p(x=a[y])),_=e;E<g;++E)(_=v(x>0?h[E]+" "+k:m(k,/&\f/g,h[E])))&&(c[C++]=_);return I(e,t,n,0===o?s:u,c,l,f)}function K(e,t,n){return I(e,t,n,u,d(T),b(e,2,-2),0)}function $(e,t,n,r){return I(e,t,n,c,b(e,0,r),b(e,r+1,-1),r)}function X(e,t){switch(function(e,t){return(((t<<2^y(e,0))<<2^y(e,1))<<2^y(e,2))<<2^y(e,3)}(e,t)){case 5103:return a+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return a+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return a+e+i+e+o+e+e;case 6828:case 4268:return a+e+o+e+e;case 6165:return a+e+o+"flex-"+e+e;case 5187:return a+e+m(e,/(\w+).+(:[^]+)/,a+"box-$1$2"+o+"flex-$1$2")+e;case 5443:return a+e+o+"flex-item-"+m(e,/flex-|-self/,"")+e;case 4675:return a+e+o+"flex-line-pack"+m(e,/align-content|flex-|-self/,"")+e;case 5548:return a+e+o+m(e,"shrink","negative")+e;case 5292:return a+e+o+m(e,"basis","preferred-size")+e;case 6060:return a+"box-"+m(e,"-grow","")+a+e+o+m(e,"grow","positive")+e;case 4554:return a+m(e,/([^-])(transform)/g,"$1"+a+"$2")+e;case 6187:return m(m(m(e,/(zoom-|grab)/,a+"$1"),/(image-set)/,a+"$1"),e,"")+e;case 5495:case 3959:return m(e,/(image-set\([^]*)/,a+"$1$`$1");case 4968:return m(m(e,/(.+:)(flex-)?(.*)/,a+"box-pack:$3"+o+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+a+e+e;case 4095:case 3583:case 4068:case 2532:return m(e,/(.+)-inline(.+)/,a+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(x(e)-1-t>6)switch(y(e,t+1)){case 109:if(45!==y(e,t+4))break;case 102:return m(e,/(.+:)(.+)-([^]+)/,"$1"+a+"$2-$3$1"+i+(108==y(e,t+3)?"$3":"$2-$3"))+e;case 115:return~g(e,"stretch")?X(m(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==y(e,t+1))break;case 6444:switch(y(e,x(e)-3-(~g(e,"!important")&&10))){case 107:return m(e,":",":"+a)+e;case 101:return m(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+a+(45===y(e,14)?"inline-":"")+"box$3$1"+a+"$2$3$1"+o+"$2box$3")+e}break;case 5936:switch(y(e,t+11)){case 114:return a+e+o+m(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return a+e+o+m(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return a+e+o+m(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return a+e+o+e+e}return e}function Y(e,t){for(var n="",r=w(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function Q(e,t,n,r){switch(e.type){case l:case c:return e.return=e.return||e.value;case u:return"";case f:return e.return=e.value+"{"+Y(e.children,r)+"}";case s:e.value=e.props.join(",")}return x(n=Y(e.children,r))?e.return=e.value+"{"+n+"}":""}n(33),n(29);var J=function(e,t,n){for(var r=0,o=0;r=o,o=P(),38===r&&12===o&&(t[n]=1),!B(o);)D();return F(e,O)},Z=function(e,t){return L(function(e,t){var n=-1,r=44;do{switch(B(r)){case 0:38===r&&12===P()&&(t[n]=1),e[n]+=J(O-1,t,n);break;case 2:e[n]+=W(r);break;case 4:if(44===r){e[++n]=58===P()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=d(r)}}while(r=D());return e}(j(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var o=[],i=Z(t,o),a=n.props,u=0,s=0;u<i.length;u++)for(var c=0;c<a.length;c++,s++)e.props[s]=o[u]?i[u].replace(/&\f/g,a[c]):a[c]+" "+i[u]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case c:e.return=X(e.value,e.length);break;case f:return Y([A(e,{value:m(e.value,"@","@"+a)})],r);case s:if(e.length)return E(e.props,function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Y([A(e,{props:[m(t,/:(read-\w+)/,":"+i+"$1")]})],r);case"::placeholder":return Y([A(e,{props:[m(t,/:(plac\w+)/,":"+a+"input-$1")]}),A(e,{props:[m(t,/:(plac\w+)/,":"+i+"$1")]}),A(e,{props:[m(t,/:(plac\w+)/,o+"input-$1")]})],r)}return""})}}];t.a=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))})}var o=e.stylisPlugins||re;var i,a,u={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)u[t[n]]=!0;s.push(e)});var c,l,f=[Q,(l=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],p=function(e){var t=w(e);return function(n,r,o,i){for(var a="",u=0;u<t;u++)a+=e[u](n,r,o,i)||"";return a}}([te,ne].concat(o,f));a=function(e,t,n,r){c=n,Y(G(e?e+"{"+t.styles+"}":t.styles),p),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:u,registered:{},insert:a};return d.sheet.hydrate(s),d}},function(e,t,n){e.exports=function e(t){"use strict";var n=/^\0+/g,r=/[\0\r\f]/g,o=/: */g,i=/zoo|gra/,a=/([,: ])(transform)/g,u=/,+\s*(?![^(]*[)])/g,s=/ +\s*(?![^(]*[)])/g,c=/ *[\0] */g,l=/,\r+?/g,f=/([\t\r\n ])*\f?&/g,p=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,d=/\W+/g,h=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,m=/:(read-only)/g,g=/\s+(?=[{\];=:>])/g,y=/([[}=:>])\s+/g,b=/(\{[^{]+?);(?=\})/g,x=/\s{2,}/g,w=/([^\(])(:+) */g,C=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,k=/([\s\S]*?);/g,_=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,O=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,R="-webkit-",I="-moz-",A="-ms-",N=59,D=125,P=123,M=40,F=41,B=91,j=93,L=10,W=13,z=9,U=64,V=32,H=38,G=45,q=95,K=42,$=44,X=58,Y=39,Q=34,J=47,Z=62,ee=43,te=126,ne=0,re=12,oe=11,ie=107,ae=109,ue=115,se=112,ce=111,le=105,fe=99,pe=100,de=112,he=1,ve=1,me=0,ge=1,ye=1,be=1,xe=0,we=0,Ce=0,Ee=[],ke=[],_e=0,Se=null,Oe=-2,Te=-1,Re=0,Ie=1,Ae=2,Ne=3,De=0,Pe=1,Me="",Fe="",Be="";function je(e,t,o,i,a){for(var u,s,l=0,f=0,p=0,d=0,g=0,y=0,b=0,x=0,C=0,k=0,_=0,S=0,O=0,T=0,q=0,xe=0,ke=0,Se=0,Oe=0,Te=o.length,We=Te-1,qe="",Ke="",$e="",Xe="",Ye="",Qe="";q<Te;){if(b=o.charCodeAt(q),q===We&&f+d+p+l!==0&&(0!==f&&(b=f===J?L:J),d=p=l=0,Te++,We++),f+d+p+l===0){if(q===We&&(xe>0&&(Ke=Ke.replace(r,"")),Ke.trim().length>0)){switch(b){case V:case z:case N:case W:case L:break;default:Ke+=o.charAt(q)}b=N}if(1===ke)switch(b){case P:case D:case N:case Q:case Y:case M:case F:case $:ke=0;case z:case W:case L:case V:break;default:for(ke=0,Oe=q,g=b,q--,b=N;Oe<Te;)switch(o.charCodeAt(Oe++)){case L:case W:case N:++q,b=g,Oe=Te;break;case X:xe>0&&(++q,b=g);case P:Oe=Te}}switch(b){case P:for(g=(Ke=Ke.trim()).charCodeAt(0),_=1,Oe=++q;q<Te;){switch(b=o.charCodeAt(q)){case P:_++;break;case D:_--;break;case J:switch(y=o.charCodeAt(q+1)){case K:case J:q=Ge(y,q,We,o)}break;case B:b++;case M:b++;case Q:case Y:for(;q++<We&&o.charCodeAt(q)!==b;);}if(0===_)break;q++}switch($e=o.substring(Oe,q),g===ne&&(g=(Ke=Ke.replace(n,"").trim()).charCodeAt(0)),g){case U:switch(xe>0&&(Ke=Ke.replace(r,"")),y=Ke.charCodeAt(1)){case pe:case ae:case ue:case G:u=t;break;default:u=Ee}if(Oe=($e=je(t,u,$e,y,a+1)).length,Ce>0&&0===Oe&&(Oe=Ke.length),_e>0&&(u=Le(Ee,Ke,Se),s=He(Ne,$e,u,t,ve,he,Oe,y,a,i),Ke=u.join(""),void 0!==s&&0===(Oe=($e=s.trim()).length)&&(y=0,$e="")),Oe>0)switch(y){case ue:Ke=Ke.replace(E,Ve);case pe:case ae:case G:$e=Ke+"{"+$e+"}";break;case ie:$e=(Ke=Ke.replace(h,"$1 $2"+(Pe>0?Me:"")))+"{"+$e+"}",$e=1===ye||2===ye&&Ue("@"+$e,3)?"@"+R+$e+"@"+$e:"@"+$e;break;default:$e=Ke+$e,i===de&&(Xe+=$e,$e="")}else $e="";break;default:$e=je(t,Le(t,Ke,Se),$e,i,a+1)}Ye+=$e,S=0,ke=0,T=0,xe=0,Se=0,O=0,Ke="",$e="",b=o.charCodeAt(++q);break;case D:case N:if((Oe=(Ke=(xe>0?Ke.replace(r,""):Ke).trim()).length)>1)switch(0===T&&((g=Ke.charCodeAt(0))===G||g>96&&g<123)&&(Oe=(Ke=Ke.replace(" ",":")).length),_e>0&&void 0!==(s=He(Ie,Ke,t,e,ve,he,Xe.length,i,a,i))&&0===(Oe=(Ke=s.trim()).length)&&(Ke="\0\0"),g=Ke.charCodeAt(0),y=Ke.charCodeAt(1),g){case ne:break;case U:if(y===le||y===fe){Qe+=Ke+o.charAt(q);break}default:if(Ke.charCodeAt(Oe-1)===X)break;Xe+=ze(Ke,g,y,Ke.charCodeAt(2))}S=0,ke=0,T=0,xe=0,Se=0,Ke="",b=o.charCodeAt(++q)}}switch(b){case W:case L:if(f+d+p+l+we===0)switch(k){case F:case Y:case Q:case U:case te:case Z:case K:case ee:case J:case G:case X:case $:case N:case P:case D:break;default:T>0&&(ke=1)}f===J?f=0:ge+S===0&&i!==ie&&Ke.length>0&&(xe=1,Ke+="\0"),_e*De>0&&He(Re,Ke,t,e,ve,he,Xe.length,i,a,i),he=1,ve++;break;case N:case D:if(f+d+p+l===0){he++;break}default:switch(he++,qe=o.charAt(q),b){case z:case V:if(d+l+f===0)switch(x){case $:case X:case z:case V:qe="";break;default:b!==V&&(qe=" ")}break;case ne:qe="\\0";break;case re:qe="\\f";break;case oe:qe="\\v";break;case H:d+f+l===0&&ge>0&&(Se=1,xe=1,qe="\f"+qe);break;case 108:if(d+f+l+me===0&&T>0)switch(q-T){case 2:x===se&&o.charCodeAt(q-3)===X&&(me=x);case 8:C===ce&&(me=C)}break;case X:d+f+l===0&&(T=q);break;case $:f+p+d+l===0&&(xe=1,qe+="\r");break;case Q:case Y:0===f&&(d=d===b?0:0===d?b:d);break;case B:d+f+p===0&&l++;break;case j:d+f+p===0&&l--;break;case F:d+f+l===0&&p--;break;case M:if(d+f+l===0){if(0===S)switch(2*x+3*C){case 533:break;default:_=0,S=1}p++}break;case U:f+p+d+l+T+O===0&&(O=1);break;case K:case J:if(d+l+p>0)break;switch(f){case 0:switch(2*b+3*o.charCodeAt(q+1)){case 235:f=J;break;case 220:Oe=q,f=K}break;case K:b===J&&x===K&&Oe+2!==q&&(33===o.charCodeAt(Oe+2)&&(Xe+=o.substring(Oe,q+1)),qe="",f=0)}}if(0===f){if(ge+d+l+O===0&&i!==ie&&b!==N)switch(b){case $:case te:case Z:case ee:case F:case M:if(0===S){switch(x){case z:case V:case L:case W:qe+="\0";break;default:qe="\0"+qe+(b===$?"":"\0")}xe=1}else switch(b){case M:T+7===q&&108===x&&(T=0),S=++_;break;case F:0==(S=--_)&&(xe=1,qe+="\0")}break;case z:case V:switch(x){case ne:case P:case D:case N:case $:case re:case z:case V:case L:case W:break;default:0===S&&(xe=1,qe+="\0")}}Ke+=qe,b!==V&&b!==z&&(k=b)}}C=x,x=b,q++}if(Oe=Xe.length,Ce>0&&0===Oe&&0===Ye.length&&0===t[0].length==0&&(i!==ae||1===t.length&&(ge>0?Fe:Be)===t[0])&&(Oe=t.join(",").length+2),Oe>0){if(u=0===ge&&i!==ie?function(e){for(var t,n,o=0,i=e.length,a=Array(i);o<i;++o){for(var u=e[o].split(c),s="",l=0,f=0,p=0,d=0,h=u.length;l<h;++l)if(!(0===(f=(n=u[l]).length)&&h>1)){if(p=s.charCodeAt(s.length-1),d=n.charCodeAt(0),t="",0!==l)switch(p){case K:case te:case Z:case ee:case V:case M:break;default:t=" "}switch(d){case H:n=t+Fe;case te:case Z:case ee:case V:case F:case M:break;case B:n=t+n+Fe;break;case X:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(be>0){n=t+n.substring(8,f-1);break}default:(l<1||u[l-1].length<1)&&(n=t+Fe+n)}break;case $:t="";default:n=f>1&&n.indexOf(":")>0?t+n.replace(w,"$1"+Fe+"$2"):t+n+Fe}s+=n}a[o]=s.replace(r,"").trim()}return a}(t):t,_e>0&&void 0!==(s=He(Ae,Xe,u,e,ve,he,Oe,i,a,i))&&0===(Xe=s).length)return Qe+Xe+Ye;if(Xe=u.join(",")+"{"+Xe+"}",ye*me!=0){switch(2!==ye||Ue(Xe,2)||(me=0),me){case ce:Xe=Xe.replace(m,":"+I+"$1")+Xe;break;case se:Xe=Xe.replace(v,"::"+R+"input-$1")+Xe.replace(v,"::"+I+"$1")+Xe.replace(v,":"+A+"input-$1")+Xe}me=0}}return Qe+Xe+Ye}function Le(e,t,n){var r=t.trim().split(l),o=r,i=r.length,a=e.length;switch(a){case 0:case 1:for(var u=0,s=0===a?"":e[0]+" ";u<i;++u)o[u]=We(s,o[u],n,a).trim();break;default:u=0;var c=0;for(o=[];u<i;++u)for(var f=0;f<a;++f)o[c++]=We(e[f]+" ",r[u],n,a).trim()}return o}function We(e,t,n,r){var o=t,i=o.charCodeAt(0);switch(i<33&&(i=(o=o.trim()).charCodeAt(0)),i){case H:switch(ge+r){case 0:case 1:if(0===e.trim().length)break;default:return o.replace(f,"$1"+e.trim())}break;case X:switch(o.charCodeAt(1)){case 103:if(be>0&&ge>0)return o.replace(p,"$1").replace(f,"$1"+Be);break;default:return e.trim()+o.replace(f,"$1"+e.trim())}default:if(n*ge>0&&o.indexOf("\f")>0)return o.replace(f,(e.charCodeAt(0)===X?"":"$1")+e.trim())}return e+o}function ze(e,t,n,r){var c,l=0,f=e+";",p=2*t+3*n+4*r;if(944===p)return function(e){var t=e.length,n=e.indexOf(":",9)+1,r=e.substring(0,n).trim(),o=e.substring(n,t-1).trim();switch(e.charCodeAt(9)*Pe){case 0:break;case G:if(110!==e.charCodeAt(10))break;default:for(var i=o.split((o="",u)),a=0,n=0,t=i.length;a<t;n=0,++a){for(var c=i[a],l=c.split(s);c=l[n];){var f=c.charCodeAt(0);if(1===Pe&&(f>U&&f<90||f>96&&f<123||f===q||f===G&&c.charCodeAt(1)!==G))switch(isNaN(parseFloat(c))+(-1!==c.indexOf("("))){case 1:switch(c){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:c+=Me}}l[n++]=c}o+=(0===a?"":",")+l.join(" ")}}return o=r+o+";",1===ye||2===ye&&Ue(o,1)?R+o+o:o}(f);if(0===ye||2===ye&&!Ue(f,1))return f;switch(p){case 1015:return 97===f.charCodeAt(10)?R+f+f:f;case 951:return 116===f.charCodeAt(3)?R+f+f:f;case 963:return 110===f.charCodeAt(5)?R+f+f:f;case 1009:if(100!==f.charCodeAt(4))break;case 969:case 942:return R+f+f;case 978:return R+f+I+f+f;case 1019:case 983:return R+f+I+f+A+f+f;case 883:return f.charCodeAt(8)===G?R+f+f:f.indexOf("image-set(",11)>0?f.replace(T,"$1"+R+"$2")+f:f;case 932:if(f.charCodeAt(4)===G)switch(f.charCodeAt(5)){case 103:return R+"box-"+f.replace("-grow","")+R+f+A+f.replace("grow","positive")+f;case 115:return R+f+A+f.replace("shrink","negative")+f;case 98:return R+f+A+f.replace("basis","preferred-size")+f}return R+f+A+f+f;case 964:return R+f+A+"flex-"+f+f;case 1023:if(99!==f.charCodeAt(8))break;return c=f.substring(f.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),R+"box-pack"+c+R+f+A+"flex-pack"+c+f;case 1005:return i.test(f)?f.replace(o,":"+R)+f.replace(o,":"+I)+f:f;case 1e3:switch(l=(c=f.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(l)){case 226:c=f.replace(C,"tb");break;case 232:c=f.replace(C,"tb-rl");break;case 220:c=f.replace(C,"lr");break;default:return f}return R+f+A+c+f;case 1017:if(-1===f.indexOf("sticky",9))return f;case 975:switch(l=(f=e).length-10,p=(c=(33===f.charCodeAt(l)?f.substring(0,l):f).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(c.charCodeAt(8)<111)break;case 115:f=f.replace(c,R+c)+";"+f;break;case 207:case 102:f=f.replace(c,R+(p>102?"inline-":"")+"box")+";"+f.replace(c,R+c)+";"+f.replace(c,A+c+"box")+";"+f}return f+";";case 938:if(f.charCodeAt(5)===G)switch(f.charCodeAt(6)){case 105:return c=f.replace("-items",""),R+f+R+"box-"+c+A+"flex-"+c+f;case 115:return R+f+A+"flex-item-"+f.replace(_,"")+f;default:return R+f+A+"flex-line-pack"+f.replace("align-content","").replace(_,"")+f}break;case 973:case 989:if(f.charCodeAt(3)!==G||122===f.charCodeAt(4))break;case 931:case 953:if(!0===O.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?ze(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):f.replace(c,R+c)+f.replace(c,I+c.replace("fill-",""))+f;break;case 962:if(f=R+f+(102===f.charCodeAt(5)?A+f:"")+f,n+r===211&&105===f.charCodeAt(13)&&f.indexOf("transform",10)>0)return f.substring(0,f.indexOf(";",27)+1).replace(a,"$1"+R+"$2")+f}return f}function Ue(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10),o=e.substring(n+1,e.length-1);return Se(2!==t?r:r.replace(S,"$1"),o,t)}function Ve(e,t){var n=ze(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(k," or ($1)").substring(4):"("+t+")"}function He(e,t,n,r,o,i,a,u,s,c){for(var l,f=0,p=t;f<_e;++f)switch(l=ke[f].call(Ke,e,p,n,r,o,i,a,u,s,c)){case void 0:case!1:case!0:case null:break;default:p=l}if(p!==t)return p}function Ge(e,t,n,r){for(var o=t+1;o<n;++o)switch(r.charCodeAt(o)){case J:if(e===K&&r.charCodeAt(o-1)===K&&t+2!==o)return o+1;break;case L:if(e===J)return o+1}return o}function qe(e){for(var t in e){var n=e[t];switch(t){case"keyframe":Pe=0|n;break;case"global":be=0|n;break;case"cascade":ge=0|n;break;case"compress":xe=0|n;break;case"semicolon":we=0|n;break;case"preserve":Ce=0|n;break;case"prefix":Se=null,n?"function"!=typeof n?ye=1:(ye=2,Se=n):ye=0}}return qe}function Ke(t,n){if(void 0!==this&&this.constructor===Ke)return e(t);var o=t,i=o.charCodeAt(0);i<33&&(i=(o=o.trim()).charCodeAt(0)),Pe>0&&(Me=o.replace(d,i===B?"":"-")),i=1,1===ge?Be=o:Fe=o;var a,u=[Be];_e>0&&void 0!==(a=He(Te,n,u,u,ve,he,0,0,0,0))&&"string"==typeof a&&(n=a);var s=je(Ee,u,n,0,0);return _e>0&&void 0!==(a=He(Oe,s,u,u,ve,he,s.length,0,0,0))&&"string"!=typeof(s=a)&&(i=0),Me="",Be="",Fe="",me=0,ve=1,he=1,xe*i==0?s:s.replace(r,"").replace(g,"").replace(y,"$1").replace(b,"$1").replace(x," ")}return Ke.use=function e(t){switch(t){case void 0:case null:_e=ke.length=0;break;default:if("function"==typeof t)ke[_e++]=t;else if("object"==typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else De=0|!!t}return e},Ke.set=qe,void 0!==t&&qe(t),Ke}(null)},function(e,t,n){"use strict";var r=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function o(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(o=e[n],i=t[n],!(o===i||r(o)&&r(i)))return!1;var o,i;return!0}t.a=function(e,t){var n;void 0===t&&(t=o);var r,i=[],a=!1;return function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return a&&n===this&&t(o,i)?r:(r=e.apply(this,o),a=!0,n=this,i=o,r)}}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var r=n(1),o=n(41);function i(){var t=e.Canvas||e.HTMLCanvasElement,n=e.Image||e.HTMLImageElement,i=e.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=Object(o.a)();return Object(r.a)({Canvas:t||function(){return function(){}}(),CanvasRenderingContext2D:e.CanvasRenderingContext2D||function(){return function(){}}(),Image:n||function(){return function(){}}(),ImageData:e.ImageData||function(){return function(){}}(),Video:e.HTMLVideoElement||function(){return function(){}}(),createCanvasElement:function(){if(t)return new t;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(n)return new n;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:i},a)}}).call(this,n(26))},function(e,t,n){"use strict";(function(r,o){function i(){return"object"===typeof r&&"undefined"!==typeof e&&"undefined"!==typeof o&&!!o.version}n.d(t,"a",function(){return i})}).call(this,n(26),n(35))},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=n(4);function o(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},a=n.clone?Object(r.a)({},e):e;return o(e)&&o(t)&&Object.keys(t).forEach(function(r){"__proto__"!==r&&(o(t[r])&&r in e&&o(e[r])?a[r]=i(e[r],t[r],n):a[r]=t[r])}),a}},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,t){for(var n,a,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in n=Object(arguments[s]))o.call(n,c)&&(u[c]=n[c]);if(r){a=r(n);for(var l=0;l<a.length;l++)i.call(n,a[l])&&(u[a[l]]=n[a[l]])}}return u}},,function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,t){for(var n,a,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in n=Object(arguments[s]))o.call(n,c)&&(u[c]=n[c]);if(r){a=r(n);for(var l=0;l<a.length;l++)i.call(n,a[l])&&(u[a[l]]=n[a[l]])}}return u}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(74)},function(e,t,n){"use strict";(function(e){var r=n(51),o=n.n(r),i=n(61),a=n.n(i),u=n(2),s=n.n(u),c=n(37),l=n(38),f=n(52),p=n(62),d=n(65),h=function(e,t){for(var n=[e[0]],r=0,o=t.length;r<o;r+=1)n.push(t[r],e[r+1]);return n},v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},x=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},w=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},C=function(e){return"object"===("undefined"===typeof e?"undefined":v(e))&&e.constructor===Object},E=Object.freeze([]),k=Object.freeze({});function _(e){return"function"===typeof e}function S(e){return e.displayName||e.name||"Component"}function O(e){return e&&"string"===typeof e.styledComponentId}var T="undefined"!==typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SC_ATTR||Object({NODE_ENV:"production",PUBLIC_URL:""}).SC_ATTR)||"data-styled",R="undefined"!==typeof window&&"HTMLElement"in window,I="boolean"===typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||"undefined"!==typeof e&&(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_SC_DISABLE_SPEEDY||Object({NODE_ENV:"production",PUBLIC_URL:""}).SC_DISABLE_SPEEDY)||!1;var A=function(e){function t(n){m(this,t);for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=w(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/packages/styled-components/src/utils/errors.md#"+n+" for more information."+(o.length>0?" Additional arguments: "+o.join(", "):"")));return w(a)}return b(t,e),t}(Error),N=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,D=function(e){var t=""+(e||""),n=[];return t.replace(N,function(e,t,r){return n.push({componentId:t,matchIndex:r}),e}),n.map(function(e,r){var o=e.componentId,i=e.matchIndex,a=n[r+1];return{componentId:o,cssFromDOM:a?t.slice(i,a.matchIndex):t.slice(i)}})},P=/^\s*\/\/.*$/gm,M=new o.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),F=new o.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),B=[],j=function(e){if(-2===e){var t=B;return B=[],t}},L=a()(function(e){B.push(e)}),W=void 0,z=void 0,U=void 0,V=function(e,t,n){return t>0&&-1!==n.slice(0,t).indexOf(z)&&n.slice(t-z.length,t)!==z?"."+W:e};F.use([function(e,t,n){2===e&&n.length&&n[0].lastIndexOf(z)>0&&(n[0]=n[0].replace(U,V))},L,j]),M.use([L,j]);function H(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",o=e.join("").replace(P,""),i=t&&n?n+" "+t+" { "+o+" }":o;return W=r,z=t,U=new RegExp("\\"+z+"\\b","g"),F(n||!t?"":t,i)}var G=function(){return n.nc},q=function(e,t,n){n&&((e[t]||(e[t]=Object.create(null)))[n]=!0)},K=function(e,t){e[t]=Object.create(null)},$=function(e){return function(t,n){return void 0!==e[t]&&e[t][n]}},X=function(e){var t="";for(var n in e)t+=Object.keys(e[n]).join(" ")+" ";return t.trim()},Y=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets.length,n=0;n<t;n+=1){var r=document.styleSheets[n];if(r.ownerNode===e)return r}throw new A(10)},Q=function(e,t,n){if(!t)return!1;var r=e.cssRules.length;try{e.insertRule(t,n<=r?n:r)}catch(o){return!1}return!0},J=function(e){return"\n/* sc-component-id: "+e+" */\n"},Z=function(e,t){for(var n=0,r=0;r<=t;r+=1)n+=e[r];return n},ee=function(e,t){return function(n){var r=G();return"<style "+[r&&'nonce="'+r+'"',T+'="'+X(t)+'"','data-styled-version="4.3.2"',n].filter(Boolean).join(" ")+">"+e()+"</style>"}},te=function(e,t){return function(){var n,r=((n={})[T]=X(t),n["data-styled-version"]="4.3.2",n),o=G();return o&&(r.nonce=o),s.a.createElement("style",y({},r,{dangerouslySetInnerHTML:{__html:e()}}))}},ne=function(e){return function(){return Object.keys(e)}},re=function(e){return document.createTextNode(J(e))},oe=function e(t,n){var r=void 0===t?Object.create(null):t,o=void 0===n?Object.create(null):n,i=function(e){var t=o[e];return void 0!==t?t:o[e]=[""]},a=function(){var e="";for(var t in o){var n=o[t][0];n&&(e+=J(t)+n)}return e};return{clone:function(){var t=function(e){var t=Object.create(null);for(var n in e)t[n]=y({},e[n]);return t}(r),n=Object.create(null);for(var i in o)n[i]=[o[i][0]];return e(t,n)},css:a,getIds:ne(o),hasNameForId:$(r),insertMarker:i,insertRules:function(e,t,n){i(e)[0]+=t.join(" "),q(r,e,n)},removeRules:function(e){var t=o[e];void 0!==t&&(t[0]="",K(r,e))},sealed:!1,styleTag:null,toElement:te(a,r),toHTML:ee(a,r)}},ie=function(e,t,n,r,o){if(R&&!n){var i=function(e,t,n){var r=document.createElement("style");r.setAttribute(T,""),r.setAttribute("data-styled-version","4.3.2");var o=G();if(o&&r.setAttribute("nonce",o),r.appendChild(document.createTextNode("")),e&&!t)e.appendChild(r);else{if(!t||!e||!t.parentNode)throw new A(6);t.parentNode.insertBefore(r,n?t:t.nextSibling)}return r}(e,t,r);return I?function(e,t){var n=Object.create(null),r=Object.create(null),o=void 0!==t,i=!1,a=function(t){var o=r[t];return void 0!==o?o:(r[t]=re(t),e.appendChild(r[t]),n[t]=Object.create(null),r[t])},u=function(){var e="";for(var t in r)e+=r[t].data;return e};return{clone:function(){throw new A(5)},css:u,getIds:ne(r),hasNameForId:$(n),insertMarker:a,insertRules:function(e,r,u){for(var s=a(e),c=[],l=r.length,f=0;f<l;f+=1){var p=r[f],d=o;if(d&&-1!==p.indexOf("@import"))c.push(p);else{d=!1;var h=f===l-1?"":" ";s.appendData(""+p+h)}}q(n,e,u),o&&c.length>0&&(i=!0,t().insertRules(e+"-import",c))},removeRules:function(a){var u=r[a];if(void 0!==u){var s=re(a);e.replaceChild(s,u),r[a]=s,K(n,a),o&&i&&t().removeRules(a+"-import")}},sealed:!1,styleTag:e,toElement:te(u,n),toHTML:ee(u,n)}}(i,o):function(e,t){var n=Object.create(null),r=Object.create(null),o=[],i=void 0!==t,a=!1,u=function(e){var t=r[e];return void 0!==t?t:(r[e]=o.length,o.push(0),K(n,e),r[e])},s=function(){var t=Y(e).cssRules,n="";for(var i in r){n+=J(i);for(var a=r[i],u=Z(o,a),s=u-o[a];s<u;s+=1){var c=t[s];void 0!==c&&(n+=c.cssText)}}return n};return{clone:function(){throw new A(5)},css:s,getIds:ne(r),hasNameForId:$(n),insertMarker:u,insertRules:function(r,s,c){for(var l=u(r),f=Y(e),p=Z(o,l),d=0,h=[],v=s.length,m=0;m<v;m+=1){var g=s[m],y=i;y&&-1!==g.indexOf("@import")?h.push(g):Q(f,g,p+d)&&(y=!1,d+=1)}i&&h.length>0&&(a=!0,t().insertRules(r+"-import",h)),o[l]+=d,q(n,r,c)},removeRules:function(u){var s=r[u];if(void 0!==s){var c=o[s];!function(e,t,n){for(var r=t-n,o=t;o>r;o-=1)e.deleteRule(o)}(Y(e),Z(o,s)-1,c),o[s]=0,K(n,u),i&&a&&t().removeRules(u+"-import")}},sealed:!1,styleTag:e,toElement:te(s,n),toHTML:ee(s,n)}}(i,o)}return oe()},ae=/\s+/,ue=void 0;ue=R?I?40:1e3:-1;var se=0,ce=void 0,le=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R?document.head:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];m(this,e),this.getImportRuleTag=function(){var e=t.importRuleTag;if(void 0!==e)return e;var n=t.tags[0];return t.importRuleTag=ie(t.target,n?n.styleTag:null,t.forceServer,!0)},se+=1,this.id=se,this.forceServer=r,this.target=r?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!R||this.forceServer)return this;var e=[],t=[],n=!1,r=document.querySelectorAll("style["+T+'][data-styled-version="4.3.2"]'),o=r.length;if(!o)return this;for(var i=0;i<o;i+=1){var a=r[i];n||(n=!!a.getAttribute("data-styled-streamed"));for(var u,s=(a.getAttribute(T)||"").trim().split(ae),c=s.length,l=0;l<c;l+=1)u=s[l],this.rehydratedNames[u]=!0;t.push.apply(t,D(a.textContent)),e.push(a)}var f=t.length;if(!f)return this;var p=this.makeTag(null);!function(e,t,n){for(var r=0,o=n.length;r<o;r+=1){var i=n[r],a=i.componentId,u=i.cssFromDOM,s=M("",u);e.insertRules(a,s)}for(var c=0,l=t.length;c<l;c+=1){var f=t[c];f.parentNode&&f.parentNode.removeChild(f)}}(p,e,t),this.capacity=Math.max(1,ue-f),this.tags.push(p);for(var d=0;d<f;d+=1)this.tagMap[t[d].componentId]=p;return this},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ce=new e(void 0,t).rehydrate()},e.prototype.clone=function(){var t=new e(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map(function(e){for(var n=e.getIds(),r=e.clone(),o=0;o<n.length;o+=1)t.tagMap[n[o]]=r;return r}),t.rehydratedNames=y({},this.rehydratedNames),t.deferred=y({},this.deferred),t},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(e){e.sealed=!0})},e.prototype.makeTag=function(e){var t=e?e.styleTag:null;return ie(this.target,t,this.forceServer,!1,this.getImportRuleTag)},e.prototype.getTagForId=function(e){var t=this.tagMap[e];if(void 0!==t&&!t.sealed)return t;var n=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=ue,n=this.makeTag(n),this.tags.push(n)),this.tagMap[e]=n},e.prototype.hasId=function(e){return void 0!==this.tagMap[e]},e.prototype.hasNameForId=function(e,t){if(void 0===this.ignoreRehydratedNames[e]&&this.rehydratedNames[t])return!0;var n=this.tagMap[e];return void 0!==n&&n.hasNameForId(e,t)},e.prototype.deferredInject=function(e,t){if(void 0===this.tagMap[e]){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].deferredInject(e,t);this.getTagForId(e).insertMarker(e),this.deferred[e]=t}},e.prototype.inject=function(e,t,n){for(var r=this.clones,o=0;o<r.length;o+=1)r[o].inject(e,t,n);var i=this.getTagForId(e);if(void 0!==this.deferred[e]){var a=this.deferred[e].concat(t);i.insertRules(e,a,n),this.deferred[e]=void 0}else i.insertRules(e,t,n)},e.prototype.remove=function(e){var t=this.tagMap[e];if(void 0!==t){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].remove(e);t.removeRules(e),this.ignoreRehydratedNames[e]=!0,this.deferred[e]=void 0}},e.prototype.toHTML=function(){return this.tags.map(function(e){return e.toHTML()}).join("")},e.prototype.toReactElements=function(){var e=this.id;return this.tags.map(function(t,n){var r="sc-"+e+"-"+n;return Object(u.cloneElement)(t.toElement(),{key:r})})},g(e,null,[{key:"master",get:function(){return ce||(ce=(new e).rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),fe=function(){function e(t,n){var r=this;m(this,e),this.inject=function(e){e.hasNameForId(r.id,r.name)||e.inject(r.id,r.rules,r.name)},this.toString=function(){throw new A(12,String(r.name))},this.name=t,this.rules=n,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),pe=/([A-Z])/g,de=/^ms-/;function he(e){return e.replace(pe,"-$1").toLowerCase().replace(de,"-ms-")}var ve=function(e){return void 0===e||null===e||!1===e||""===e},me=function e(t,n){var r=[];return Object.keys(t).forEach(function(n){if(!ve(t[n])){if(C(t[n]))return r.push.apply(r,e(t[n],n)),r;if(_(t[n]))return r.push(he(n)+":",t[n],";"),r;r.push(he(n)+": "+(o=n,null==(i=t[n])||"boolean"===typeof i||""===i?"":"number"!==typeof i||0===i||o in c.a?String(i).trim():i+"px")+";")}var o,i;return r}),n?[n+" {"].concat(r,["}"]):r};function ge(e,t,n){if(Array.isArray(e)){for(var r,o=[],i=0,a=e.length;i<a;i+=1)null!==(r=ge(e[i],t,n))&&(Array.isArray(r)?o.push.apply(o,r):o.push(r));return o}return ve(e)?null:O(e)?"."+e.styledComponentId:_(e)?"function"!==typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:ge(e(t),t,n):e instanceof fe?n?(e.inject(n),e.getName()):e:C(e)?me(e):e.toString();var u}function ye(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _(e)||C(e)?ge(h(E,[e].concat(n))):ge(h(e,n))}function be(e){for(var t,n=0|e.length,r=0|n,o=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++o;switch(n){case 3:r^=(255&e.charCodeAt(o+2))<<16;case 2:r^=(255&e.charCodeAt(o+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(o)))+((1540483477*(r>>>16)&65535)<<16)}return((r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16))^r>>>15)>>>0}var xe=52,we=function(e){return String.fromCharCode(e+(e>25?39:97))};function Ce(e){var t="",n=void 0;for(n=e;n>xe;n=Math.floor(n/xe))t=we(n%xe)+t;return we(n%xe)+t}function Ee(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(Array.isArray(r)&&!Ee(r,t))return!1;if(_(r)&&!O(r))return!1}return!t.some(function(e){return _(e)||function(e){for(var t in e)if(_(e[t]))return!0;return!1}(e)})}var ke,_e=!1,Se=function(e){return Ce(be(e))},Oe=function(){function e(t,n,r){m(this,e),this.rules=t,this.isStatic=!_e&&Ee(t,n),this.componentId=r,le.master.hasId(r)||le.master.deferredInject(r,[])}return e.prototype.generateAndInjectStyles=function(e,t){var n=this.isStatic,r=this.componentId,o=this.lastClassName;if(R&&n&&"string"===typeof o&&t.hasNameForId(r,o))return o;var i=ge(this.rules,e,t),a=Se(this.componentId+i.join(""));return t.hasNameForId(r,a)||t.inject(this.componentId,H(i,"."+a,void 0,r),a),this.lastClassName=a,a},e.generateName=function(e){return Se(e)},e}(),Te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k,r=!!n&&e.theme===n.theme;return e.theme&&!r?e.theme:t||n.theme},Re=/[[\].#*$><+~=|^:(),"'`-]+/g,Ie=/(^-|-$)/g;function Ae(e){return e.replace(Re,"-").replace(Ie,"")}function Ne(e){return"string"===typeof e&&!0}var De={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},Pe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Me=((ke={})[l.ForwardRef]={$$typeof:!0,render:!0},ke),Fe=Object.defineProperty,Be=Object.getOwnPropertyNames,je=Object.getOwnPropertySymbols,Le=void 0===je?function(){return[]}:je,We=Object.getOwnPropertyDescriptor,ze=Object.getPrototypeOf,Ue=Object.prototype,Ve=Array.prototype;function He(e,t,n){if("string"!==typeof t){var r=ze(t);r&&r!==Ue&&He(e,r,n);for(var o=Ve.concat(Be(t),Le(t)),i=Me[e.$$typeof]||De,a=Me[t.$$typeof]||De,u=o.length,s=void 0,c=void 0;u--;)if(c=o[u],!Pe[c]&&(!n||!n[c])&&(!a||!a[c])&&(!i||!i[c])&&(s=We(t,c)))try{Fe(e,c,s)}catch(l){}return e}return e}var Ge=Object(u.createContext)(),qe=Ge.Consumer,Ke=(function(e){function t(n){m(this,t);var r=w(this,e.call(this,n));return r.getContext=Object(f.a)(r.getContext.bind(r)),r.renderInner=r.renderInner.bind(r),r}b(t,e),t.prototype.render=function(){return this.props.children?s.a.createElement(Ge.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(e){var t=this.getContext(this.props.theme,e);return s.a.createElement(Ge.Provider,{value:t},s.a.Children.only(this.props.children))},t.prototype.getTheme=function(e,t){if(_(e))return e(t);if(null===e||Array.isArray(e)||"object"!==("undefined"===typeof e?"undefined":v(e)))throw new A(8);return y({},t,e)},t.prototype.getContext=function(e,t){return this.getTheme(e,t)}}(u.Component),function(){function e(){m(this,e),this.masterSheet=le.master,this.instance=this.masterSheet.clone(),this.sealed=!1}e.prototype.seal=function(){if(!this.sealed){var e=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(e,1),this.sealed=!0}},e.prototype.collectStyles=function(e){if(this.sealed)throw new A(2);return s.a.createElement(Xe,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(e){throw new A(3)}}(),Object(u.createContext)()),$e=Ke.Consumer,Xe=function(e){function t(n){m(this,t);var r=w(this,e.call(this,n));return r.getContext=Object(f.a)(r.getContext),r}return b(t,e),t.prototype.getContext=function(e,t){if(e)return e;if(t)return new le(t);throw new A(4)},t.prototype.render=function(){var e=this.props,t=e.children,n=e.sheet,r=e.target;return s.a.createElement(Ke.Provider,{value:this.getContext(n,r)},t)},t}(u.Component),Ye={};var Qe=function(e){function t(){m(this,t);var n=w(this,e.call(this));return n.attrs={},n.renderOuter=n.renderOuter.bind(n),n.renderInner=n.renderInner.bind(n),n}return b(t,e),t.prototype.render=function(){return s.a.createElement($e,null,this.renderOuter)},t.prototype.renderOuter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le.master;return this.styleSheet=e,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():s.a.createElement(qe,null,this.renderInner)},t.prototype.renderInner=function(e){var t=this.props.forwardedComponent,n=t.componentStyle,r=t.defaultProps,o=(t.displayName,t.foldedComponentIds),i=t.styledComponentId,a=t.target,s=void 0;s=n.isStatic?this.generateAndInjectStyles(k,this.props):this.generateAndInjectStyles(Te(this.props,e,r)||k,this.props);var c=this.props.as||this.attrs.as||a,l=Ne(c),f={},d=y({},this.attrs,this.props),h=void 0;for(h in d)"forwardedComponent"!==h&&"as"!==h&&("forwardedRef"===h?f.ref=d[h]:"forwardedAs"===h?f.as=d[h]:l&&!Object(p.a)(h)||(f[h]=d[h]));return this.props.style&&this.attrs.style&&(f.style=y({},this.attrs.style,this.props.style)),f.className=Array.prototype.concat(o,this.props.className,i,this.attrs.className,s).filter(Boolean).join(" "),Object(u.createElement)(c,f)},t.prototype.buildExecutionContext=function(e,t,n){var r=this,o=y({},t,{theme:e});return n.length?(this.attrs={},n.forEach(function(e){var t,n=e,i=!1,a=void 0,u=void 0;for(u in _(n)&&(n=n(o),i=!0),n)a=n[u],i||!_(a)||(t=a)&&t.prototype&&t.prototype.isReactComponent||O(a)||(a=a(o)),r.attrs[u]=a,o[u]=a}),o):o},t.prototype.generateAndInjectStyles=function(e,t){var n=t.forwardedComponent,r=n.attrs,o=n.componentStyle;n.warnTooManyClasses;return o.isStatic&&!r.length?o.generateAndInjectStyles(k,this.styleSheet):o.generateAndInjectStyles(this.buildExecutionContext(e,t,r),this.styleSheet)},t}(u.Component);function Je(e,t,n){var r=O(e),o=!Ne(e),i=t.displayName,a=void 0===i?function(e){return Ne(e)?"styled."+e:"Styled("+S(e)+")"}(e):i,u=t.componentId,c=void 0===u?function(e,t,n){var r="string"!==typeof t?"sc":Ae(t),o=(Ye[r]||0)+1;Ye[r]=o;var i=r+"-"+e.generateName(r+o);return n?n+"-"+i:i}(Oe,t.displayName,t.parentComponentId):u,l=t.ParentComponent,f=void 0===l?Qe:l,p=t.attrs,h=void 0===p?E:p,v=t.displayName&&t.componentId?Ae(t.displayName)+"-"+t.componentId:t.componentId||c,m=r&&e.attrs?Array.prototype.concat(e.attrs,h).filter(Boolean):h,g=new Oe(r?e.componentStyle.rules.concat(n):n,m,v),b=void 0,w=function(e,t){return s.a.createElement(f,y({},e,{forwardedComponent:b,forwardedRef:t}))};return w.displayName=a,(b=s.a.forwardRef(w)).displayName=a,b.attrs=m,b.componentStyle=g,b.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):E,b.styledComponentId=v,b.target=r?e.target:e,b.withComponent=function(e){var r=t.componentId,o=x(t,["componentId"]),i=r&&r+"-"+(Ne(e)?e:Ae(S(e)));return Je(e,y({},o,{attrs:m,componentId:i,ParentComponent:f}),n)},Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=r?Object(d.a)(e.defaultProps,t):t}}),b.toString=function(){return"."+b.styledComponentId},o&&He(b,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),b}var Ze=function(e){return function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;if(!Object(l.isValidElementType)(n))throw new A(1,String(n));var o=function(){return t(n,r,ye.apply(void 0,arguments))};return o.withConfig=function(o){return e(t,n,y({},r,o))},o.attrs=function(o){return e(t,n,y({},r,{attrs:Array.prototype.concat(r.attrs,o).filter(Boolean)}))},o}(Je,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){Ze[e]=Ze(e)});!function(){function e(t,n){m(this,e),this.rules=t,this.componentId=n,this.isStatic=Ee(t,E),le.master.hasId(n)||le.master.deferredInject(n,[])}e.prototype.createStyles=function(e,t){var n=H(ge(this.rules,e,t),"");t.inject(this.componentId,n)},e.prototype.removeStyles=function(e){var t=this.componentId;e.hasId(t)&&e.remove(t)},e.prototype.renderStyles=function(e,t){this.removeStyles(t),this.createStyles(e,t)}}();R&&(window.scCGSHMRCache={});t.a=Ze}).call(this,n(35))},function(e,t,n){e.exports=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(n){}}return function(n,r,o,i,a,u,s,c,l,f){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(o[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}}()},function(e,t,n){"use strict";var r=n(29),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=Object(r.a)(function(e){return o.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91});t.a=i},function(e,t,n){"use strict";var r=function(e){return e},o=function(){var e=r;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=r}}}();t.a=o},function(e,t,n){"use strict";var r=n(6),o=n(4),i=n(5),a=n(55),u=n(113);function s(e,t,n){var i;return Object(o.a)({toolbar:(i={minHeight:56},Object(r.a)(i,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),Object(r.a)(i,e.up("sm"),{minHeight:64}),i)},n)}var c=n(46),l=n(109),f={black:"#000",white:"#fff"},p={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},h={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},g={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:f.white,default:f.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},w={text:{primary:f.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:f.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function C(e,t,n,r){var o=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Object(l.d)(e.main,o):"dark"===t&&(e.dark=Object(l.b)(e.main,i)))}function E(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,u=void 0===r?3:r,s=e.tonalOffset,E=void 0===s?.2:s,k=Object(i.a)(e,b),_=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(n),S=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(n),O=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:h[500],light:h[300],dark:h[700]}:{main:h[700],light:h[400],dark:h[800]}}(n),T=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:g[700],light:g[500],dark:g[900]}}(n),R=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(n),I=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:"#ed6c02",light:v[500],dark:v[900]}}(n);function A(e){return Object(l.c)(e,w.text.primary)>=u?w.text.primary:x.text.primary}var N=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,u=void 0===a?300:a,s=e.darkShade,l=void 0===s?700:s;if(!(t=Object(o.a)({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(Object(c.a)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(Object(c.a)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return C(t,"light",u,E),C(t,"dark",l,E),t.contrastText||(t.contrastText=A(t.main)),t},D={dark:w,light:x};return Object(a.a)(Object(o.a)({common:f,mode:n,primary:N({color:_,name:"primary"}),secondary:N({color:S,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:N({color:O,name:"error"}),warning:N({color:I,name:"warning"}),info:N({color:T,name:"info"}),success:N({color:R,name:"success"}),grey:p,contrastThreshold:u,getContrastText:A,augmentColor:N,tonalOffset:E},D[n]),k)}var k=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var _={textTransform:"uppercase"},S='"Roboto", "Helvetica", "Arial", sans-serif';function O(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,u=void 0===r?S:r,s=n.fontSize,c=void 0===s?14:s,l=n.fontWeightLight,f=void 0===l?300:l,p=n.fontWeightRegular,d=void 0===p?400:p,h=n.fontWeightMedium,v=void 0===h?500:h,m=n.fontWeightBold,g=void 0===m?700:m,y=n.htmlFontSize,b=void 0===y?16:y,x=n.allVariants,w=n.pxToRem,C=Object(i.a)(n,k);var E=c/14,O=w||function(e){return"".concat(e/b*E,"rem")},T=function(e,t,n,r,i){return Object(o.a)({fontFamily:u,fontWeight:e,fontSize:O(t),lineHeight:n},u===S?{letterSpacing:"".concat((a=r/t,Math.round(1e5*a)/1e5),"em")}:{},i,x);var a},R={h1:T(f,96,1.167,-1.5),h2:T(f,60,1.2,-.5),h3:T(d,48,1.167,0),h4:T(d,34,1.235,.25),h5:T(d,24,1.334,0),h6:T(v,20,1.6,.15),subtitle1:T(d,16,1.75,.15),subtitle2:T(v,14,1.57,.1),body1:T(d,16,1.5,.15),body2:T(d,14,1.43,.15),button:T(v,14,1.75,.4,_),caption:T(d,12,1.66,.4),overline:T(d,12,2.66,1,_)};return Object(a.a)(Object(o.a)({htmlFontSize:b,pxToRem:O,fontFamily:u,fontSize:c,fontWeightLight:f,fontWeightRegular:d,fontWeightMedium:v,fontWeightBold:g},R),C,{clone:!1})}var T=.2,R=.14,I=.12;function A(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(T,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(R,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(I,")")].join(",")}var N=["none",A(0,2,1,-1,0,1,1,0,0,1,3,0),A(0,3,1,-2,0,2,2,0,0,1,5,0),A(0,3,3,-2,0,3,4,0,0,1,8,0),A(0,2,4,-1,0,4,5,0,0,1,10,0),A(0,3,5,-1,0,5,8,0,0,1,14,0),A(0,3,5,-1,0,6,10,0,0,1,18,0),A(0,4,5,-2,0,7,10,1,0,2,16,1),A(0,5,5,-3,0,8,10,1,0,3,14,2),A(0,5,6,-3,0,9,12,1,0,3,16,2),A(0,6,6,-3,0,10,14,1,0,4,18,3),A(0,6,7,-4,0,11,15,1,0,4,20,3),A(0,7,8,-4,0,12,17,2,0,5,22,4),A(0,7,8,-4,0,13,19,2,0,5,24,4),A(0,7,9,-4,0,14,21,2,0,5,26,4),A(0,8,9,-5,0,15,22,2,0,6,28,5),A(0,8,10,-5,0,16,24,2,0,6,30,5),A(0,8,11,-5,0,17,26,2,0,6,32,5),A(0,9,11,-5,0,18,28,2,0,7,34,6),A(0,9,12,-6,0,19,29,2,0,7,36,6),A(0,10,13,-6,0,20,31,3,0,8,38,7),A(0,10,13,-6,0,21,33,3,0,8,40,7),A(0,10,14,-6,0,22,35,3,0,8,42,7),A(0,11,14,-7,0,23,36,3,0,9,44,8),A(0,11,15,-7,0,24,38,3,0,9,46,8)],D=["duration","easing","delay"],P={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},M={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function F(e){return"".concat(Math.round(e),"ms")}function B(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function j(e){var t=Object(o.a)({},P,e.easing),n=Object(o.a)({},M,e.duration);return Object(o.a)({getAutoHeightDuration:B,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.duration,a=void 0===o?n.standard:o,u=r.easing,s=void 0===u?t.easeInOut:u,c=r.delay,l=void 0===c?0:c;Object(i.a)(r,D);return(Array.isArray(e)?e:[e]).map(function(e){return"".concat(e," ").concat("string"===typeof a?a:F(a)," ").concat(s," ").concat("string"===typeof l?l:F(l))}).join(",")}},e,{easing:t,duration:n})}var L={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},W=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,c=void 0===r?{}:r,l=e.transitions,f=void 0===l?{}:l,p=e.typography,d=void 0===p?{}:p,h=Object(i.a)(e,W),v=E(c),m=Object(u.a)(e),g=Object(a.a)(m,{mixins:s(m.breakpoints,m.spacing,n),palette:v,shadows:N.slice(),typography:O(v,d),transitions:j(f),zIndex:Object(o.a)({},L)});g=Object(a.a)(g,h);for(var y=arguments.length,b=new Array(y>1?y-1:0),x=1;x<y;x++)b[x-1]=arguments[x];return g=b.reduce(function(e,t){return Object(a.a)(e,t)},g)}t.a=z},function(e,t,n){"use strict";function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function o(e){return"Undefined"===r(e)}function i(e){return"Null"===r(e)}function a(e){return"Object"===r(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function u(e){return"Array"===r(e)}function s(e){return"Symbol"===r(e)}var c,l,f,p,d;c=i,l=o;function h(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}function v(e,t,n,r){var o=r.propertyIsEnumerable(t)?"enumerable":"nonenumerable";"enumerable"===o&&(e[t]=n),"nonenumerable"===o&&Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=null,o=e;return a(e)&&e.extensions&&1===Object.keys(e).length&&(o={},r=e.extensions),t.reduce(function(e,t){return function e(t,n,r){if(!a(n))return r&&u(r)&&r.forEach(function(e){n=e(t,n)}),n;var o={};return a(t)&&(o=h(Object.getOwnPropertyNames(t),Object.getOwnPropertySymbols(t)).reduce(function(e,r){var o=t[r];return(!s(r)&&!Object.getOwnPropertyNames(n).includes(r)||s(r)&&!Object.getOwnPropertySymbols(n).includes(r))&&v(e,r,o,t),e},{})),h(Object.getOwnPropertyNames(n),Object.getOwnPropertySymbols(n)).reduce(function(o,i){var s=n[i],c=a(t)?t[i]:void 0;return r&&u(r)&&r.forEach(function(e){s=e(c,s)}),void 0!==c&&a(s)&&(s=e(c,s,r)),v(o,i,s,n),o},o)}(e,t,r)},o)}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(46);function o(e){if("string"!==typeof e)throw new Error(Object(r.a)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},,,,,,,function(e,t,n){"use strict";var r=n(56),o="function"===typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,a=o?Symbol.for("react.portal"):60106,u=o?Symbol.for("react.fragment"):60107,s=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,l=o?Symbol.for("react.provider"):60109,f=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.concurrent_mode"):60111,d=o?Symbol.for("react.forward_ref"):60112,h=o?Symbol.for("react.suspense"):60113,v=o?Symbol.for("react.memo"):60115,m=o?Symbol.for("react.lazy"):60116,g="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,o,i,a,u){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,i,a,u],c=0;(e=Error(t.replace(/%s/g,function(){return s[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x={};function w(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||b}function C(){}function E(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||b}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&y("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},C.prototype=w.prototype;var k=E.prototype=new C;k.constructor=E,r(k,w.prototype),k.isPureReactComponent=!0;var _={current:null},S={current:null},O=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function R(e,t,n){var r=void 0,o={},a=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(a=""+t.key),t)O.call(t,r)&&!T.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:i,type:e,key:a,ref:u,props:o,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var A=/\/+/g,N=[];function D(e,t,n,r){if(N.length){var o=N.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>N.length&&N.push(e)}function M(e,t,n){return null==e?0:function e(t,n,r,o){var u=typeof t;"undefined"!==u&&"boolean"!==u||(t=null);var s=!1;if(null===t)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case i:case a:s=!0}}if(s)return r(o,t,""===n?"."+F(t,0):n),1;if(s=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+F(u=t[c],c);s+=e(u,l,r,o)}else if(l=null===t||"object"!==typeof t?null:"function"===typeof(l=g&&t[g]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(u=t.next()).done;)s+=e(u=u.value,l=n+F(u,c++),r,o);else"object"===u&&y("31","[object Object]"===(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return s}(e,"",t,n)}function F(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function B(e,t){e.func.call(e.context,t,e.count++)}function j(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?L(e,r,n,function(e){return e}):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(A,"$&/")+"/")+n)),r.push(e))}function L(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(A,"$&/")+"/"),M(e,j,t=D(t,i,r,o)),P(t)}function W(){var e=_.current;return null===e&&y("321"),e}var z={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return L(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;M(e,B,t=D(null,null,t,n)),P(t)},count:function(e){return M(e,function(){return null},null)},toArray:function(e){var t=[];return L(e,t,null,function(e){return e}),t},only:function(e){return I(e)||y("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:E,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return W().useCallback(e,t)},useContext:function(e,t){return W().useContext(e,t)},useEffect:function(e,t){return W().useEffect(e,t)},useImperativeHandle:function(e,t,n){return W().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return W().useLayoutEffect(e,t)},useMemo:function(e,t){return W().useMemo(e,t)},useReducer:function(e,t,n){return W().useReducer(e,t,n)},useRef:function(e){return W().useRef(e)},useState:function(e){return W().useState(e)},Fragment:u,StrictMode:s,Suspense:h,createElement:R,cloneElement:function(e,t,n){(null===e||void 0===e)&&y("267",e);var o=void 0,a=r({},e.props),u=e.key,s=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,c=S.current),void 0!==t.key&&(u=""+t.key);var l=void 0;for(o in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)O.call(t,o)&&!T.hasOwnProperty(o)&&(a[o]=void 0===t[o]&&void 0!==l?l[o]:t[o])}if(1===(o=arguments.length-2))a.children=n;else if(1<o){l=Array(o);for(var f=0;f<o;f++)l[f]=arguments[f+2];a.children=l}return{$$typeof:i,type:e.type,key:u,ref:s,props:a,_owner:c}},createFactory:function(e){var t=R.bind(null,e);return t.type=e,t},isValidElement:I,version:"16.8.6",unstable_ConcurrentMode:p,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:_,ReactCurrentOwner:S,assign:r}},U={default:z},V=U&&z||U;e.exports=V.default||V},function(e,t,n){"use strict";var r=n(2),o=n(56),i=n(75);function a(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,o,i,a,u){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,o,i,a,u],c=0;(e=Error(t.replace(/%s/g,function(){return s[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||a("227");var u=!1,s=null,c=!1,l=null,f={onError:function(e){u=!0,s=e}};function p(e,t,n,r,o,i,a,c,l){u=!1,s=null,function(e,t,n,r,o,i,a,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}.apply(f,arguments)}var d=null,h={};function v(){if(d)for(var e in h){var t=h[e],n=d.indexOf(e);if(-1<n||a("96",e),!g[n])for(var r in t.extractEvents||a("97",e),g[n]=t,n=t.eventTypes){var o=void 0,i=n[r],u=t,s=r;y.hasOwnProperty(s)&&a("99",s),y[s]=i;var c=i.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&m(c[o],u,s);o=!0}else i.registrationName?(m(i.registrationName,u,s),o=!0):o=!1;o||a("98",r,e)}}}function m(e,t,n){b[e]&&a("100",e),b[e]=t,x[e]=t.eventTypes[n].dependencies}var g=[],y={},b={},x={},w=null,C=null,E=null;function k(e,t,n){var r=e.type||"unknown-event";e.currentTarget=E(n),function(e,t,n,r,o,i,f,d,h){if(p.apply(this,arguments),u){if(u){var v=s;u=!1,s=null}else a("198"),v=void 0;c||(c=!0,l=v)}}(r,t,void 0,e),e.currentTarget=null}function _(e,t){return null==t&&a("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function S(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var O=null;function T(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)k(e,t[r],n[r]);else t&&k(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var R={injectEventPluginOrder:function(e){d&&a("101"),d=Array.prototype.slice.call(e),v()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];h.hasOwnProperty(t)&&h[t]===r||(h[t]&&a("102",t),h[t]=r,n=!0)}n&&v()}};function I(e,t){var n=e.stateNode;if(!n)return null;var r=w(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&a("231",t,typeof n),n)}function A(e){if(null!==e&&(O=_(O,e)),e=O,O=null,e&&(S(e,T),O&&a("95"),c))throw e=l,c=!1,l=null,e}var N=Math.random().toString(36).slice(2),D="__reactInternalInstance$"+N,P="__reactEventHandlers$"+N;function M(e){if(e[D])return e[D];for(;!e[D];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[D]).tag||6===e.tag?e:null}function F(e){return!(e=e[D])||5!==e.tag&&6!==e.tag?null:e}function B(e){if(5===e.tag||6===e.tag)return e.stateNode;a("33")}function j(e){return e[P]||null}function L(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function W(e,t,n){(t=I(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=_(n._dispatchListeners,t),n._dispatchInstances=_(n._dispatchInstances,e))}function z(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=L(t);for(t=n.length;0<t--;)W(n[t],"captured",e);for(t=0;t<n.length;t++)W(n[t],"bubbled",e)}}function U(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=I(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=_(n._dispatchListeners,t),n._dispatchInstances=_(n._dispatchInstances,e))}function V(e){e&&e.dispatchConfig.registrationName&&U(e._targetInst,null,e)}function H(e){S(e,z)}var G=!("undefined"===typeof window||!window.document||!window.document.createElement);function q(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var K={animationend:q("Animation","AnimationEnd"),animationiteration:q("Animation","AnimationIteration"),animationstart:q("Animation","AnimationStart"),transitionend:q("Transition","TransitionEnd")},$={},X={};function Y(e){if($[e])return $[e];if(!K[e])return e;var t,n=K[e];for(t in n)if(n.hasOwnProperty(t)&&t in X)return $[e]=n[t];return e}G&&(X=document.createElement("div").style,"AnimationEvent"in window||(delete K.animationend.animation,delete K.animationiteration.animation,delete K.animationstart.animation),"TransitionEvent"in window||delete K.transitionend.transition);var Q=Y("animationend"),J=Y("animationiteration"),Z=Y("animationstart"),ee=Y("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ne=null,re=null,oe=null;function ie(){if(oe)return oe;var e,t,n=re,r=n.length,o="value"in ne?ne.value:ne.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return oe=o.slice(e,1<t?1-t:void 0)}function ae(){return!0}function ue(){return!1}function se(e,t,n,r){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(n):"target"===o?this.target=r:this[o]=n[o]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ae:ue,this.isPropagationStopped=ue,this}function ce(e,t,n,r){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)}function le(e){e instanceof this||a("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function fe(e){e.eventPool=[],e.getPooled=ce,e.release=le}o(se.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ae)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ae)},persist:function(){this.isPersistent=ae},isPersistent:ue,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ue,this._dispatchInstances=this._dispatchListeners=null}}),se.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},se.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return o(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=o({},r.Interface,e),n.extend=r.extend,fe(n),n},fe(se);var pe=se.extend({data:null}),de=se.extend({data:null}),he=[9,13,27,32],ve=G&&"CompositionEvent"in window,me=null;G&&"documentMode"in document&&(me=document.documentMode);var ge=G&&"TextEvent"in window&&!me,ye=G&&(!ve||me&&8<me&&11>=me),be=String.fromCharCode(32),xe={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},we=!1;function Ce(e,t){switch(e){case"keyup":return-1!==he.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Ee(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var ke=!1;var _e={eventTypes:xe,extractEvents:function(e,t,n,r){var o=void 0,i=void 0;if(ve)e:{switch(e){case"compositionstart":o=xe.compositionStart;break e;case"compositionend":o=xe.compositionEnd;break e;case"compositionupdate":o=xe.compositionUpdate;break e}o=void 0}else ke?Ce(e,n)&&(o=xe.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=xe.compositionStart);return o?(ye&&"ko"!==n.locale&&(ke||o!==xe.compositionStart?o===xe.compositionEnd&&ke&&(i=ie()):(re="value"in(ne=r)?ne.value:ne.textContent,ke=!0)),o=pe.getPooled(o,t,n,r),i?o.data=i:null!==(i=Ee(n))&&(o.data=i),H(o),i=o):i=null,(e=ge?function(e,t){switch(e){case"compositionend":return Ee(t);case"keypress":return 32!==t.which?null:(we=!0,be);case"textInput":return(e=t.data)===be&&we?null:e;default:return null}}(e,n):function(e,t){if(ke)return"compositionend"===e||!ve&&Ce(e,t)?(e=ie(),oe=re=ne=null,ke=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ye&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=de.getPooled(xe.beforeInput,t,n,r)).data=e,H(t)):t=null,null===i?t:null===t?i:[i,t]}},Se=null,Oe=null,Te=null;function Re(e){if(e=C(e)){"function"!==typeof Se&&a("280");var t=w(e.stateNode);Se(e.stateNode,e.type,t)}}function Ie(e){Oe?Te?Te.push(e):Te=[e]:Oe=e}function Ae(){if(Oe){var e=Oe,t=Te;if(Te=Oe=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function Ne(e,t){return e(t)}function De(e,t,n){return e(t,n)}function Pe(){}var Me=!1;function Fe(e,t){if(Me)return e(t);Me=!0;try{return Ne(e,t)}finally{Me=!1,(null!==Oe||null!==Te)&&(Pe(),Ae())}}var Be={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function je(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Be[e.type]:"textarea"===t}function Le(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function We(e){if(!G)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}function ze(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ue(e){e._valueTracker||(e._valueTracker=function(e){var t=ze(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ve(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ze(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var He=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;He.hasOwnProperty("ReactCurrentDispatcher")||(He.ReactCurrentDispatcher={current:null});var Ge=/^(.*)[\\\/]/,qe="function"===typeof Symbol&&Symbol.for,Ke=qe?Symbol.for("react.element"):60103,$e=qe?Symbol.for("react.portal"):60106,Xe=qe?Symbol.for("react.fragment"):60107,Ye=qe?Symbol.for("react.strict_mode"):60108,Qe=qe?Symbol.for("react.profiler"):60114,Je=qe?Symbol.for("react.provider"):60109,Ze=qe?Symbol.for("react.context"):60110,et=qe?Symbol.for("react.concurrent_mode"):60111,tt=qe?Symbol.for("react.forward_ref"):60112,nt=qe?Symbol.for("react.suspense"):60113,rt=qe?Symbol.for("react.memo"):60115,ot=qe?Symbol.for("react.lazy"):60116,it="function"===typeof Symbol&&Symbol.iterator;function at(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=it&&e[it]||e["@@iterator"])?e:null}function ut(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case et:return"ConcurrentMode";case Xe:return"Fragment";case $e:return"Portal";case Qe:return"Profiler";case Ye:return"StrictMode";case nt:return"Suspense"}if("object"===typeof e)switch(e.$$typeof){case Ze:return"Context.Consumer";case Je:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case rt:return ut(e.type);case ot:if(e=1===e._status?e._result:null)return ut(e)}return null}function st(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,o=e._debugSource,i=ut(e.type);n=null,r&&(n=ut(r.type)),r=i,i="",o?i=" (at "+o.fileName.replace(Ge,"")+":"+o.lineNumber+")":n&&(i=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+i}t+=n,e=e.return}while(e);return t}var ct=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lt=Object.prototype.hasOwnProperty,ft={},pt={};function dt(e,t,n,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ht[e]=new dt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ht[t]=new dt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ht[e]=new dt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ht[e]=new dt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ht[e]=new dt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){ht[e]=new dt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){ht[e]=new dt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){ht[e]=new dt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){ht[e]=new dt(e,5,!1,e.toLowerCase(),null)});var vt=/[\-:]([a-z])/g;function mt(e){return e[1].toUpperCase()}function gt(e,t,n,r){var o=ht.hasOwnProperty(t)?ht[t]:null;(null!==o?0===o.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!lt.call(pt,e)||!lt.call(ft,e)&&(ct.test(e)?pt[e]=!0:(ft[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function yt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var n=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function xt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=yt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function wt(e,t){null!=(t=t.checked)&&gt(e,"checked",t,!1)}function Ct(e,t){wt(e,t);var n=yt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?kt(e,t.type,n):t.hasOwnProperty("defaultValue")&&kt(e,t.type,yt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Et(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function kt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vt,mt);ht[t]=new dt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vt,mt);ht[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vt,mt);ht[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(e){ht[e]=new dt(e,1,!1,e.toLowerCase(),null)});var _t={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function St(e,t,n){return(e=se.getPooled(_t.change,e,t,n)).type="change",Ie(n),H(e),e}var Ot=null,Tt=null;function Rt(e){A(e)}function It(e){if(Ve(B(e)))return e}function At(e,t){if("change"===e)return t}var Nt=!1;function Dt(){Ot&&(Ot.detachEvent("onpropertychange",Pt),Tt=Ot=null)}function Pt(e){"value"===e.propertyName&&It(Tt)&&Fe(Rt,e=St(Tt,e,Le(e)))}function Mt(e,t,n){"focus"===e?(Dt(),Tt=n,(Ot=t).attachEvent("onpropertychange",Pt)):"blur"===e&&Dt()}function Ft(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return It(Tt)}function Bt(e,t){if("click"===e)return It(t)}function jt(e,t){if("input"===e||"change"===e)return It(t)}G&&(Nt=We("input")&&(!document.documentMode||9<document.documentMode));var Lt={eventTypes:_t,_isInputEventSupported:Nt,extractEvents:function(e,t,n,r){var o=t?B(t):window,i=void 0,a=void 0,u=o.nodeName&&o.nodeName.toLowerCase();if("select"===u||"input"===u&&"file"===o.type?i=At:je(o)?Nt?i=jt:(i=Ft,a=Mt):(u=o.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(i=Bt),i&&(i=i(e,t)))return St(i,n,r);a&&a(e,o,t),"blur"===e&&(e=o._wrapperState)&&e.controlled&&"number"===o.type&&kt(o,"number",o.value)}},Wt=se.extend({view:null,detail:null}),zt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ut(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=zt[e])&&!!t[e]}function Vt(){return Ut}var Ht=0,Gt=0,qt=!1,Kt=!1,$t=Wt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Vt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ht;return Ht=e.screenX,qt?"mousemove"===e.type?e.screenX-t:0:(qt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Gt;return Gt=e.screenY,Kt?"mousemove"===e.type?e.screenY-t:0:(Kt=!0,0)}}),Xt=$t.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Yt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Qt={eventTypes:Yt,extractEvents:function(e,t,n,r){var o="mouseover"===e||"pointerover"===e,i="mouseout"===e||"pointerout"===e;if(o&&(n.relatedTarget||n.fromElement)||!i&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=t,t=(t=n.relatedTarget||n.toElement)?M(t):null):i=null,i===t)return null;var a=void 0,u=void 0,s=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(a=$t,u=Yt.mouseLeave,s=Yt.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Xt,u=Yt.pointerLeave,s=Yt.pointerEnter,c="pointer");var l=null==i?o:B(i);if(o=null==t?o:B(t),(e=a.getPooled(u,i,n,r)).type=c+"leave",e.target=l,e.relatedTarget=o,(n=a.getPooled(s,t,n,r)).type=c+"enter",n.target=o,n.relatedTarget=l,r=t,i&&r)e:{for(o=r,c=0,a=t=i;a;a=L(a))c++;for(a=0,s=o;s;s=L(s))a++;for(;0<c-a;)t=L(t),c--;for(;0<a-c;)o=L(o),a--;for(;c--;){if(t===o||t===o.alternate)break e;t=L(t),o=L(o)}t=null}else t=null;for(o=t,t=[];i&&i!==o&&(null===(c=i.alternate)||c!==o);)t.push(i),i=L(i);for(i=[];r&&r!==o&&(null===(c=r.alternate)||c!==o);)i.push(r),r=L(r);for(r=0;r<t.length;r++)U(t[r],"bubbled",e);for(r=i.length;0<r--;)U(i[r],"captured",n);return[e,n]}};function Jt(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t}var Zt=Object.prototype.hasOwnProperty;function en(e,t){if(Jt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Zt.call(t,n[r])||!Jt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(0!==(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function nn(e){2!==tn(e)&&a("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&a("188"),1===t?null:e;for(var n=e,r=t;;){var o=n.return,i=o?o.alternate:null;if(!o||!i)break;if(o.child===i.child){for(var u=o.child;u;){if(u===n)return nn(o),e;if(u===r)return nn(o),t;u=u.sibling}a("188")}if(n.return!==r.return)n=o,r=i;else{u=!1;for(var s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u){for(s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}u||a("189")}}n.alternate!==r&&a("190")}return 3!==n.tag&&a("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var on=se.extend({animationName:null,elapsedTime:null,pseudoElement:null}),an=se.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),un=Wt.extend({relatedTarget:null});function sn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ln={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn=Wt.extend({key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=sn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ln[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Vt,charCode:function(e){return"keypress"===e.type?sn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?sn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),pn=$t.extend({dataTransfer:null}),dn=Wt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Vt}),hn=se.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),vn=$t.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),mn=[["abort","abort"],[Q,"animationEnd"],[J,"animationIteration"],[Z,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],gn={},yn={};function bn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},gn[e]=t,yn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){bn(e,!0)}),mn.forEach(function(e){bn(e,!1)});var xn={eventTypes:gn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=yn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var o=yn[e];if(!o)return null;switch(e){case"keypress":if(0===sn(n))return null;case"keydown":case"keyup":e=fn;break;case"blur":case"focus":e=un;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=$t;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=dn;break;case Q:case J:case Z:e=on;break;case ee:e=hn;break;case"scroll":e=Wt;break;case"wheel":e=vn;break;case"copy":case"cut":case"paste":e=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Xt;break;default:e=se}return H(t=e.getPooled(o,t,n,r)),t}},wn=xn.isInteractiveTopLevelEventType,Cn=[];function En(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=3!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=M(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var o=Le(e.nativeEvent);r=e.topLevelType;for(var i=e.nativeEvent,a=null,u=0;u<g.length;u++){var s=g[u];s&&(s=s.extractEvents(r,t,i,o))&&(a=_(a,s))}A(a)}}var kn=!0;function _n(e,t){if(!t)return null;var n=(wn(e)?On:Tn).bind(null,e);t.addEventListener(e,n,!1)}function Sn(e,t){if(!t)return null;var n=(wn(e)?On:Tn).bind(null,e);t.addEventListener(e,n,!0)}function On(e,t){De(Tn,e,t)}function Tn(e,t){if(kn){var n=Le(t);if(null===(n=M(n))||"number"!==typeof n.tag||2===tn(n)||(n=null),Cn.length){var r=Cn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Fe(En,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Cn.length&&Cn.push(e)}}}var Rn={},In=0,An="_reactListenersID"+(""+Math.random()).slice(2);function Nn(e){return Object.prototype.hasOwnProperty.call(e,An)||(e[An]=In++,Rn[e[An]]={}),Rn[e[An]]}function Dn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Pn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mn(e,t){var n,r=Pn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Pn(r)}}function Fn(){for(var e=window,t=Dn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Dn((e=t.contentWindow).document)}return t}function Bn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function jn(e){var t=Fn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&Bn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=Mn(n,i);var a=Mn(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ln=G&&"documentMode"in document&&11>=document.documentMode,Wn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zn=null,Un=null,Vn=null,Hn=!1;function Gn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Hn||null==zn||zn!==Dn(n)?null:("selectionStart"in(n=zn)&&Bn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vn&&en(Vn,n)?null:(Vn=n,(e=se.getPooled(Wn.select,Un,e,t)).type="select",e.target=zn,H(e),e))}var qn={eventTypes:Wn,extractEvents:function(e,t,n,r){var o,i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(o=!i)){e:{i=Nn(i),o=x.onSelect;for(var a=0;a<o.length;a++){var u=o[a];if(!i.hasOwnProperty(u)||!i[u]){i=!1;break e}}i=!0}o=!i}if(o)return null;switch(i=t?B(t):window,e){case"focus":(je(i)||"true"===i.contentEditable)&&(zn=i,Un=t,Vn=null);break;case"blur":Vn=Un=zn=null;break;case"mousedown":Hn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Hn=!1,Gn(n,r);case"selectionchange":if(Ln)break;case"keydown":case"keyup":return Gn(n,r)}return null}};function Kn(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function $n(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Xn(e,t){return null!=t.dangerouslySetInnerHTML&&a("91"),o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&a("92"),Array.isArray(t)&&(1>=t.length||a("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:yt(n)}}function Qn(e,t){var n=yt(t.value),r=yt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Jn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}R.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=j,C=F,E=B,R.injectEventPluginsByName({SimpleEventPlugin:xn,EnterLeaveEventPlugin:Qt,ChangeEventPlugin:Lt,SelectEventPlugin:qn,BeforeInputEventPlugin:_e});var Zn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function er(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?er(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var nr,rr=void 0,or=(nr=function(e,t){if(e.namespaceURI!==Zn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rr=rr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=rr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return nr(e,t)})}:nr);function ir(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ar={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ur=["Webkit","ms","Moz","O"];function sr(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ar.hasOwnProperty(e)&&ar[e]?(""+t).trim():t+"px"}function cr(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=sr(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ar).forEach(function(e){ur.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ar[t]=ar[e]})});var lr=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(e,t){t&&(lr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&a("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&a("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||a("61")),null!=t.style&&"object"!==typeof t.style&&a("62",""))}function pr(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function dr(e,t){var n=Nn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=x[t];for(var r=0;r<t.length;r++){var o=t[r];if(!n.hasOwnProperty(o)||!n[o]){switch(o){case"scroll":Sn("scroll",e);break;case"focus":case"blur":Sn("focus",e),Sn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":We(o)&&Sn(o,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(o)&&_n(o,e)}n[o]=!0}}}function hr(){}var vr=null,mr=null;function gr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function yr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var br="function"===typeof setTimeout?setTimeout:void 0,xr="function"===typeof clearTimeout?clearTimeout:void 0,wr=i.unstable_scheduleCallback,Cr=i.unstable_cancelCallback;function Er(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function kr(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var _r=[],Sr=-1;function Or(e){0>Sr||(e.current=_r[Sr],_r[Sr]=null,Sr--)}function Tr(e,t){_r[++Sr]=e.current,e.current=t}var Rr={},Ir={current:Rr},Ar={current:!1},Nr=Rr;function Dr(e,t){var n=e.type.contextTypes;if(!n)return Rr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Pr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mr(e){Or(Ar),Or(Ir)}function Fr(e){Or(Ar),Or(Ir)}function Br(e,t,n){Ir.current!==Rr&&a("168"),Tr(Ir,t),Tr(Ar,n)}function jr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())i in e||a("108",ut(t)||"Unknown",i);return o({},n,r)}function Lr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||Rr,Nr=Ir.current,Tr(Ir,t),Tr(Ar,Ar.current),!0}function Wr(e,t,n){var r=e.stateNode;r||a("169"),n?(t=jr(e,t,Nr),r.__reactInternalMemoizedMergedChildContext=t,Or(Ar),Or(Ir),Tr(Ir,t)):Or(Ar),Tr(Ar,n)}var zr=null,Ur=null;function Vr(e){return function(t){try{return e(t)}catch(n){}}}function Hr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Gr(e,t,n,r){return new Hr(e,t,n,r)}function qr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Kr(e,t){var n=e.alternate;return null===n?((n=Gr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.contextDependencies=e.contextDependencies,n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $r(e,t,n,r,o,i){var u=2;if(r=e,"function"===typeof e)qr(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case Xe:return Xr(n.children,o,i,t);case et:return Yr(n,3|o,i,t);case Ye:return Yr(n,2|o,i,t);case Qe:return(e=Gr(12,n,t,4|o)).elementType=Qe,e.type=Qe,e.expirationTime=i,e;case nt:return(e=Gr(13,n,t,o)).elementType=nt,e.type=nt,e.expirationTime=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case Je:u=10;break e;case Ze:u=9;break e;case tt:u=11;break e;case rt:u=14;break e;case ot:u=16,r=null;break e}a("130",null==e?e:typeof e,"")}return(t=Gr(u,n,t,o)).elementType=e,t.type=r,t.expirationTime=i,t}function Xr(e,t,n,r){return(e=Gr(7,e,r,t)).expirationTime=n,e}function Yr(e,t,n,r){return e=Gr(8,e,r,t),t=0===(1&t)?Ye:et,e.elementType=t,e.type=t,e.expirationTime=n,e}function Qr(e,t,n){return(e=Gr(6,e,null,t)).expirationTime=n,e}function Jr(e,t,n){return(t=Gr(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),no(t,e)}function eo(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=0:r:r===t&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,r=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=t:n<t?e.earliestSuspendedTime=t:r>t&&(e.latestSuspendedTime=t),no(t,e)}function to(e,t){var n=e.earliestPendingTime;return n>t&&(t=n),(e=e.earliestSuspendedTime)>t&&(t=e),t}function no(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,o=t.earliestPendingTime,i=t.latestPingedTime;0===(o=0!==o?o:i)&&(0===e||r<e)&&(o=r),0!==(e=o)&&n>e&&(e=n),t.nextExpirationTimeToWorkOn=o,t.expirationTime=e}function ro(e,t){if(e&&e.defaultProps)for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var oo=(new r.Component).refs;function io(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:o({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var ao={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Cu(),o=Yi(r=Xa(r,e));o.payload=t,void 0!==n&&null!==n&&(o.callback=n),Va(),Ji(e,o),Ja(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Cu(),o=Yi(r=Xa(r,e));o.tag=Hi,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),Va(),Ji(e,o),Ja(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Cu(),r=Yi(n=Xa(n,e));r.tag=Gi,void 0!==t&&null!==t&&(r.callback=t),Va(),Ji(e,r),Ja(e,n)}};function uo(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(o,i))}function so(e,t,n){var r=!1,o=Rr,i=t.contextType;return"object"===typeof i&&null!==i?i=Ui(i):(o=Pr(t)?Nr:Ir.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Dr(e,o):Rr),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function co(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function lo(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=oo;var i=t.contextType;"object"===typeof i&&null!==i?o.context=Ui(i):(i=Pr(t)?Nr:Ir.current,o.context=Dr(e,i)),null!==(i=e.updateQueue)&&(na(e,i,n,o,r),o.state=e.memoizedState),"function"===typeof(i=t.getDerivedStateFromProps)&&(io(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&ao.enqueueReplaceState(o,o.state,null),null!==(i=e.updateQueue)&&(na(e,i,n,o,r),o.state=e.memoizedState)),"function"===typeof o.componentDidMount&&(e.effectTag|=4)}var fo=Array.isArray;function po(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(1!==n.tag&&a("309"),r=n.stateNode),r||a("147",e);var o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=r.refs;t===oo&&(t=r.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}"string"!==typeof e&&a("284"),n._owner||a("290",e)}return e}function ho(e,t){"textarea"!==e.type&&a("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function vo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,n){return(e=Kr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Qr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=o(t,n.props)).ref=po(e,t,n),r.return=e,r):((r=$r(n.type,n.key,n.props,null,e.mode,r)).ref=po(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Jr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Xr(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Ke:return(n=$r(t.type,t.key,t.props,null,e.mode,n)).ref=po(e,null,t),n.return=e,n;case $e:return(t=Jr(t,e.mode,n)).return=e,t}if(fo(t)||at(t))return(t=Xr(t,e.mode,n,null)).return=e,t;ho(e,t)}return null}function d(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==o?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Ke:return n.key===o?n.type===Xe?f(e,t,n.props.children,r,o):c(e,t,n,r):null;case $e:return n.key===o?l(e,t,n,r):null}if(fo(n)||at(n))return null!==o?null:f(e,t,n,r,null);ho(e,n)}return null}function h(e,t,n,r,o){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Ke:return e=e.get(null===r.key?n:r.key)||null,r.type===Xe?f(t,e,r.props.children,o,r.key):c(t,e,r,o);case $e:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o)}if(fo(r)||at(r))return f(t,e=e.get(n)||null,r,o,null);ho(t,r)}return null}function v(o,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=d(o,f,u[v],s);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(o,f),a=i(g,a,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===u.length)return n(o,f),c;if(null===f){for(;v<u.length;v++)(f=p(o,u[v],s))&&(a=i(f,a,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(o,f);v<u.length;v++)(m=h(f,o,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=i(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach(function(e){return t(o,e)}),c}function m(o,u,s,c){var l=at(s);"function"!==typeof l&&a("150"),null==(s=l.call(s))&&a("151");for(var f=l=null,v=u,m=u=0,g=null,y=s.next();null!==v&&!y.done;m++,y=s.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=d(o,v,y.value,c);if(null===b){v||(v=g);break}e&&v&&null===b.alternate&&t(o,v),u=i(b,u,m),null===f?l=b:f.sibling=b,f=b,v=g}if(y.done)return n(o,v),l;if(null===v){for(;!y.done;m++,y=s.next())null!==(y=p(o,y.value,c))&&(u=i(y,u,m),null===f?l=y:f.sibling=y,f=y);return l}for(v=r(o,v);!y.done;m++,y=s.next())null!==(y=h(v,o,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),u=i(y,u,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach(function(e){return t(o,e)}),l}return function(e,r,i,s){var c="object"===typeof i&&null!==i&&i.type===Xe&&null===i.key;c&&(i=i.props.children);var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case Ke:e:{for(l=i.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?i.type===Xe:c.elementType===i.type){n(e,c.sibling),(r=o(c,i.type===Xe?i.props.children:i.props)).ref=po(e,c,i),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}i.type===Xe?((r=Xr(i.props.children,e.mode,s,i.key)).return=e,e=r):((s=$r(i.type,i.key,i.props,null,e.mode,s)).ref=po(e,r,i),s.return=e,e=s)}return u(e);case $e:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=o(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Jr(i,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=o(r,i)).return=e,e=r):(n(e,r),(r=Qr(i,e.mode,s)).return=e,e=r),u(e);if(fo(i))return v(e,r,i,s);if(at(i))return m(e,r,i,s);if(l&&ho(e,i),"undefined"===typeof i&&!c)switch(e.tag){case 1:case 0:a("152",(s=e.type).displayName||s.name||"Component")}return n(e,r)}}var mo=vo(!0),go=vo(!1),yo={},bo={current:yo},xo={current:yo},wo={current:yo};function Co(e){return e===yo&&a("174"),e}function Eo(e,t){Tr(wo,t),Tr(xo,e),Tr(bo,yo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:tr(null,"");break;default:t=tr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}Or(bo),Tr(bo,t)}function ko(e){Or(bo),Or(xo),Or(wo)}function _o(e){Co(wo.current);var t=Co(bo.current),n=tr(t,e.type);t!==n&&(Tr(xo,e),Tr(bo,n))}function So(e){xo.current===e&&(Or(bo),Or(xo))}var Oo=0,To=2,Ro=4,Io=8,Ao=16,No=32,Do=64,Po=128,Mo=He.ReactCurrentDispatcher,Fo=0,Bo=null,jo=null,Lo=null,Wo=null,zo=null,Uo=null,Vo=0,Ho=null,Go=0,qo=!1,Ko=null,$o=0;function Xo(){a("321")}function Yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jt(e[n],t[n]))return!1;return!0}function Qo(e,t,n,r,o,i){if(Fo=i,Bo=t,Lo=null!==e?e.memoizedState:null,Mo.current=null===Lo?li:fi,t=n(r,o),qo){do{qo=!1,$o+=1,Lo=null!==e?e.memoizedState:null,Uo=Wo,Ho=zo=jo=null,Mo.current=fi,t=n(r,o)}while(qo);Ko=null,$o=0}return Mo.current=ci,(e=Bo).memoizedState=Wo,e.expirationTime=Vo,e.updateQueue=Ho,e.effectTag|=Go,e=null!==jo&&null!==jo.next,Fo=0,Uo=zo=Wo=Lo=jo=Bo=null,Vo=0,Ho=null,Go=0,e&&a("300"),t}function Jo(){Mo.current=ci,Fo=0,Uo=zo=Wo=Lo=jo=Bo=null,Vo=0,Ho=null,Go=0,qo=!1,Ko=null,$o=0}function Zo(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===zo?Wo=zo=e:zo=zo.next=e,zo}function ei(){if(null!==Uo)Uo=(zo=Uo).next,Lo=null!==(jo=Lo)?jo.next:null;else{null===Lo&&a("310");var e={memoizedState:(jo=Lo).memoizedState,baseState:jo.baseState,queue:jo.queue,baseUpdate:jo.baseUpdate,next:null};zo=null===zo?Wo=e:zo.next=e,Lo=jo.next}return zo}function ti(e,t){return"function"===typeof t?t(e):t}function ni(e){var t=ei(),n=t.queue;if(null===n&&a("311"),n.lastRenderedReducer=e,0<$o){var r=n.dispatch;if(null!==Ko){var o=Ko.get(n);if(void 0!==o){Ko.delete(n);var i=t.memoizedState;do{i=e(i,o.action),o=o.next}while(null!==o);return Jt(i,t.memoizedState)||(Ci=!0),t.memoizedState=i,t.baseUpdate===n.last&&(t.baseState=i),n.lastRenderedState=i,[i,r]}}return[t.memoizedState,r]}r=n.last;var u=t.baseUpdate;if(i=t.baseState,null!==u?(null!==r&&(r.next=null),r=u.next):r=null!==r?r.next:null,null!==r){var s=o=null,c=r,l=!1;do{var f=c.expirationTime;f<Fo?(l||(l=!0,s=u,o=i),f>Vo&&(Vo=f)):i=c.eagerReducer===e?c.eagerState:e(i,c.action),u=c,c=c.next}while(null!==c&&c!==r);l||(s=u,o=i),Jt(i,t.memoizedState)||(Ci=!0),t.memoizedState=i,t.baseUpdate=s,t.baseState=o,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function ri(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===Ho?(Ho={lastEffect:null}).lastEffect=e.next=e:null===(t=Ho.lastEffect)?Ho.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,Ho.lastEffect=e),e}function oi(e,t,n,r){var o=Zo();Go|=e,o.memoizedState=ri(t,n,void 0,void 0===r?null:r)}function ii(e,t,n,r){var o=ei();r=void 0===r?null:r;var i=void 0;if(null!==jo){var a=jo.memoizedState;if(i=a.destroy,null!==r&&Yo(r,a.deps))return void ri(Oo,n,i,r)}Go|=e,o.memoizedState=ri(t,n,i,r)}function ai(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ui(){}function si(e,t,n){25>$o||a("301");var r=e.alternate;if(e===Bo||null!==r&&r===Bo)if(qo=!0,e={expirationTime:Fo,action:n,eagerReducer:null,eagerState:null,next:null},null===Ko&&(Ko=new Map),void 0===(n=Ko.get(t)))Ko.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{Va();var o=Cu(),i={expirationTime:o=Xa(o,e),action:n,eagerReducer:null,eagerState:null,next:null},u=t.last;if(null===u)i.next=i;else{var s=u.next;null!==s&&(i.next=s),u.next=i}if(t.last=i,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(i.eagerReducer=r,i.eagerState=l,Jt(l,c))return}catch(f){}Ja(e,o)}}var ci={readContext:Ui,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo},li={readContext:Ui,useCallback:function(e,t){return Zo().memoizedState=[e,void 0===t?null:t],e},useContext:Ui,useEffect:function(e,t){return oi(516,Po|Do,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,oi(4,Ro|No,ai.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oi(4,Ro|No,e,t)},useMemo:function(e,t){var n=Zo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Zo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=si.bind(null,Bo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Zo().memoizedState=e},useState:function(e){var t=Zo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:ti,lastRenderedState:e}).dispatch=si.bind(null,Bo,e),[t.memoizedState,e]},useDebugValue:ui},fi={readContext:Ui,useCallback:function(e,t){var n=ei();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)},useContext:Ui,useEffect:function(e,t){return ii(516,Po|Do,e,t)},useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ii(4,Ro|No,ai.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ii(4,Ro|No,e,t)},useMemo:function(e,t){var n=ei();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ni,useRef:function(){return ei().memoizedState},useState:function(e){return ni(ti)},useDebugValue:ui},pi=null,di=null,hi=!1;function vi(e,t){var n=Gr(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function mi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function gi(e){if(hi){var t=di;if(t){var n=t;if(!mi(e,t)){if(!(t=Er(n))||!mi(e,t))return e.effectTag|=2,hi=!1,void(pi=e);vi(pi,n)}pi=e,di=kr(t)}else e.effectTag|=2,hi=!1,pi=e}}function yi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&18!==e.tag;)e=e.return;pi=e}function bi(e){if(e!==pi)return!1;if(!hi)return yi(e),hi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!yr(t,e.memoizedProps))for(t=di;t;)vi(e,t),t=Er(t);return yi(e),di=pi?Er(e.stateNode):null,!0}function xi(){di=pi=null,hi=!1}var wi=He.ReactCurrentOwner,Ci=!1;function Ei(e,t,n,r){t.child=null===e?go(t,null,n,r):mo(t,e.child,n,r)}function ki(e,t,n,r,o){n=n.render;var i=t.ref;return zi(t,o),r=Qo(e,t,n,r,i,o),null===e||Ci?(t.effectTag|=1,Ei(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),Di(e,t,o))}function _i(e,t,n,r,o,i){if(null===e){var a=n.type;return"function"!==typeof a||qr(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=$r(n.type,null,r,null,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Si(e,t,a,r,o,i))}return a=e.child,o<i&&(o=a.memoizedProps,(n=null!==(n=n.compare)?n:en)(o,r)&&e.ref===t.ref)?Di(e,t,i):(t.effectTag|=1,(e=Kr(a,r)).ref=t.ref,e.return=t,t.child=e)}function Si(e,t,n,r,o,i){return null!==e&&en(e.memoizedProps,r)&&e.ref===t.ref&&(Ci=!1,o<i)?Di(e,t,i):Ti(e,t,n,r,i)}function Oi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ti(e,t,n,r,o){var i=Pr(n)?Nr:Ir.current;return i=Dr(t,i),zi(t,o),n=Qo(e,t,n,r,i,o),null===e||Ci?(t.effectTag|=1,Ei(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),Di(e,t,o))}function Ri(e,t,n,r,o){if(Pr(n)){var i=!0;Lr(t)}else i=!1;if(zi(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),so(t,n,r),lo(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,u=t.memoizedProps;a.props=u;var s=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ui(c):c=Dr(t,c=Pr(n)?Nr:Ir.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==r||s!==c)&&co(t,a,r,c),Ki=!1;var p=t.memoizedState;s=a.state=p;var d=t.updateQueue;null!==d&&(na(t,d,r,a,o),s=t.memoizedState),u!==r||p!==s||Ar.current||Ki?("function"===typeof l&&(io(t,n,l,r),s=t.memoizedState),(u=Ki||uo(t,n,u,r,p,s,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),a.props=r,a.state=s,a.context=c,r=u):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,u=t.memoizedProps,a.props=t.type===t.elementType?u:ro(t.type,u),s=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ui(c):c=Dr(t,c=Pr(n)?Nr:Ir.current),(f="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==r||s!==c)&&co(t,a,r,c),Ki=!1,s=t.memoizedState,p=a.state=s,null!==(d=t.updateQueue)&&(na(t,d,r,a,o),p=t.memoizedState),u!==r||s!==p||Ar.current||Ki?("function"===typeof l&&(io(t,n,l,r),p=t.memoizedState),(l=Ki||uo(t,n,u,r,s,p,c))?(f||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return Ii(e,t,n,r,i,o)}function Ii(e,t,n,r,o,i){Oi(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return o&&Wr(t,n,!1),Di(e,t,i);r=t.stateNode,wi.current=t;var u=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=mo(t,e.child,null,i),t.child=mo(t,null,u,i)):Ei(e,t,u,i),t.memoizedState=r.state,o&&Wr(t,n,!0),t.child}function Ai(e){var t=e.stateNode;t.pendingContext?Br(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Br(0,t.context,!1),Eo(e,t.containerInfo)}function Ni(e,t,n){var r=t.mode,o=t.pendingProps,i=t.memoizedState;if(0===(64&t.effectTag)){i=null;var a=!1}else i={timedOutAt:null!==i?i.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var u=o.fallback;e=Xr(null,r,0,null),0===(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),r=Xr(u,r,n,null),e.sibling=r,(n=e).return=r.return=t}else n=r=go(t,null,o.children,n);else null!==e.memoizedState?(u=(r=e.child).sibling,a?(n=o.fallback,o=Kr(r,r.pendingProps),0===(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==r.child&&(o.child=a)),r=o.sibling=Kr(u,n,u.expirationTime),n=o,o.childExpirationTime=0,n.return=r.return=t):n=r=mo(t,r.child,o.children,n)):(u=e.child,a?(a=o.fallback,(o=Xr(null,r,0,null)).child=u,0===(1&t.mode)&&(o.child=null!==t.memoizedState?t.child.child:t.child),(r=o.sibling=Xr(a,r,n,null)).effectTag|=2,n=o,o.childExpirationTime=0,n.return=r.return=t):r=n=mo(t,u,o.children,n)),t.stateNode=e.stateNode;return t.memoizedState=i,t.child=n,r}function Di(e,t,n){if(null!==e&&(t.contextDependencies=e.contextDependencies),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child&&a("153"),null!==t.child){for(n=Kr(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Kr(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function Pi(e,t,n){var r=t.expirationTime;if(null!==e){if(e.memoizedProps!==t.pendingProps||Ar.current)Ci=!0;else if(r<n){switch(Ci=!1,t.tag){case 3:Ai(t),xi();break;case 5:_o(t);break;case 1:Pr(t.type)&&Lr(t);break;case 4:Eo(t,t.stateNode.containerInfo);break;case 10:Li(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ni(e,t,n):null!==(t=Di(e,t,n))?t.sibling:null}return Di(e,t,n)}}else Ci=!1;switch(t.expirationTime=0,t.tag){case 2:r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var o=Dr(t,Ir.current);if(zi(t,n),o=Qo(null,t,r,e,o,n),t.effectTag|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof){if(t.tag=1,Jo(),Pr(r)){var i=!0;Lr(t)}else i=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var u=r.getDerivedStateFromProps;"function"===typeof u&&io(t,r,u,e),o.updater=ao,t.stateNode=o,o._reactInternalFiber=t,lo(t,r,e,n),t=Ii(null,t,r,!0,i,n)}else t.tag=0,Ei(null,t,o,n),t=t.child;return t;case 16:switch(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),i=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:switch(e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._status){case 1:return e._result;case 2:throw e._result}throw e._result=t,t}}(o),t.type=e,o=t.tag=function(e){if("function"===typeof e)return qr(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===tt)return 11;if(e===rt)return 14}return 2}(e),i=ro(e,i),u=void 0,o){case 0:u=Ti(null,t,e,i,n);break;case 1:u=Ri(null,t,e,i,n);break;case 11:u=ki(null,t,e,i,n);break;case 14:u=_i(null,t,e,ro(e.type,i),r,n);break;default:a("306",e,"")}return u;case 0:return r=t.type,o=t.pendingProps,Ti(e,t,r,o=t.elementType===r?o:ro(r,o),n);case 1:return r=t.type,o=t.pendingProps,Ri(e,t,r,o=t.elementType===r?o:ro(r,o),n);case 3:return Ai(t),null===(r=t.updateQueue)&&a("282"),o=null!==(o=t.memoizedState)?o.element:null,na(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===o?(xi(),t=Di(e,t,n)):(o=t.stateNode,(o=(null===e||null===e.child)&&o.hydrate)&&(di=kr(t.stateNode.containerInfo),pi=t,o=hi=!0),o?(t.effectTag|=2,t.child=go(t,null,r,n)):(Ei(e,t,r,n),xi()),t=t.child),t;case 5:return _o(t),null===e&&gi(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,u=o.children,yr(r,o)?u=null:null!==i&&yr(r,i)&&(t.effectTag|=16),Oi(e,t),1!==n&&1&t.mode&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Ei(e,t,u,n),t=t.child),t;case 6:return null===e&&gi(t),null;case 13:return Ni(e,t,n);case 4:return Eo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=mo(t,null,r,n):Ei(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,ki(e,t,r,o=t.elementType===r?o:ro(r,o),n);case 7:return Ei(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ei(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,u=t.memoizedProps,Li(t,i=o.value),null!==u){var s=u.value;if(0===(i=Jt(s,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,i):1073741823))){if(u.children===o.children&&!Ar.current){t=Di(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.contextDependencies;if(null!==c){u=s.child;for(var l=c.first;null!==l;){if(l.context===r&&0!==(l.observedBits&i)){1===s.tag&&((l=Yi(n)).tag=Gi,Ji(s,l)),s.expirationTime<n&&(s.expirationTime=n),null!==(l=s.alternate)&&l.expirationTime<n&&(l.expirationTime=n),l=n;for(var f=s.return;null!==f;){var p=f.alternate;if(f.childExpirationTime<l)f.childExpirationTime=l,null!==p&&p.childExpirationTime<l&&(p.childExpirationTime=l);else{if(!(null!==p&&p.childExpirationTime<l))break;p.childExpirationTime=l}f=f.return}c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}}Ei(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=(i=t.pendingProps).children,zi(t,n),r=r(o=Ui(o,i.unstable_observedBits)),t.effectTag|=1,Ei(e,t,r,n),t.child;case 14:return i=ro(o=t.type,t.pendingProps),_i(e,t,o,i=ro(o.type,i),r,n);case 15:return Si(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ro(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Pr(r)?(e=!0,Lr(t)):e=!1,zi(t,n),so(t,r,o),lo(t,r,o,n),Ii(null,t,r,!0,e,n)}a("156")}var Mi={current:null},Fi=null,Bi=null,ji=null;function Li(e,t){var n=e.type._context;Tr(Mi,n._currentValue),n._currentValue=t}function Wi(e){var t=Mi.current;Or(Mi),e.type._context._currentValue=t}function zi(e,t){Fi=e,ji=Bi=null;var n=e.contextDependencies;null!==n&&n.expirationTime>=t&&(Ci=!0),e.contextDependencies=null}function Ui(e,t){return ji!==e&&!1!==t&&0!==t&&("number"===typeof t&&1073741823!==t||(ji=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Bi?(null===Fi&&a("308"),Bi=t,Fi.contextDependencies={first:t,expirationTime:0}):Bi=Bi.next=t),e._currentValue}var Vi=0,Hi=1,Gi=2,qi=3,Ki=!1;function $i(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xi(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yi(e){return{expirationTime:e,tag:Vi,payload:null,callback:null,next:null,nextEffect:null}}function Qi(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Ji(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,o=null;null===r&&(r=e.updateQueue=$i(e.memoizedState))}else r=e.updateQueue,o=n.updateQueue,null===r?null===o?(r=e.updateQueue=$i(e.memoizedState),o=n.updateQueue=$i(n.memoizedState)):r=e.updateQueue=Xi(o):null===o&&(o=n.updateQueue=Xi(r));null===o||r===o?Qi(r,t):null===r.lastUpdate||null===o.lastUpdate?(Qi(r,t),Qi(o,t)):(Qi(r,t),o.lastUpdate=t)}function Zi(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=$i(e.memoizedState):ea(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function ea(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Xi(t)),t}function ta(e,t,n,r,i,a){switch(n.tag){case Hi:return"function"===typeof(e=n.payload)?e.call(a,r,i):e;case qi:e.effectTag=-2049&e.effectTag|64;case Vi:if(null===(i="function"===typeof(e=n.payload)?e.call(a,r,i):e)||void 0===i)break;return o({},r,i);case Gi:Ki=!0}return r}function na(e,t,n,r,o){Ki=!1;for(var i=(t=ea(e,t)).baseState,a=null,u=0,s=t.firstUpdate,c=i;null!==s;){var l=s.expirationTime;l<o?(null===a&&(a=s,i=c),u<l&&(u=l)):(c=ta(e,0,s,c,n,r),null!==s.callback&&(e.effectTag|=32,s.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=s:(t.lastEffect.nextEffect=s,t.lastEffect=s))),s=s.next}for(l=null,s=t.firstCapturedUpdate;null!==s;){var f=s.expirationTime;f<o?(null===l&&(l=s,null===a&&(i=c)),u<f&&(u=f)):(c=ta(e,0,s,c,n,r),null!==s.callback&&(e.effectTag|=32,s.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=s:(t.lastCapturedEffect.nextEffect=s,t.lastCapturedEffect=s))),s=s.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(i=c),t.baseState=i,t.firstUpdate=a,t.firstCapturedUpdate=l,e.expirationTime=u,e.memoizedState=c}function ra(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),oa(t.firstEffect,n),t.firstEffect=t.lastEffect=null,oa(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function oa(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!==typeof n&&a("191",n),n.call(r)}e=e.nextEffect}}function ia(e,t){return{value:e,source:t,stack:st(t)}}function aa(e){e.effectTag|=4}var ua=void 0,sa=void 0,ca=void 0,la=void 0;ua=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},sa=function(){},ca=function(e,t,n,r,i){var a=e.memoizedProps;if(a!==r){var u=t.stateNode;switch(Co(bo.current),e=null,n){case"input":a=bt(u,a),r=bt(u,r),e=[];break;case"option":a=Kn(u,a),r=Kn(u,r),e=[];break;case"select":a=o({},a,{value:void 0}),r=o({},r,{value:void 0}),e=[];break;case"textarea":a=Xn(u,a),r=Xn(u,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(u.onclick=hr)}fr(n,r),u=n=void 0;var s=null;for(n in a)if(!r.hasOwnProperty(n)&&a.hasOwnProperty(n)&&null!=a[n])if("style"===n){var c=a[n];for(u in c)c.hasOwnProperty(u)&&(s||(s={}),s[u]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var l=r[n];if(c=null!=a?a[n]:void 0,r.hasOwnProperty(n)&&l!==c&&(null!=l||null!=c))if("style"===n)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(s||(s={}),s[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(s||(s={}),s[u]=l[u])}else s||(e||(e=[]),e.push(n,s)),s=l;else"dangerouslySetInnerHTML"===n?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(n,""+l)):"children"===n?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(n,""+l):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=l&&dr(i,n),e||c===l||(e=[])):(e=e||[]).push(n,l))}s&&(e=e||[]).push("style",s),i=e,(t.updateQueue=i)&&aa(t)}},la=function(e,t,n,r){n!==r&&aa(t)};var fa="function"===typeof WeakSet?WeakSet:Set;function pa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=st(n)),null!==n&&ut(n.type),t=t.value,null!==e&&1===e.tag&&ut(e.type);try{console.error(t)}catch(o){setTimeout(function(){throw o})}}function da(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){$a(e,n)}else t.current=null}function ha(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if((r.tag&e)!==Oo){var o=r.destroy;r.destroy=void 0,void 0!==o&&o()}(r.tag&t)!==Oo&&(o=r.create,r.destroy=o()),r=r.next}while(r!==n)}}function va(e){switch("function"===typeof Ur&&Ur(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n.destroy;if(void 0!==r){var o=e;try{r()}catch(i){$a(o,i)}}n=n.next}while(n!==t)}break;case 1:if(da(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(i){$a(e,i)}break;case 5:da(e);break;case 4:ya(e)}}function ma(e){return 5===e.tag||3===e.tag||4===e.tag}function ga(e){e:{for(var t=e.return;null!==t;){if(ma(t)){var n=t;break e}t=t.return}a("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:a("161")}16&n.effectTag&&(ir(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ma(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(n)if(r){var i=t,u=o.stateNode,s=n;8===i.nodeType?i.parentNode.insertBefore(u,s):i.insertBefore(u,s)}else t.insertBefore(o.stateNode,n);else r?(u=t,s=o.stateNode,8===u.nodeType?(i=u.parentNode).insertBefore(s,u):(i=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==i.onclick||(i.onclick=hr)):t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function ya(e){for(var t=e,n=!1,r=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&a("160"),n.tag){case 5:r=n.stateNode,o=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var i=t,u=i;;)if(va(u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===i)break;for(;null===u.sibling;){if(null===u.return||u.return===i)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}o?(i=r,u=t.stateNode,8===i.nodeType?i.parentNode.removeChild(u):i.removeChild(u)):r.removeChild(t.stateNode)}else if(4===t.tag){if(null!==t.child){r=t.stateNode.containerInfo,o=!0,t.child.return=t,t=t.child;continue}}else if(va(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function ba(e,t){switch(t.tag){case 0:case 11:case 14:case 15:ha(Ro,Io,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var o=t.type,i=t.updateQueue;t.updateQueue=null,null!==i&&function(e,t,n,r,o){e[P]=o,"input"===n&&"radio"===o.type&&null!=o.name&&wt(e,o),pr(n,r),r=pr(n,o);for(var i=0;i<t.length;i+=2){var a=t[i],u=t[i+1];"style"===a?cr(e,u):"dangerouslySetInnerHTML"===a?or(e,u):"children"===a?ir(e,u):gt(e,a,u,r)}switch(n){case"input":Ct(e,o);break;case"textarea":Qn(e,o);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!o.multiple,null!=(n=o.value)?$n(e,!!o.multiple,n,!1):t!==!!o.multiple&&(null!=o.defaultValue?$n(e,!!o.multiple,o.defaultValue,!0):$n(e,!!o.multiple,o.multiple?[]:"",!1))}}(n,i,o,e,r)}break;case 6:null===t.stateNode&&a("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(n=t.memoizedState,r=void 0,e=t,null===n?r=!1:(r=!0,e=t.child,0===n.timedOutAt&&(n.timedOutAt=Cu())),null!==e&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)r.style.display="none";else{r=n.stateNode;var o=n.memoizedProps.style;o=void 0!==o&&null!==o&&o.hasOwnProperty("display")?o.display:null,r.style.display=sr("display",o)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else{if(13===n.tag&&null!==n.memoizedState){(r=n.child.sibling).return=n,n=r;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(e,r),null!==(n=t.updateQueue)){t.updateQueue=null;var u=t.stateNode;null===u&&(u=t.stateNode=new fa),n.forEach(function(e){var n=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),t=Xa(t=Cu(),e),null!==(e=Qa(e,t))&&(Zr(e,t),0!==(t=e.expirationTime)&&Eu(e,t))}.bind(null,t,e);u.has(e)||(u.add(e),e.then(n,n))})}break;case 17:break;default:a("163")}}var xa="function"===typeof WeakMap?WeakMap:Map;function wa(e,t,n){(n=Yi(n)).tag=qi,n.payload={element:null};var r=t.value;return n.callback=function(){Nu(r),pa(e,t)},n}function Ca(e,t,n){(n=Yi(n)).tag=qi;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===ja?ja=new Set([this]):ja.add(this));var n=t.value,o=t.stack;pa(e,t),this.componentDidCatch(n,{componentStack:null!==o?o:""})}),n}function Ea(e){switch(e.tag){case 1:Pr(e.type)&&Mr();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return ko(),Fr(),0!==(64&(t=e.effectTag))&&a("285"),e.effectTag=-2049&t|64,e;case 5:return So(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 18:return null;case 4:return ko(),null;case 10:return Wi(e),null;default:return null}}var ka=He.ReactCurrentDispatcher,_a=He.ReactCurrentOwner,Sa=1073741822,Oa=!1,Ta=null,Ra=null,Ia=0,Aa=-1,Na=!1,Da=null,Pa=!1,Ma=null,Fa=null,Ba=null,ja=null;function La(){if(null!==Ta)for(var e=Ta.return;null!==e;){var t=e;switch(t.tag){case 1:var n=t.type.childContextTypes;null!==n&&void 0!==n&&Mr();break;case 3:ko(),Fr();break;case 5:So(t);break;case 4:ko();break;case 10:Wi(t)}e=e.return}Ra=null,Ia=0,Aa=-1,Na=!1,Ta=null}function Wa(){for(;null!==Da;){var e=Da.effectTag;if(16&e&&ir(Da.stateNode,""),128&e){var t=Da.alternate;null!==t&&(null!==(t=t.ref)&&("function"===typeof t?t(null):t.current=null))}switch(14&e){case 2:ga(Da),Da.effectTag&=-3;break;case 6:ga(Da),Da.effectTag&=-3,ba(Da.alternate,Da);break;case 4:ba(Da.alternate,Da);break;case 8:ya(e=Da),e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,null!==(e=e.alternate)&&(e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null)}Da=Da.nextEffect}}function za(){for(;null!==Da;){if(256&Da.effectTag)e:{var e=Da.alternate,t=Da;switch(t.tag){case 0:case 11:case 15:ha(To,Oo,t);break e;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ro(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break e;case 3:case 5:case 6:case 4:case 17:break e;default:a("163")}}Da=Da.nextEffect}}function Ua(e,t){for(;null!==Da;){var n=Da.effectTag;if(36&n){var r=Da.alternate,o=Da,i=t;switch(o.tag){case 0:case 11:case 15:ha(Ao,No,o);break;case 1:var u=o.stateNode;if(4&o.effectTag)if(null===r)u.componentDidMount();else{var s=o.elementType===o.type?r.memoizedProps:ro(o.type,r.memoizedProps);u.componentDidUpdate(s,r.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}null!==(r=o.updateQueue)&&ra(0,r,u);break;case 3:if(null!==(r=o.updateQueue)){if(u=null,null!==o.child)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}ra(0,r,u)}break;case 5:i=o.stateNode,null===r&&4&o.effectTag&&gr(o.type,o.memoizedProps)&&i.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}128&n&&(null!==(o=Da.ref)&&(i=Da.stateNode,"function"===typeof o?o(i):o.current=i)),512&n&&(Ma=e),Da=Da.nextEffect}}function Va(){null!==Fa&&Cr(Fa),null!==Ba&&Ba()}function Ha(e,t){Pa=Oa=!0,e.current===t&&a("177");var n=e.pendingCommitExpirationTime;0===n&&a("261"),e.pendingCommitExpirationTime=0;var r=t.expirationTime,o=t.childExpirationTime;for(function(e,t){if(e.didError=!1,0===t)e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0;else{t<e.latestPingedTime&&(e.latestPingedTime=0);var n=e.latestPendingTime;0!==n&&(n>t?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>t&&(e.earliestPendingTime=e.latestPendingTime)),0===(n=e.earliestSuspendedTime)?Zr(e,t):t<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Zr(e,t)):t>n&&Zr(e,t)}no(0,e)}(e,o>r?o:r),_a.current=null,r=void 0,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,vr=kn,mr=function(){var e=Fn();if(Bn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{t.nodeType,o.nodeType}catch(d){t=null;break e}var i=0,a=-1,u=-1,s=0,c=0,l=e,f=null;t:for(;;){for(var p;l!==t||0!==r&&3!==l.nodeType||(a=i+r),l!==o||0!==n&&3!==l.nodeType||(u=i+n),3===l.nodeType&&(i+=l.nodeValue.length),null!==(p=l.firstChild);)f=l,l=p;for(;;){if(l===e)break t;if(f===t&&++s===r&&(a=i),f===o&&++c===n&&(u=i),null!==(p=l.nextSibling))break;f=(l=f).parentNode}l=p}t=-1===a||-1===u?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;return{focusedElem:e,selectionRange:t}}(),kn=!1,Da=r;null!==Da;){o=!1;var u=void 0;try{za()}catch(c){o=!0,u=c}o&&(null===Da&&a("178"),$a(Da,u),null!==Da&&(Da=Da.nextEffect))}for(Da=r;null!==Da;){o=!1,u=void 0;try{Wa()}catch(c){o=!0,u=c}o&&(null===Da&&a("178"),$a(Da,u),null!==Da&&(Da=Da.nextEffect))}for(jn(mr),mr=null,kn=!!vr,vr=null,e.current=t,Da=r;null!==Da;){o=!1,u=void 0;try{Ua(e,n)}catch(c){o=!0,u=c}o&&(null===Da&&a("178"),$a(Da,u),null!==Da&&(Da=Da.nextEffect))}if(null!==r&&null!==Ma){var s=function(e,t){Ba=Fa=Ma=null;var n=ou;ou=!0;do{if(512&t.effectTag){var r=!1,o=void 0;try{var i=t;ha(Po,Oo,i),ha(Oo,Do,i)}catch(s){r=!0,o=s}r&&$a(t,o)}t=t.nextEffect}while(null!==t);ou=n,0!==(n=e.expirationTime)&&Eu(e,n),lu||ou||Tu(1073741823,!1)}.bind(null,e,r);Fa=i.unstable_runWithPriority(i.unstable_NormalPriority,function(){return wr(s)}),Ba=s}Oa=Pa=!1,"function"===typeof zr&&zr(t.stateNode),n=t.expirationTime,0===(t=(t=t.childExpirationTime)>n?t:n)&&(ja=null),function(e,t){e.expirationTime=t,e.finishedWork=null}(e,t)}function Ga(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0===(1024&e.effectTag)){Ta=e;e:{var i=t,u=Ia,s=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Pr(t.type)&&Mr();break;case 3:ko(),Fr(),(s=t.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==i&&null!==i.child||(bi(t),t.effectTag&=-3),sa(t);break;case 5:So(t);var c=Co(wo.current);if(u=t.type,null!==i&&null!=t.stateNode)ca(i,t,u,s,c),i.ref!==t.ref&&(t.effectTag|=128);else if(s){var l=Co(bo.current);if(bi(t)){i=(s=t).stateNode;var f=s.type,p=s.memoizedProps,d=c;switch(i[D]=s,i[P]=p,u=void 0,c=f){case"iframe":case"object":_n("load",i);break;case"video":case"audio":for(f=0;f<te.length;f++)_n(te[f],i);break;case"source":_n("error",i);break;case"img":case"image":case"link":_n("error",i),_n("load",i);break;case"form":_n("reset",i),_n("submit",i);break;case"details":_n("toggle",i);break;case"input":xt(i,p),_n("invalid",i),dr(d,"onChange");break;case"select":i._wrapperState={wasMultiple:!!p.multiple},_n("invalid",i),dr(d,"onChange");break;case"textarea":Yn(i,p),_n("invalid",i),dr(d,"onChange")}for(u in fr(c,p),f=null,p)p.hasOwnProperty(u)&&(l=p[u],"children"===u?"string"===typeof l?i.textContent!==l&&(f=["children",l]):"number"===typeof l&&i.textContent!==""+l&&(f=["children",""+l]):b.hasOwnProperty(u)&&null!=l&&dr(d,u));switch(c){case"input":Ue(i),Et(i,p,!0);break;case"textarea":Ue(i),Jn(i);break;case"select":case"option":break;default:"function"===typeof p.onClick&&(i.onclick=hr)}u=f,s.updateQueue=u,(s=null!==u)&&aa(t)}else{p=t,d=u,i=s,f=9===c.nodeType?c:c.ownerDocument,l===Zn.html&&(l=er(d)),l===Zn.html?"script"===d?((i=f.createElement("div")).innerHTML="<script><\/script>",f=i.removeChild(i.firstChild)):"string"===typeof i.is?f=f.createElement(d,{is:i.is}):(f=f.createElement(d),"select"===d&&(d=f,i.multiple?d.multiple=!0:i.size&&(d.size=i.size))):f=f.createElementNS(l,d),(i=f)[D]=p,i[P]=s,ua(i,t,!1,!1),d=i;var h=c,v=pr(f=u,p=s);switch(f){case"iframe":case"object":_n("load",d),c=p;break;case"video":case"audio":for(c=0;c<te.length;c++)_n(te[c],d);c=p;break;case"source":_n("error",d),c=p;break;case"img":case"image":case"link":_n("error",d),_n("load",d),c=p;break;case"form":_n("reset",d),_n("submit",d),c=p;break;case"details":_n("toggle",d),c=p;break;case"input":xt(d,p),c=bt(d,p),_n("invalid",d),dr(h,"onChange");break;case"option":c=Kn(d,p);break;case"select":d._wrapperState={wasMultiple:!!p.multiple},c=o({},p,{value:void 0}),_n("invalid",d),dr(h,"onChange");break;case"textarea":Yn(d,p),c=Xn(d,p),_n("invalid",d),dr(h,"onChange");break;default:c=p}fr(f,c),l=void 0;var m=f,g=d,y=c;for(l in y)if(y.hasOwnProperty(l)){var x=y[l];"style"===l?cr(g,x):"dangerouslySetInnerHTML"===l?null!=(x=x?x.__html:void 0)&&or(g,x):"children"===l?"string"===typeof x?("textarea"!==m||""!==x)&&ir(g,x):"number"===typeof x&&ir(g,""+x):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(b.hasOwnProperty(l)?null!=x&&dr(h,l):null!=x&&gt(g,l,x,v))}switch(f){case"input":Ue(d),Et(d,p,!1);break;case"textarea":Ue(d),Jn(d);break;case"option":null!=p.value&&d.setAttribute("value",""+yt(p.value));break;case"select":(c=d).multiple=!!p.multiple,null!=(d=p.value)?$n(c,!!p.multiple,d,!1):null!=p.defaultValue&&$n(c,!!p.multiple,p.defaultValue,!0);break;default:"function"===typeof c.onClick&&(d.onclick=hr)}(s=gr(u,s))&&aa(t),t.stateNode=i}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&a("166");break;case 6:i&&null!=t.stateNode?la(i,t,i.memoizedProps,s):("string"!==typeof s&&(null===t.stateNode&&a("166")),i=Co(wo.current),Co(bo.current),bi(t)?(u=(s=t).stateNode,i=s.memoizedProps,u[D]=s,(s=u.nodeValue!==i)&&aa(t)):(u=t,(s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[D]=t,u.stateNode=s));break;case 11:break;case 13:if(s=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=u,Ta=t;break e}s=null!==s,u=null!==i&&null!==i.memoizedState,null!==i&&!s&&u&&(null!==(i=i.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=i,i.nextEffect=c):(t.firstEffect=t.lastEffect=i,i.nextEffect=null),i.effectTag=8)),(s||u)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:ko(),sa(t);break;case 10:Wi(t);break;case 9:case 14:break;case 17:Pr(t.type)&&Mr();break;case 18:break;default:a("156")}Ta=null}if(t=e,1===Ia||1!==t.childExpirationTime){for(s=0,u=t.child;null!==u;)(i=u.expirationTime)>s&&(s=i),(c=u.childExpirationTime)>s&&(s=c),u=u.sibling;t.childExpirationTime=s}if(null!==Ta)return Ta;null!==n&&0===(1024&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=Ea(e)))return e.effectTag&=1023,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=1024)}if(null!==r)return r;if(null===n)break;e=n}return null}function qa(e){var t=Pi(e.alternate,e,Ia);return e.memoizedProps=e.pendingProps,null===t&&(t=Ga(e)),_a.current=null,t}function Ka(e,t){Oa&&a("243"),Va(),Oa=!0;var n=ka.current;ka.current=ci;var r=e.nextExpirationTimeToWorkOn;r===Ia&&e===Ra&&null!==Ta||(La(),Ia=r,Ta=Kr((Ra=e).current,null),e.pendingCommitExpirationTime=0);for(var o=!1;;){try{if(t)for(;null!==Ta&&!Su();)Ta=qa(Ta);else for(;null!==Ta;)Ta=qa(Ta)}catch(g){if(ji=Bi=Fi=null,Jo(),null===Ta)o=!0,Nu(g);else{null===Ta&&a("271");var i=Ta,u=i.return;if(null!==u){e:{var s=e,c=u,l=i,f=g;if(u=Ia,l.effectTag|=1024,l.firstEffect=l.lastEffect=null,null!==f&&"object"===typeof f&&"function"===typeof f.then){var p=f;f=c;var d=-1,h=-1;do{if(13===f.tag){var v=f.alternate;if(null!==v&&null!==(v=v.memoizedState)){h=10*(1073741822-v.timedOutAt);break}"number"===typeof(v=f.pendingProps.maxDuration)&&(0>=v?d=0:(-1===d||v<d)&&(d=v))}f=f.return}while(null!==f);f=c;do{if((v=13===f.tag)&&(v=void 0!==f.memoizedProps.fallback&&null===f.memoizedState),v){if(null===(c=f.updateQueue)?((c=new Set).add(p),f.updateQueue=c):c.add(p),0===(1&f.mode)){f.effectTag|=64,l.effectTag&=-1957,1===l.tag&&(null===l.alternate?l.tag=17:((u=Yi(1073741823)).tag=Gi,Ji(l,u))),l.expirationTime=1073741823;break e}c=u;var m=(l=s).pingCache;null===m?(m=l.pingCache=new xa,v=new Set,m.set(p,v)):void 0===(v=m.get(p))&&(v=new Set,m.set(p,v)),v.has(c)||(v.add(c),l=Ya.bind(null,l,p,c),p.then(l,l)),-1===d?s=1073741823:(-1===h&&(h=10*(1073741822-to(s,u))-5e3),s=h+d),0<=s&&Aa<s&&(Aa=s),f.effectTag|=2048,f.expirationTime=u;break e}f=f.return}while(null!==f);f=Error((ut(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+st(l))}Na=!0,f=ia(f,l),s=c;do{switch(s.tag){case 3:s.effectTag|=2048,s.expirationTime=u,Zi(s,u=wa(s,f,u));break e;case 1:if(d=f,h=s.type,l=s.stateNode,0===(64&s.effectTag)&&("function"===typeof h.getDerivedStateFromError||null!==l&&"function"===typeof l.componentDidCatch&&(null===ja||!ja.has(l)))){s.effectTag|=2048,s.expirationTime=u,Zi(s,u=Ca(s,d,u));break e}}s=s.return}while(null!==s)}Ta=Ga(i);continue}o=!0,Nu(g)}}break}if(Oa=!1,ka.current=n,ji=Bi=Fi=null,Jo(),o)Ra=null,e.finishedWork=null;else if(null!==Ta)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&a("281"),Ra=null,Na){if(o=e.latestPendingTime,i=e.latestSuspendedTime,u=e.latestPingedTime,0!==o&&o<r||0!==i&&i<r||0!==u&&u<r)return eo(e,r),void wu(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void wu(e,n,r,t,-1)}t&&-1!==Aa?(eo(e,r),(t=10*(1073741822-to(e,r)))<Aa&&(Aa=t),t=10*(1073741822-Cu()),t=Aa-t,wu(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function $a(e,t){for(var n=e.return;null!==n;){switch(n.tag){case 1:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ja||!ja.has(r)))return Ji(n,e=Ca(n,e=ia(t,e),1073741823)),void Ja(n,1073741823);break;case 3:return Ji(n,e=wa(n,e=ia(t,e),1073741823)),void Ja(n,1073741823)}n=n.return}3===e.tag&&(Ji(e,n=wa(e,n=ia(t,e),1073741823)),Ja(e,1073741823))}function Xa(e,t){var n=i.unstable_getCurrentPriorityLevel(),r=void 0;if(0===(1&t.mode))r=1073741823;else if(Oa&&!Pa)r=Ia;else{switch(n){case i.unstable_ImmediatePriority:r=1073741823;break;case i.unstable_UserBlockingPriority:r=1073741822-10*(1+((1073741822-e+15)/10|0));break;case i.unstable_NormalPriority:r=1073741822-25*(1+((1073741822-e+500)/25|0));break;case i.unstable_LowPriority:case i.unstable_IdlePriority:r=1;break;default:a("313")}null!==Ra&&r===Ia&&--r}return n===i.unstable_UserBlockingPriority&&(0===uu||r<uu)&&(uu=r),r}function Ya(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),null!==Ra&&Ia===n?Ra=null:(t=e.earliestSuspendedTime,r=e.latestSuspendedTime,0!==t&&n<=t&&n>=r&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>n)&&(e.latestPingedTime=n),no(n,e),0!==(n=e.expirationTime)&&Eu(e,n)))}function Qa(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,o=null;if(null===r&&3===e.tag)o=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){o=r.stateNode;break}r=r.return}return o}function Ja(e,t){null!==(e=Qa(e,t))&&(!Oa&&0!==Ia&&t>Ia&&La(),Zr(e,t),Oa&&!Pa&&Ra===e||Eu(e,e.expirationTime),gu>mu&&(gu=0,a("185")))}function Za(e,t,n,r,o){return i.unstable_runWithPriority(i.unstable_ImmediatePriority,function(){return e(t,n,r,o)})}var eu=null,tu=null,nu=0,ru=void 0,ou=!1,iu=null,au=0,uu=0,su=!1,cu=null,lu=!1,fu=!1,pu=null,du=i.unstable_now(),hu=1073741822-(du/10|0),vu=hu,mu=50,gu=0,yu=null;function bu(){hu=1073741822-((i.unstable_now()-du)/10|0)}function xu(e,t){if(0!==nu){if(t<nu)return;null!==ru&&i.unstable_cancelCallback(ru)}nu=t,e=i.unstable_now()-du,ru=i.unstable_scheduleCallback(Ou,{timeout:10*(1073741822-t)-e})}function wu(e,t,n,r,o){e.expirationTime=r,0!==o||Su()?0<o&&(e.timeoutHandle=br(function(e,t,n){e.pendingCommitExpirationTime=n,e.finishedWork=t,bu(),vu=hu,Ru(e,n)}.bind(null,e,t,n),o)):(e.pendingCommitExpirationTime=n,e.finishedWork=t)}function Cu(){return ou?vu:(ku(),0!==au&&1!==au||(bu(),vu=hu),vu)}function Eu(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===tu?(eu=tu=e,e.nextScheduledRoot=e):(tu=tu.nextScheduledRoot=e).nextScheduledRoot=eu):t>e.expirationTime&&(e.expirationTime=t),ou||(lu?fu&&(iu=e,au=1073741823,Iu(e,1073741823,!1)):1073741823===t?Tu(1073741823,!1):xu(e,t))}function ku(){var e=0,t=null;if(null!==tu)for(var n=tu,r=eu;null!==r;){var o=r.expirationTime;if(0===o){if((null===n||null===tu)&&a("244"),r===r.nextScheduledRoot){eu=tu=r.nextScheduledRoot=null;break}if(r===eu)eu=o=r.nextScheduledRoot,tu.nextScheduledRoot=o,r.nextScheduledRoot=null;else{if(r===tu){(tu=n).nextScheduledRoot=eu,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if(o>e&&(e=o,t=r),r===tu)break;if(1073741823===e)break;n=r,r=r.nextScheduledRoot}}iu=t,au=e}var _u=!1;function Su(){return!!_u||!!i.unstable_shouldYield()&&(_u=!0)}function Ou(){try{if(!Su()&&null!==eu){bu();var e=eu;do{var t=e.expirationTime;0!==t&&hu<=t&&(e.nextExpirationTimeToWorkOn=hu),e=e.nextScheduledRoot}while(e!==eu)}Tu(0,!0)}finally{_u=!1}}function Tu(e,t){if(ku(),t)for(bu(),vu=hu;null!==iu&&0!==au&&e<=au&&!(_u&&hu>au);)Iu(iu,au,hu>au),ku(),bu(),vu=hu;else for(;null!==iu&&0!==au&&e<=au;)Iu(iu,au,!1),ku();if(t&&(nu=0,ru=null),0!==au&&xu(iu,au),gu=0,yu=null,null!==pu)for(e=pu,pu=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){su||(su=!0,cu=r)}}if(su)throw e=cu,cu=null,su=!1,e}function Ru(e,t){ou&&a("253"),iu=e,au=t,Iu(e,t,!1),Tu(1073741823,!1)}function Iu(e,t,n){if(ou&&a("245"),ou=!0,n){var r=e.finishedWork;null!==r?Au(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,xr(r)),Ka(e,n),null!==(r=e.finishedWork)&&(Su()?e.finishedWork=r:Au(e,r,t)))}else null!==(r=e.finishedWork)?Au(e,r,t):(e.finishedWork=null,-1!==(r=e.timeoutHandle)&&(e.timeoutHandle=-1,xr(r)),Ka(e,n),null!==(r=e.finishedWork)&&Au(e,r,t));ou=!1}function Au(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime>=n&&(null===pu?pu=[r]:pu.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===yu?gu++:(yu=e,gu=0),i.unstable_runWithPriority(i.unstable_ImmediatePriority,function(){Ha(e,t)})}function Nu(e){null===iu&&a("246"),iu.expirationTime=0,su||(su=!0,cu=e)}function Du(e,t){var n=lu;lu=!0;try{return e(t)}finally{(lu=n)||ou||Tu(1073741823,!1)}}function Pu(e,t){if(lu&&!fu){fu=!0;try{return e(t)}finally{fu=!1}}return e(t)}function Mu(e,t,n){lu||ou||0===uu||(Tu(uu,!1),uu=0);var r=lu;lu=!0;try{return i.unstable_runWithPriority(i.unstable_UserBlockingPriority,function(){return e(t,n)})}finally{(lu=r)||ou||Tu(1073741823,!1)}}function Fu(e,t,n,r,o){var i=t.current;e:if(n){t:{2===tn(n=n._reactInternalFiber)&&1===n.tag||a("170");var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Pr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);a("171"),u=void 0}if(1===n.tag){var s=n.type;if(Pr(s)){n=jr(n,s,u);break e}}n=u}else n=Rr;return null===t.context?t.context=n:t.pendingContext=n,t=o,(o=Yi(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(o.callback=t),Va(),Ji(i,o),Ja(i,r),r}function Bu(e,t,n,r){var o=t.current;return Fu(e,t,n,o=Xa(Cu(),o),r)}function ju(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Lu(e){var t=1073741822-25*(1+((1073741822-Cu()+500)/25|0));t>=Sa&&(t=Sa-1),this._expirationTime=Sa=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Wu(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function zu(e,t,n){e={current:t=Gr(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Uu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Vu(e,t,n,r,o){var i=n._reactRootContainer;if(i){if("function"===typeof o){var a=o;o=function(){var e=ju(i._internalRoot);a.call(e)}}null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new zu(e,!1,t)}(n,r),"function"===typeof o){var u=o;o=function(){var e=ju(i._internalRoot);u.call(e)}}Pu(function(){null!=e?i.legacy_renderSubtreeIntoContainer(e,t,o):i.render(t,o)})}return ju(i._internalRoot)}function Hu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Uu(t)||a("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:$e,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Se=function(e,t,n){switch(t){case"input":if(Ct(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=j(r);o||a("90"),Ve(r),Ct(r,o)}}}break;case"textarea":Qn(e,n);break;case"select":null!=(t=n.value)&&$n(e,!!n.multiple,t,!1)}},Lu.prototype.render=function(e){this._defer||a("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new Wu;return Fu(e,t,null,n,r._onCommit),r},Lu.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Lu.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||a("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,o=t;o!==this;)r=o,o=o._next;null===r&&a("251"),r._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Ru(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Lu.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Wu.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Wu.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&a("191",n),n()}}},zu.prototype.render=function(e,t){var n=this._internalRoot,r=new Wu;return null!==(t=void 0===t?null:t)&&r.then(t),Bu(e,n,null,r._onCommit),r},zu.prototype.unmount=function(e){var t=this._internalRoot,n=new Wu;return null!==(e=void 0===e?null:e)&&n.then(e),Bu(null,t,null,n._onCommit),n},zu.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,o=new Wu;return null!==(n=void 0===n?null:n)&&o.then(n),Bu(t,r,e,o._onCommit),o},zu.prototype.createBatch=function(){var e=new Lu(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime>=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Ne=Du,De=Mu,Pe=function(){ou||0===uu||(Tu(uu,!1),uu=0)};var Gu={createPortal:Hu,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?a("188"):a("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return Uu(t)||a("200"),Vu(null,e,t,!0,n)},render:function(e,t,n){return Uu(t)||a("200"),Vu(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return Uu(n)||a("200"),(null==e||void 0===e._reactInternalFiber)&&a("38"),Vu(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Uu(e)||a("40"),!!e._reactRootContainer&&(Pu(function(){Vu(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Hu.apply(void 0,arguments)},unstable_batchedUpdates:Du,unstable_interactiveUpdates:Mu,flushSync:function(e,t){ou&&a("187");var n=lu;lu=!0;try{return Za(e,t)}finally{lu=n,Tu(1073741823,!1)}},unstable_createRoot:function(e,t){return Uu(e)||a("299","unstable_createRoot"),new zu(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=lu;lu=!0;try{Za(e)}finally{(lu=t)||ou||Tu(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[F,B,j,R.injectEventPluginsByName,y,H,function(e){S(e,V)},Ie,Ae,Tn,A]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);zr=Vr(function(e){return t.onCommitFiberRoot(n,e)}),Ur=Vr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(r){}})(o({},e,{overrideProps:null,currentDispatcherRef:He.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:M,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var qu={default:Gu},Ku=qu&&Gu||qu;e.exports=Ku.default||Ku},function(e,t,n){"use strict";e.exports=n(76)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=null,r=!1,o=3,i=-1,a=-1,u=!1,s=!1;function c(){if(!u){var e=n.expirationTime;s?E():s=!0,C(p,e)}}function l(){var e=n,t=n.next;if(n===t)n=null;else{var r=n.previous;n=r.next=t,t.previous=r}e.next=e.previous=null,r=e.callback,t=e.expirationTime,e=e.priorityLevel;var i=o,u=a;o=e,a=t;try{var s=r()}finally{o=i,a=u}if("function"===typeof s)if(s={callback:s,priorityLevel:e,expirationTime:t,next:null,previous:null},null===n)n=s.next=s.previous=s;else{r=null,e=n;do{if(e.expirationTime>=t){r=e;break}e=e.next}while(e!==n);null===r?r=n:r===n&&(n=s,c()),(t=r.previous).next=r.previous=s,s.next=r,s.previous=t}}function f(){if(-1===i&&null!==n&&1===n.priorityLevel){u=!0;try{do{l()}while(null!==n&&1===n.priorityLevel)}finally{u=!1,null!==n?c():s=!1}}}function p(e){u=!0;var o=r;r=e;try{if(e)for(;null!==n;){var i=t.unstable_now();if(!(n.expirationTime<=i))break;do{l()}while(null!==n&&n.expirationTime<=i)}else if(null!==n)do{l()}while(null!==n&&!k())}finally{u=!1,r=o,null!==n?c():s=!1,f()}}var d,h,v=Date,m="function"===typeof setTimeout?setTimeout:void 0,g="function"===typeof clearTimeout?clearTimeout:void 0,y="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,b="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function x(e){d=y(function(t){g(h),e(t)}),h=m(function(){b(d),e(t.unstable_now())},100)}if("object"===typeof performance&&"function"===typeof performance.now){var w=performance;t.unstable_now=function(){return w.now()}}else t.unstable_now=function(){return v.now()};var C,E,k,_=null;if("undefined"!==typeof window?_=window:"undefined"!==typeof e&&(_=e),_&&_._schedMock){var S=_._schedMock;C=S[0],E=S[1],k=S[2],t.unstable_now=S[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var O=null,T=function(e){if(null!==O)try{O(e)}finally{O=null}};C=function(e){null!==O?setTimeout(C,0,e):(O=e,setTimeout(T,0,!1))},E=function(){O=null},k=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof y&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof b&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var R=null,I=!1,A=-1,N=!1,D=!1,P=0,M=33,F=33;k=function(){return P<=t.unstable_now()};var B=new MessageChannel,j=B.port2;B.port1.onmessage=function(){I=!1;var e=R,n=A;R=null,A=-1;var r=t.unstable_now(),o=!1;if(0>=P-r){if(!(-1!==n&&n<=r))return N||(N=!0,x(L)),R=e,void(A=n);o=!0}if(null!==e){D=!0;try{e(o)}finally{D=!1}}};var L=function e(t){if(null!==R){x(e);var n=t-P+F;n<F&&M<F?(8>n&&(n=8),F=n<M?M:n):M=n,P=t+F,I||(I=!0,j.postMessage(void 0))}else N=!1};C=function(e,t){R=e,A=t,D||0>t?j.postMessage(void 0):N||(N=!0,x(L))},E=function(){R=null,I=!1,A=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=o,a=i;o=e,i=t.unstable_now();try{return n()}finally{o=r,i=a,f()}},t.unstable_next=function(e){switch(o){case 1:case 2:case 3:var n=3;break;default:n=o}var r=o,a=i;o=n,i=t.unstable_now();try{return e()}finally{o=r,i=a,f()}},t.unstable_scheduleCallback=function(e,r){var a=-1!==i?i:t.unstable_now();if("object"===typeof r&&null!==r&&"number"===typeof r.timeout)r=a+r.timeout;else switch(o){case 1:r=a+-1;break;case 2:r=a+250;break;case 5:r=a+1073741823;break;case 4:r=a+1e4;break;default:r=a+5e3}if(e={callback:e,priorityLevel:o,expirationTime:r,next:null,previous:null},null===n)n=e.next=e.previous=e,c();else{a=null;var u=n;do{if(u.expirationTime>r){a=u;break}u=u.next}while(u!==n);null===a?a=n:a===n&&(n=e,c()),(r=a.previous).next=a.previous=e,e.next=a,e.previous=r}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)n=null;else{e===n&&(n=t);var r=e.previous;r.next=t,t.previous=r}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var n=o;return function(){var r=o,a=i;o=n,i=t.unstable_now();try{return e.apply(this,arguments)}finally{o=r,i=a,f()}}},t.unstable_getCurrentPriorityLevel=function(){return o},t.unstable_shouldYield=function(){return!r&&(null!==n&&n.expirationTime<a||k())},t.unstable_continueExecution=function(){null!==n&&c()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return n}}).call(this,n(26))},function(e,t,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function C(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case p:case a:case s:case u:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function E(e){return C(e)===p}t.AsyncMode=f,t.ConcurrentMode=p,t.ContextConsumer=l,t.ContextProvider=c,t.Element=o,t.ForwardRef=d,t.Fragment=a,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=u,t.Suspense=h,t.isAsyncMode=function(e){return E(e)||C(e)===f},t.isConcurrentMode=E,t.isContextConsumer=function(e){return C(e)===l},t.isContextProvider=function(e){return C(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return C(e)===d},t.isFragment=function(e){return C(e)===a},t.isLazy=function(e){return C(e)===g},t.isMemo=function(e){return C(e)===m},t.isPortal=function(e){return C(e)===i},t.isProfiler=function(e){return C(e)===s},t.isStrictMode=function(e){return C(e)===u},t.isSuspense=function(e){return C(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===p||e===s||e===u||e===h||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===b||e.$$typeof===x||e.$$typeof===w||e.$$typeof===y)},t.typeOf=C},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),a=new T(r||[]);return i._invoke=function(e,t,n){var r=f;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return I()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=_(a,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?h:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f="suspendedStart",p="suspendedYield",d="executing",h="completed",v={};function m(){}function g(){}function y(){}var b={};s(b,i,function(){return this});var x=Object.getPrototypeOf,w=x&&x(x(R([])));w&&w!==n&&r.call(w,i)&&(b=w);var C=y.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function k(e,t){var n;this._invoke=function(o,i){function a(){return new t(function(n,a){!function n(o,i,a,u){var s=l(e[o],e,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){n("next",e,a,u)},function(e){n("throw",e,a,u)}):t.resolve(f).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,u)})}u(s.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function _(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:t,done:!0}}return g.prototype=y,s(C,"constructor",y),s(y,"constructor",g),g.displayName=s(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},e.awrap=function(e){return{__await:e}},E(k.prototype),s(k.prototype,a,function(){return this}),e.AsyncIterator=k,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new k(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},E(C),s(C,u,"Generator"),s(C,i,function(){return this}),s(C,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(o){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";(function(e){var r=n(80),o=n(81),i=n(82);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=p(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),o=(e=u(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(s.isBuffer(t)){var n=0|d(t.length);return 0===(e=u(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?u(e,0):p(e,t);if("Buffer"===t.type&&i(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=u(e,t<0?0:0|d(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|d(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(s.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"===typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,o);if("number"===typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,o){var i,a=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<u;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===s)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+s>u&&(n=u-s),i=n;i>=0;i--){for(var f=!0,p=0;p<s;p++)if(c(e,i+p)!==c(t,p)){f=!1;break}if(f)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!==0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[n+a]=u}return a}function b(e,t,n,r){return U(W(t,e.length-n),e,n,r)}function x(e,t,n,r){return U(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return x(e,t,n,r)}function C(e,t,n,r){return U(z(t),e,n,r)}function E(e,t,n,r){return U(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function _(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,u,s,c=e[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=n)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(i=e[o+1]))&&(s=(31&c)<<6|63&i)>127&&(l=s);break;case 3:i=e[o+1],a=e[o+2],128===(192&i)&&128===(192&a)&&(s=(15&c)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:i=e[o+1],a=e[o+2],u=e[o+3],128===(192&i)&&128===(192&a)&&128===(192&u)&&(s=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(e){var t=e.length;if(t<=S)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=S));return n}(r)}t.Buffer=s,t.SlowBuffer=function(e){+e!=e&&(e=0);return s.alloc(+e)},t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=a(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return c(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?u(e,t):void 0!==n?"string"===typeof r?u(e,t).fill(n,r):u(e,t).fill(n):u(e,t)}(null,e,t,n)},s.allocUnsafe=function(e){return f(null,e)},s.allocUnsafeSlow=function(e){return f(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},s.byteLength=h,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?_(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return _(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,o){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),u=Math.min(i,a),c=this.slice(r,o),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){i=c[f],a=l[f];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return w(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=L(e[i]);return o}function I(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function A(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,o,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function P(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function M(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,i){return i||M(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return i||M(e,0,n,8),o.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=s.prototype;else{var o=t-e;n=new s(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},s.prototype.readUInt8=function(e,t){return t||A(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||A(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||A(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||A(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readInt8=function(e,t){return t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||A(e,4,this.length),o.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||A(e,4,this.length),o.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||A(e,8,this.length),o.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||A(e,8,this.length),o.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=0,a=1,u=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},s.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=s.isBuffer(e)?e:W(new s(e,r).toString()),u=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%u]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function L(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function U(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(26))},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),a=r[0],u=r[1],s=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,u)),l=0,f=u>0?a-4:a;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===u&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,s[l++]=255&t);1===u&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=0,u=n-o;a<u;a+=16383)i.push(l(e,a,a+16383>u?u:a+16383));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)r[u]=a[u],o[a.charCodeAt(u)]=u;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var o,i,a=[],u=t;u<n;u+=3)o=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,c=s>>1,l=-7,f=n?o-1:0,p=n?-1:1,d=e[t+f];for(f+=p,i=d&(1<<-l)-1,d>>=-l,l+=u;l>0;i=256*i+e[t+f],f+=p,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),i-=c}return(d?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,u,s,c=8*i-o-1,l=(1<<c)-1,f=l>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+f>=1?p/s:p*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(t*s-1)*Math.pow(2,o),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+d]=255&u,d+=h,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;e[n+d]=255&a,d+=h,a/=256,c-=8);e[n+d-h]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(84),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(26))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o=1,i={},a=!1,u=e.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(e);s=s&&s.setTimeout?s:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){l(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&l(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){l(e.data)},r=function(t){e.port2.postMessage(t)}}():u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;r=function(t){var n=u.createElement("script");n.onreadystatechange=function(){l(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(l,0,e)},s.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return i[o]=a,r(o),o++},s.clearImmediate=c}function c(e){delete i[e]}function l(e){if(a)setTimeout(l,0,e);else{var t=i[e];if(t){a=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{c(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(26),n(35))},,,,function(e,t){},function(e,t,n){"use strict";n(58);var r=n(90),o=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),t.Fragment=i("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:l,props:i,_owner:a.current}}t.jsx=c,t.jsxs=c},function(e,t,n){"use strict";e.exports=n(91)},function(e,t,n){"use strict";var r=n(58),o=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var a=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;o=f("react.element"),i=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),a=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var p="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=y.prototype=new g;b.constructor=y,r(b,m.prototype),b.isPureReactComponent=!0;var x={current:null},w=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,i={},a=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:o,type:e,key:a,ref:u,props:i,_owner:x.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var _=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function O(e,t,n,r,a){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case o:case i:s=!0}}if(s)return a=a(s=e),e=""===r?"."+S(s,0):r,Array.isArray(a)?(n="",null!=e&&(n=e.replace(_,"$&/")+"/"),O(a,t,n,"",function(e){return e})):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+S(u=e[c],c);s+=O(u,t,n,l,a)}else if("function"===typeof(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e)))for(e=l.call(e),c=0;!(u=e.next()).done;)s+=O(u=u.value,t,n,l=r+S(u,c++),a);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function T(e,t,n){if(null==e)return e;var r=[],o=0;return O(e,r,"","",function(e){return t.call(n,e,o++)}),r}function R(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}if(1===e._status)return e._result;throw e._result}var I={current:null};function A(){var e=I.current;if(null===e)throw Error(d(321));return e}var N={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var i=r({},e.props),a=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!C.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:u,props:i,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(this,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(63),o={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function i(e,t){return o[t]||"".concat(r.a.generate(e),"-").concat(t)}},,,,,,,,,,,function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach(function(o){r[o]=e[o].reduce(function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e},[]).join(" ")}),r}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(95);function o(e,t){var n={};return t.forEach(function(t){n[t]=Object(r.a)(e,t)}),n}},function(e,t,n){"use strict";var r=n(6),o=n(22),i=n(43),a=n(12);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.b,t=Object.keys(e).reduce(function(t,n){return e[n].filterProps.forEach(function(r){t[r]=e[n]}),t},{});function n(e,n,o){var i,a=(i={},Object(r.a)(i,e,n),Object(r.a)(i,"theme",o),i),u=t[e];return u?u(a):Object(r.a)({},e,n)}return function e(i){var u=i||{},s=u.sx,c=u.theme,l=void 0===c?{}:c;if(!s)return null;function f(i){var u=i;if("function"===typeof i)u=i(l);else if("object"!==typeof i)return i;if(!u)return null;var s=Object(a.a)(l.breakpoints),c=Object.keys(s),f=s;return Object.keys(u).forEach(function(i){var s,c,p=(s=u[i],c=l,"function"===typeof s?s(c):s);if(null!==p&&void 0!==p)if("object"===typeof p)if(t[i])f=Object(o.a)(f,n(i,p,l));else{var d=Object(a.b)({theme:l},p,function(e){return Object(r.a)({},i,e)});!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce(function(e,t){return e.concat(Object.keys(t))},[]),o=new Set(r);return t.every(function(e){return o.size===Object.keys(e).length})}(d,p)?f=Object(o.a)(f,d):f[i]=e({sx:p,theme:l})}else f=Object(o.a)(f,n(i,p,l))}),Object(a.c)(c,f)}return Array.isArray(s)?s.map(f):f(s)}}();u.filterProps=["sx"],t.a=u},function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return f});var r=n(46);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function i(e){if(e.type)return e;if("#"===e.charAt(0))return i(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map(function(e){return e+e})),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3}).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(Object(r.a)(9,e));var o,a=e.substring(t+1,e.length-1);if("color"===n){if(o=(a=a.split(" ")).shift(),4===a.length&&"/"===a[3].charAt(0)&&(a[3]=a[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(o))throw new Error(Object(r.a)(10,o))}else a=a.split(",");return{type:n,values:a=a.map(function(e){return parseFloat(e)}),colorSpace:o}}function a(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map(function(e,t){return t<3?parseInt(e,10):e}):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function u(e){var t="hsl"===(e=i(e)).type?i(function(e){var t=(e=i(e)).values,n=t[0],r=t[1]/100,o=t[2]/100,u=r*Math.min(o,1-o),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return o-u*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(c+="a",l.push(t[3])),a({type:c,values:l})}(e)).values:e.values;return t=t.map(function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function s(e,t){var n=u(e),r=u(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c(e,t){return e=i(e),t=o(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,a(e)}function l(e,t){if(e=i(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return a(e)}function f(e,t){if(e=i(e),t=o(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return a(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4);function o(e,t){var n=Object(r.a)({},t);return Object.keys(e).forEach(function(t){void 0===n[t]&&(n[t]=e[t])}),n}},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(14),o=n(4),i=n(5),a=n(55),u=n(43),s=["sx"],c=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach(function(n){u.a[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]}),t};function l(e){var t,n=e.sx,u=Object(i.a)(e,s),l=c(u),f=l.systemProps,p=l.otherProps;return t=Array.isArray(n)?[f].concat(Object(r.a)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return Object(a.b)(e)?Object(o.a)({},f,e):f}:Object(o.a)({},f,n),Object(o.a)({},p,{sx:t})}},function(e,t,n){"use strict";var r=n(6),o=n(5),i=n(4),a=n(2),u=n.n(a),s=n(9),c=n(110),l=n(106),f=n(109),p=n(16),d=n(21),h=n(7);function v(e,t){"function"===typeof e?e(t):e&&(e.current=t)}var m=function(e,t){return a.useMemo(function(){return null==e&&null==t?null:function(n){v(e,n),v(t,n)}},[e,t])},g="undefined"!==typeof window?a.useLayoutEffect:a.useEffect;var y,b=function(e){var t=a.useRef(e);return g(function(){t.current=e}),a.useCallback(function(){return t.current.apply(void 0,arguments)},[])},x=!0,w=!1,C={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function E(e){e.metaKey||e.altKey||e.ctrlKey||(x=!0)}function k(){x=!1}function _(){"hidden"===this.visibilityState&&w&&(x=!0)}function S(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return x||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!C[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var O=function(){var e=a.useCallback(function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",E,!0),t.addEventListener("mousedown",k,!0),t.addEventListener("pointerdown",k,!0),t.addEventListener("touchstart",k,!0),t.addEventListener("visibilitychange",_,!0))},[]),t=a.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!S(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(w=!0,window.clearTimeout(y),y=window.setTimeout(function(){w=!1},100),t.current=!1,!0)},ref:e}},T=n(14),R=n(30);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A=u.a.createContext(null);function N(e,t){var n=Object.create(null);return e&&a.Children.map(e,function(e){return e}).forEach(function(e){n[e.key]=function(e){return t&&Object(a.isValidElement)(e)?t(e):e}(e)}),n}function D(e,t,n){return null!=n[t]?n[t]:e.props[t]}function P(e,t,n){var r=N(e.children),o=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,o=Object.create(null),i=[];for(var a in e)a in t?i.length&&(o[a]=i,i=[]):i.push(a);var u={};for(var s in t){if(o[s])for(r=0;r<o[s].length;r++){var c=o[s][r];u[o[s][r]]=n(c)}u[s]=n(s)}for(r=0;r<i.length;r++)u[i[r]]=n(i[r]);return u}(t,r);return Object.keys(o).forEach(function(i){var u=o[i];if(Object(a.isValidElement)(u)){var s=i in t,c=i in r,l=t[i],f=Object(a.isValidElement)(l)&&!l.props.in;!c||s&&!f?c||!s||f?c&&s&&Object(a.isValidElement)(l)&&(o[i]=Object(a.cloneElement)(u,{onExited:n.bind(null,u),in:l.props.in,exit:D(u,"exit",e),enter:D(u,"enter",e)})):o[i]=Object(a.cloneElement)(u,{in:!1}):o[i]=Object(a.cloneElement)(u,{onExited:n.bind(null,u),in:!0,exit:D(u,"exit",e),enter:D(u,"enter",e)})}}),o}var M=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},F=function(e){var t,n;function r(t,n){var r,o=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=r.prototype;return o.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},o.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n,r,o=t.children,i=t.handleExited;return{children:t.firstRender?(n=e,r=i,N(n.children,function(e){return Object(a.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:D(e,"appear",n),enter:D(e,"enter",n),exit:D(e,"exit",n)})})):P(e,o,i),firstRender:!1}},o.handleExited=function(e,t){var n=N(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState(function(t){var n=I({},t.children);return delete n[e.key],{children:n}}))},o.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["component","childFactory"]),o=this.state.contextValue,i=M(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?u.a.createElement(A.Provider,{value:o},i):u.a.createElement(A.Provider,{value:o},u.a.createElement(t,r,i))},r}(u.a.Component);F.propTypes={},F.defaultProps={component:"div",childFactory:function(e){return e}};var B=F,j=n(31),L=n(8);var W=function(e){var t=e.className,n=e.classes,r=e.pulsate,o=void 0!==r&&r,i=e.rippleX,u=e.rippleY,c=e.rippleSize,l=e.in,f=e.onExited,p=e.timeout,d=a.useState(!1),v=Object(h.a)(d,2),m=v[0],g=v[1],y=Object(s.a)(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),b={width:c,height:c,top:-c/2+u,left:-c/2+i},x=Object(s.a)(n.child,m&&n.childLeaving,o&&n.childPulsate);return l||m||g(!0),a.useEffect(function(){if(!l&&null!=f){var e=setTimeout(f,p);return function(){clearTimeout(e)}}},[f,l,p]),Object(L.jsx)("span",{className:y,style:b,children:Object(L.jsx)("span",{className:x})})},z=n(95),U=n(107);var V,H,G,q,K,$,X,Y,Q=Object(U.a)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),J=["center","classes","className"],Z=function(e){return e},ee=Object(j.a)(K||(K=Z(V||(V=Object(R.a)(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"]))))),te=Object(j.a)($||($=Z(H||(H=Object(R.a)(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]))))),ne=Object(j.a)(X||(X=Z(G||(G=Object(R.a)(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"]))))),re=Object(p.a)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),oe=Object(p.a)(W,{name:"MuiTouchRipple",slot:"Ripple"})(Y||(Y=Z(q||(q=Object(R.a)(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"])))),Q.rippleVisible,ee,550,function(e){return e.theme.transitions.easing.easeInOut},Q.ripplePulsate,function(e){return e.theme.transitions.duration.shorter},Q.child,Q.childLeaving,te,550,function(e){return e.theme.transitions.easing.easeInOut},Q.childPulsate,ne,function(e){return e.theme.transitions.easing.easeInOut}),ie=a.forwardRef(function(e,t){var n=Object(d.a)({props:e,name:"MuiTouchRipple"}),r=n.center,u=void 0!==r&&r,c=n.classes,l=void 0===c?{}:c,f=n.className,p=Object(o.a)(n,J),v=a.useState([]),m=Object(h.a)(v,2),g=m[0],y=m[1],b=a.useRef(0),x=a.useRef(null);a.useEffect(function(){x.current&&(x.current(),x.current=null)},[g]);var w=a.useRef(!1),C=a.useRef(null),E=a.useRef(null),k=a.useRef(null);a.useEffect(function(){return function(){clearTimeout(C.current)}},[]);var _=a.useCallback(function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,o=e.rippleSize,i=e.cb;y(function(e){return[].concat(Object(T.a)(e),[Object(L.jsx)(oe,{classes:{ripple:Object(s.a)(l.ripple,Q.ripple),rippleVisible:Object(s.a)(l.rippleVisible,Q.rippleVisible),ripplePulsate:Object(s.a)(l.ripplePulsate,Q.ripplePulsate),child:Object(s.a)(l.child,Q.child),childLeaving:Object(s.a)(l.childLeaving,Q.childLeaving),childPulsate:Object(s.a)(l.childPulsate,Q.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:o},b.current)])}),b.current+=1,x.current=i},[l]),S=a.useCallback(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,o=void 0!==r&&r,i=t.center,a=void 0===i?u||t.pulsate:i,s=t.fakeElement,c=void 0!==s&&s;if("mousedown"===e.type&&w.current)w.current=!1;else{"touchstart"===e.type&&(w.current=!0);var l,f,p,d=c?null:k.current,h=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(a||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(h.width/2),f=Math.round(h.height/2);else{var v=e.touches?e.touches[0]:e,m=v.clientX,g=v.clientY;l=Math.round(m-h.left),f=Math.round(g-h.top)}if(a)(p=Math.sqrt((2*Math.pow(h.width,2)+Math.pow(h.height,2))/3))%2===0&&(p+=1);else{var y=2*Math.max(Math.abs((d?d.clientWidth:0)-l),l)+2,b=2*Math.max(Math.abs((d?d.clientHeight:0)-f),f)+2;p=Math.sqrt(Math.pow(y,2)+Math.pow(b,2))}e.touches?null===E.current&&(E.current=function(){_({pulsate:o,rippleX:l,rippleY:f,rippleSize:p,cb:n})},C.current=setTimeout(function(){E.current&&(E.current(),E.current=null)},80)):_({pulsate:o,rippleX:l,rippleY:f,rippleSize:p,cb:n})}},[u,_]),O=a.useCallback(function(){S({},{pulsate:!0})},[S]),R=a.useCallback(function(e,t){if(clearTimeout(C.current),"touchend"===e.type&&E.current)return E.current(),E.current=null,void(C.current=setTimeout(function(){R(e,t)}));E.current=null,y(function(e){return e.length>0?e.slice(1):e}),x.current=t},[]);return a.useImperativeHandle(t,function(){return{pulsate:O,start:S,stop:R}},[O,S,R]),Object(L.jsx)(re,Object(i.a)({className:Object(s.a)(l.root,Q.root,f),ref:k},p,{children:Object(L.jsx)(B,{component:null,exit:!0,children:g})}))});function ae(e){return Object(z.a)("MuiButtonBase",e)}var ue,se=Object(U.a)("MuiButtonBase",["root","disabled","focusVisible"]),ce=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],le=Object(p.a)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((ue={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},Object(r.a)(ue,"&.".concat(se.disabled),{pointerEvents:"none",cursor:"default"}),Object(r.a)(ue,"@media print",{colorAdjust:"exact"}),ue)),fe=a.forwardRef(function(e,t){var n=Object(d.a)({props:e,name:"MuiButtonBase"}),r=n.action,u=n.centerRipple,c=void 0!==u&&u,f=n.children,p=n.className,v=n.component,g=void 0===v?"button":v,y=n.disabled,x=void 0!==y&&y,w=n.disableRipple,C=void 0!==w&&w,E=n.disableTouchRipple,k=void 0!==E&&E,_=n.focusRipple,S=void 0!==_&&_,T=n.LinkComponent,R=void 0===T?"a":T,I=n.onBlur,A=n.onClick,N=n.onContextMenu,D=n.onDragLeave,P=n.onFocus,M=n.onFocusVisible,F=n.onKeyDown,B=n.onKeyUp,j=n.onMouseDown,W=n.onMouseLeave,z=n.onMouseUp,U=n.onTouchEnd,V=n.onTouchMove,H=n.onTouchStart,G=n.tabIndex,q=void 0===G?0:G,K=n.TouchRippleProps,$=n.touchRippleRef,X=n.type,Y=Object(o.a)(n,ce),Q=a.useRef(null),J=a.useRef(null),Z=m(J,$),ee=O(),te=ee.isFocusVisibleRef,ne=ee.onFocus,re=ee.onBlur,oe=ee.ref,ue=a.useState(!1),se=Object(h.a)(ue,2),fe=se[0],pe=se[1];x&&fe&&pe(!1),a.useImperativeHandle(r,function(){return{focusVisible:function(){pe(!0),Q.current.focus()}}},[]);var de=a.useState(!1),he=Object(h.a)(de,2),ve=he[0],me=he[1];a.useEffect(function(){me(!0)},[]);var ge=ve&&!C&&!x;function ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return b(function(r){return t&&t(r),!n&&J.current&&J.current[e](r),!0})}a.useEffect(function(){fe&&S&&!C&&ve&&J.current.pulsate()},[C,S,fe,ve]);var be=ye("start",j),xe=ye("stop",N),we=ye("stop",D),Ce=ye("stop",z),Ee=ye("stop",function(e){fe&&e.preventDefault(),W&&W(e)}),ke=ye("start",H),_e=ye("stop",U),Se=ye("stop",V),Oe=ye("stop",function(e){re(e),!1===te.current&&pe(!1),I&&I(e)},!1),Te=b(function(e){Q.current||(Q.current=e.currentTarget),ne(e),!0===te.current&&(pe(!0),M&&M(e)),P&&P(e)}),Re=function(){var e=Q.current;return g&&"button"!==g&&!("A"===e.tagName&&e.href)},Ie=a.useRef(!1),Ae=b(function(e){S&&!Ie.current&&fe&&J.current&&" "===e.key&&(Ie.current=!0,J.current.stop(e,function(){J.current.start(e)})),e.target===e.currentTarget&&Re()&&" "===e.key&&e.preventDefault(),F&&F(e),e.target===e.currentTarget&&Re()&&"Enter"===e.key&&!x&&(e.preventDefault(),A&&A(e))}),Ne=b(function(e){S&&" "===e.key&&J.current&&fe&&!e.defaultPrevented&&(Ie.current=!1,J.current.stop(e,function(){J.current.pulsate(e)})),B&&B(e),A&&e.target===e.currentTarget&&Re()&&" "===e.key&&!e.defaultPrevented&&A(e)}),De=g;"button"===De&&(Y.href||Y.to)&&(De=R);var Pe={};"button"===De?(Pe.type=void 0===X?"button":X,Pe.disabled=x):(Y.href||Y.to||(Pe.role="button"),x&&(Pe["aria-disabled"]=x));var Me=m(oe,Q),Fe=m(t,Me);var Be=Object(i.a)({},n,{centerRipple:c,component:g,disabled:x,disableRipple:C,disableTouchRipple:k,focusRipple:S,tabIndex:q,focusVisible:fe}),je=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,o=e.classes,i={root:["root",t&&"disabled",n&&"focusVisible"]},a=Object(l.a)(i,ae,o);return n&&r&&(a.root+=" ".concat(r)),a}(Be);return Object(L.jsxs)(le,Object(i.a)({as:De,className:Object(s.a)(je.root,p),ownerState:Be,onBlur:Oe,onClick:A,onContextMenu:xe,onFocus:Te,onKeyDown:Ae,onKeyUp:Ne,onMouseDown:be,onMouseLeave:Ee,onMouseUp:Ce,onDragLeave:we,onTouchEnd:_e,onTouchMove:Se,onTouchStart:ke,ref:Fe,tabIndex:x?-1:q,type:X},Pe,Y,{children:[f,ge?Object(L.jsx)(ie,Object(i.a)({ref:Z,center:c},K)):null]}))}),pe=n(13);function de(e){return Object(z.a)("MuiButton",e)}var he=Object(U.a)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var ve=a.createContext({}),me=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],ge=function(e){return Object(i.a)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},ye=Object(p.a)(fe,{shouldForwardProp:function(e){return Object(p.b)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat(Object(pe.a)(n.color))],t["size".concat(Object(pe.a)(n.size))],t["".concat(n.variant,"Size").concat(Object(pe.a)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(function(e){var t,n=e.theme,o=e.ownerState;return Object(i.a)({},n.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:n.shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":Object(i.a)({textDecoration:"none",backgroundColor:Object(f.a)(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===o.variant&&"inherit"!==o.color&&{backgroundColor:Object(f.a)(n.palette[o.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===o.variant&&"inherit"!==o.color&&{border:"1px solid ".concat(n.palette[o.color].main),backgroundColor:Object(f.a)(n.palette[o.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===o.variant&&{backgroundColor:n.palette.grey.A100,boxShadow:n.shadows[4],"@media (hover: none)":{boxShadow:n.shadows[2],backgroundColor:n.palette.grey[300]}},"contained"===o.variant&&"inherit"!==o.color&&{backgroundColor:n.palette[o.color].dark,"@media (hover: none)":{backgroundColor:n.palette[o.color].main}}),"&:active":Object(i.a)({},"contained"===o.variant&&{boxShadow:n.shadows[8]})},Object(r.a)(t,"&.".concat(he.focusVisible),Object(i.a)({},"contained"===o.variant&&{boxShadow:n.shadows[6]})),Object(r.a)(t,"&.".concat(he.disabled),Object(i.a)({color:n.palette.action.disabled},"outlined"===o.variant&&{border:"1px solid ".concat(n.palette.action.disabledBackground)},"outlined"===o.variant&&"secondary"===o.color&&{border:"1px solid ".concat(n.palette.action.disabled)},"contained"===o.variant&&{color:n.palette.action.disabled,boxShadow:n.shadows[0],backgroundColor:n.palette.action.disabledBackground})),t),"text"===o.variant&&{padding:"6px 8px"},"text"===o.variant&&"inherit"!==o.color&&{color:n.palette[o.color].main},"outlined"===o.variant&&{padding:"5px 15px",border:"1px solid ".concat("light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===o.variant&&"inherit"!==o.color&&{color:n.palette[o.color].main,border:"1px solid ".concat(Object(f.a)(n.palette[o.color].main,.5))},"contained"===o.variant&&{color:n.palette.getContrastText(n.palette.grey[300]),backgroundColor:n.palette.grey[300],boxShadow:n.shadows[2]},"contained"===o.variant&&"inherit"!==o.color&&{color:n.palette[o.color].contrastText,backgroundColor:n.palette[o.color].main},"inherit"===o.color&&{color:"inherit",borderColor:"currentColor"},"small"===o.size&&"text"===o.variant&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},"large"===o.size&&"text"===o.variant&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},"small"===o.size&&"outlined"===o.variant&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},"large"===o.size&&"outlined"===o.variant&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},"small"===o.size&&"contained"===o.variant&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},"large"===o.size&&"contained"===o.variant&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},o.fullWidth&&{width:"100%"})},function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},Object(r.a)(t,"&.".concat(he.focusVisible),{boxShadow:"none"}),Object(r.a)(t,"&:active",{boxShadow:"none"}),Object(r.a)(t,"&.".concat(he.disabled),{boxShadow:"none"}),t)}),be=Object(p.a)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat(Object(pe.a)(n.size))]]}})(function(e){var t=e.ownerState;return Object(i.a)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},ge(t))}),xe=Object(p.a)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat(Object(pe.a)(n.size))]]}})(function(e){var t=e.ownerState;return Object(i.a)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},ge(t))}),we=a.forwardRef(function(e,t){var n=a.useContext(ve),r=Object(c.a)(n,e),u=Object(d.a)({props:r,name:"MuiButton"}),f=u.children,p=u.color,h=void 0===p?"primary":p,v=u.component,m=void 0===v?"button":v,g=u.className,y=u.disabled,b=void 0!==y&&y,x=u.disableElevation,w=void 0!==x&&x,C=u.disableFocusRipple,E=void 0!==C&&C,k=u.endIcon,_=u.focusVisibleClassName,S=u.fullWidth,O=void 0!==S&&S,T=u.size,R=void 0===T?"medium":T,I=u.startIcon,A=u.type,N=u.variant,D=void 0===N?"text":N,P=Object(o.a)(u,me),M=Object(i.a)({},u,{color:h,component:m,disabled:b,disableElevation:w,disableFocusRipple:E,fullWidth:O,size:R,type:A,variant:D}),F=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,o=e.size,a=e.variant,u=e.classes,s={root:["root",a,"".concat(a).concat(Object(pe.a)(t)),"size".concat(Object(pe.a)(o)),"".concat(a,"Size").concat(Object(pe.a)(o)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat(Object(pe.a)(o))],endIcon:["endIcon","iconSize".concat(Object(pe.a)(o))]},c=Object(l.a)(s,de,u);return Object(i.a)({},u,c)}(M),B=I&&Object(L.jsx)(be,{className:F.startIcon,ownerState:M,children:I}),j=k&&Object(L.jsx)(xe,{className:F.endIcon,ownerState:M,children:k});return Object(L.jsxs)(ye,Object(i.a)({ownerState:M,className:Object(s.a)(g,n.className),component:m,disabled:b,focusRipple:!E,focusVisibleClassName:Object(s.a)(F.focusVisible,_),ref:t,type:A},P,{classes:F,children:[B,f,j]}))});t.a=we},function(e,t,n){"use strict";var r=n(4),o=n(5),i=n(55),a=n(6),u=["values","unit","step"],s=function(e){var t=Object.keys(e).map(function(t){return{key:t,val:e[t]}})||[];return t.sort(function(e,t){return e.val-t.val}),t.reduce(function(e,t){return Object(r.a)({},e,Object(a.a)({},t.key,t.val))},{})};var c={borderRadius:4},l=n(15);var f=["breakpoints","palette","spacing","shape"];t.a=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,a=e.palette,p=void 0===a?{}:a,d=e.spacing,h=e.shape,v=void 0===h?{}:h,m=Object(o.a)(e,f),g=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,i=e.unit,a=void 0===i?"px":i,c=e.step,l=void 0===c?5:c,f=Object(o.a)(e,u),p=s(n),d=Object.keys(p);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(a,")")}function v(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-l/100).concat(a,")")}function m(e,t){var r=d.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(a,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[d[r]]?n[d[r]]:t)-l/100).concat(a,")")}return Object(r.a)({keys:d,values:p,up:h,down:v,between:m,only:function(e){return d.indexOf(e)+1<d.length?m(e,d[d.indexOf(e)+1]):h(e)},not:function(e){var t=d.indexOf(e);return 0===t?h(d[1]):t===d.length-1?v(d[t]):m(e,d[d.indexOf(e)+1]).replace("@media","@media not all and")},unit:a},f)}(n),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Object(l.a)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map(function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n}).join(" ")};return n.mui=!0,n}(d),b=Object(i.a)({breakpoints:g,direction:"ltr",components:{},palette:Object(r.a)({mode:"light"},p),spacing:y,shape:Object(r.a)({},c,v)},m),x=arguments.length,w=new Array(x>1?x-1:0),C=1;C<x;C++)w[C-1]=arguments[C];return b=w.reduce(function(e,t){return Object(i.a)(e,t)},b)}},function(e,t,n){"use strict";var r=n(6),o=n(5),i=n(4),a=n(2),u=n(9),s=n(106),c=n(21),l=n(16),f=n(95),p=n(107);function d(e){return Object(f.a)("MuiContainer",e)}Object(p.a)("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]);var h=n(13),v=n(8),m=["className","component","disableGutters","fixed","maxWidth"],g=Object(l.a)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat(Object(h.a)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}})(function(e){var t=e.theme,n=e.ownerState;return Object(i.a)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&Object(r.a)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}))},function(e){var t=e.theme;return e.ownerState.fixed&&Object.keys(t.breakpoints.values).reduce(function(e,n){var r=t.breakpoints.values[n];return 0!==r&&(e[t.breakpoints.up(n)]={maxWidth:"".concat(r).concat(t.breakpoints.unit)}),e},{})},function(e){var t=e.theme,n=e.ownerState;return Object(i.a)({},"xs"===n.maxWidth&&Object(r.a)({},t.breakpoints.up("xs"),{maxWidth:Math.max(t.breakpoints.values.xs,444)}),n.maxWidth&&"xs"!==n.maxWidth&&Object(r.a)({},t.breakpoints.up(n.maxWidth),{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}))}),y=a.forwardRef(function(e,t){var n=Object(c.a)({props:e,name:"MuiContainer"}),r=n.className,a=n.component,l=void 0===a?"div":a,f=n.disableGutters,p=void 0!==f&&f,y=n.fixed,b=void 0!==y&&y,x=n.maxWidth,w=void 0===x?"lg":x,C=Object(o.a)(n,m),E=Object(i.a)({},n,{component:l,disableGutters:p,fixed:b,maxWidth:w}),k=function(e){var t=e.classes,n=e.fixed,r=e.disableGutters,o=e.maxWidth,i={root:["root",o&&"maxWidth".concat(Object(h.a)(String(o))),n&&"fixed",r&&"disableGutters"]};return Object(s.a)(i,d,t)}(E);return Object(v.jsx)(g,Object(i.a)({as:l,ownerState:E,className:Object(u.a)(k.root,r),ref:t},C))});t.a=y},function(e,t,n){"use strict";var r=n(4),o=n(5),i=n(2),a=n(9),u=n(44),s=n(108),c=n(111),l=n(45),f=n(8),p=["className","component"];var d=n(63),h=n(64),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=e.defaultClassName,d=void 0===n?"MuiBox-root":n,h=e.generateClassName,v=e.styleFunctionSx,m=void 0===v?s.a:v,g=Object(u.a)("div")(m);return i.forwardRef(function(e,n){var i=Object(l.a)(t),u=Object(c.a)(e),s=u.className,v=u.component,m=void 0===v?"div":v,y=Object(o.a)(u,p);return Object(f.jsx)(g,Object(r.a)({as:m,ref:n,className:Object(a.a)(s,h?h(d):d),theme:i},y))})}({defaultTheme:Object(h.a)(),defaultClassName:"MuiBox-root",generateClassName:d.a.generate});t.a=v},function(e,t,n){"use strict";var r=n(5),o=n(4),i=n(2),a=n(9),u=n(111),s=n(106),c=n(16),l=n(21),f=n(13),p=n(95),d=n(107);function h(e){return Object(p.a)("MuiTypography",e)}Object(d.a)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var v=n(8),m=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],g=Object(c.a)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat(Object(f.a)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(function(e){var t=e.theme,n=e.ownerState;return Object(o.a)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})}),y={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},b={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},x=i.forwardRef(function(e,t){var n=Object(l.a)({props:e,name:"MuiTypography"}),i=function(e){return b[e]||e}(n.color),c=Object(u.a)(Object(o.a)({},n,{color:i})),p=c.align,d=void 0===p?"inherit":p,x=c.className,w=c.component,C=c.gutterBottom,E=void 0!==C&&C,k=c.noWrap,_=void 0!==k&&k,S=c.paragraph,O=void 0!==S&&S,T=c.variant,R=void 0===T?"body1":T,I=c.variantMapping,A=void 0===I?y:I,N=Object(r.a)(c,m),D=Object(o.a)({},c,{align:d,color:i,className:x,component:w,gutterBottom:E,noWrap:_,paragraph:O,variant:R,variantMapping:A}),P=w||(O?"p":A[R]||y[R])||"span",M=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,o=e.paragraph,i=e.variant,a=e.classes,u={root:["root",i,"inherit"!==e.align&&"align".concat(Object(f.a)(t)),n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return Object(s.a)(u,h,a)}(D);return Object(v.jsx)(g,Object(o.a)({as:P,ref:t,ownerState:D,className:Object(a.a)(M.root,x)},N))});t.a=x}]]);
//# sourceMappingURL=2.e676cf34.chunk.js.map